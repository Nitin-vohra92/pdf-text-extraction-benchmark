=1

ILATO Project: Fusion of Optical Surface Models and Volumetric CT Data

Introduction

In the field of industrial quality inspection tactile measurements are more and more superseded by non-destructive measurement methods. Approaches like structured light 3D scanners [\cite=Sablatnig1992] or laser based distance measurements generate highly accurate representations of the test objects surface. During this process an irregular triangular mesh of the objects surface with a spacial resolution down to ~  10μm is created. The time needed to acquire this information varies between seconds and minutes but does not provide interior structures. As an alternative method to discover interior damages or indication of wear out computed tomography (CT) scans create volumetric data as a digital representation of internal structures with a resolution of ~  75μm. The time needed to complete a CT scan is significantly higher than its optical counterpart and can take hours or days depending on size and density of specimen. All those models can be matched against existing digital descriptions used during production such as CAD files, if available. The ILATO project - a joint project with Empa - Swiss Federal Laboratories for Materials Science and Technology - investigates opportunities to speed up acquisition times in limited angle computed tomography, to optimize CT trajectories and to improve quality of volumetric representation.

The paper is structured as follows: The next section presents the image acquisition techniques Computed Tomography and Optical Imaging. Section [\ref=problem] describes challenges from combining output of different image acquisition techniques. The final section summarizes the current state of the project and gives an outlook to future work.

Combining Different Imaging Techniques

X-ray CT offers a non-destructive method for the imaging, inspection and metrology of interior and exterior structures of a specimen. For specimens deviating substantially from circular symmetry modified scan procedures under the name Limited Angle CT have been suggested, where only a limited number of projections is recorded. It is desired to obtain measurements along a [formula] circular trajectory, if this is not feasible due to highly anisotropic shaped objects or impenetrable regions, Limited Angle CT is indicated only collecting a subset of all projections e.g. on arcs of less than [formula]. Due to the limited information, the accuracy of the measurement varies significantly over the specimen[\cite=Schuetz2013]. The optical scan is not limited in acquisition angles but in the contrary suffers from shadowing effects. This work focuses on the registration process with volumetric data sets in order to generate masks as complementary data from optical surface models and estimate weights for reconstruction methods explained in section [\ref=analyticalReconstruction] to mitigates the artifacts introduceb by Limited Angle CT.

A fundamental requirements of these applications is the estimation of scene depth information or representation of recorded structures, preferably in real time, with infinite resolution, contrast and without noise. It is not possible to achieve all of this, and the hardware setup of our project is fixed. The following sections introduce basic principles of techniques occuring in our setup. CT hardware and related reconstruction is in the project partners responsibility, they pursue a filtered backprojection approach. Our optical scanning system combines both approaches presented in section [\ref=opticalScan].

Computed Tomography Reconstruction Methods

Standard CT workflow is to acquire a series of attenuation measurements of the specimen from various angles and compute a volumetric model. The object under investigation is placed on a rotating table between X-ray source and detector screen. From a finite number of projections of an object, mostly on circular trajectory, sinograms representing attenuation values of specimen are acquired. 3D reconstruction from a series of 2D projections is accomplished via inverse radon transformation . To perform the reconstruction task iterative or analytical algorithms are known as described below.

Optical Surface Scan

Surface scanning refers to optical systems that measure objects through visible light and generate dense 3D polygonal meshes. The resulting data are restricted to the outer shell of an object, which distinguishes surface scanning from volume scanning. A major distinction is made with respect to the underlying principle of computing xyz coordinates, the most common being time-of-flight and triangulation. 3D imaging systems can use passive image capture or active light projection. Optical scans in our project are performed with a Breuckmann SmartScan 3D-HE system combining stereoscopic acquisition and fringe light projection. Our partners at Empa are using a Konica Minolta VI-900 employing a laser line only with structured light acquisition. The resulting 3D models of these optical scanners are processed with GigaMesh[\cite=Mara2010] software framework incorporating algorithms of ILATO project as library.

Registration of Dual Sensor Surface Models

Optically acquired data need to be registered with data from CT to support reconstruction algorithm by applying a mask or weights to filtered backprojection. Attempts for accurate and fast automatic registration are discussed in the following.

Challenges

We have to deal with imbalanced data sets since optical scans provide a fine grain surface structure but CT scans offer a rather coarse grain mesh including interior structures. The optical surface model represents a clipping of the surface extracted from CT model. In the presented example shown in figure [\ref=convexhull] the optical model has 5 million vertices to represent a total surface area of 1042 ~ cm2, while the volumetric model of the same object represents all interior and exterior structures in 0.5 million vertices covering a total area of 1507 ~ cm2 after surface triangulation. Most approaches implicitly consider the meshes to be produced by the very same imaging technique which implies the assumption to work with similar resolution, similar grid regularities and a common set of features. The same implicit assumption applies when operating on synthetic meshes or having full control over the process of transferring a volumetric model to a surface mesh. The resolution numbers given in the introduction certainly only apply for our setup but they indicate that for example distance measurements between identical pairs of points in both mesh representations suddenly yield different values.

Pre-alignment by Global Features

As initial step and to approximate orientation and placement of optical surface models and volumetric data, per mesh analysis based on surface structure is performed. All efforts to compute a proper alignment of both data sets considering all vertices suffer from imbalanced complexity of models. Optical data represents surface structures in great detail but lacks information about the interior of the object. Computing the convex hull and minimal bounding box have proven to be very reliable for finding a relation between both representations solely on global features.

Final Alignment by Local Features

The registration algorithm is applied to the largest intersection of each mesh with its shrunk MBB. Figure [\ref=fig:input] shows typical input data for this operation. As seen in figures [\ref=fig:opticalFull] and [\ref=fig:ctFull] cuts with tight fitting minimal bounding box for our test object returns the bottom plane which is a ring shaped mounting with five screw pits. The MBB is an approximation and therefore results might vary from execution to execution, figure [\ref=fig:ctPartial] represents a cut with a not perfectly tight fitting MBB which returns a partial ring structure. In real world scenarios we often encounter this kind of imperfect data.

Iterative Closest Point

The ICP algorithm is generally used to minimize the root mean square (RMS) distance between two point clouds. However, it might converge in an erroneous local minimum, especially for noisy data. To ensure that the solution found by the ICP algorithm is a global minimum, a simulated annealing algorithm can be employed [\cite=Penney2001]. Our project utilizes an ICP algorithm from ITK [\cite=Yoo2002] framework with a Levenberg-Marquardt solver to register the meshes described in [\ref=cutPlanes]: Especially in the case of symmetric shapes ICP is easily trapped in local minima not representing the desired registration as shown in figure [\ref=icpFullFull]. Also aligning partial ring structures with full rings often returns faulty matches as shown in figure [\ref=icpFullPart] where neither the ring centers nor single screw pits match. Structures as shown in figure [\ref=fig:input] are common in machinery parts and therefore subject to quality inspection. ICP registration runs were performed on pre-aligned data as shown in figure [\ref=prealign] and on arbitrarily placed input meshes. Runtime is significantly shortened by pre-aligning data but still worse - also in terms of root mean square error - compared to our RANSAC approach.

RANdom SAmple and Consensus

In general, RANSAC schemes generate a random hypothesis to solve a given problem. This hypothesis needs to be evaluated and a quality measure is computed. If the quality measure exceeds a certain threshold the one hypothesis with the best evaluation is returned as solution for the given problem. If not the next hypothesis is generated and evaluated.

Our setups follows an approach as described in [\cite=Winkelbach2008] to find a suitable transformation from an optical data mesh to a CT data mesh. In one RANSAC iteration a random pair of points is chosen from the first mesh A. Characteristics of this pair such as the distance of points, the inclination of normal vectors and their rotation angle are computed. Now, the corresponding pair and characteristics are stored in a table of mesh A and the same characteristics are searched in the table of mesh B. In the next RANSAC iteration the pair is chosen from mesh B, characteristics are computed, stored in the table of mesh B and searched in the table of mesh A. Once a query returns successful, the respective point pairs sharing these characteristics are considered a hypothesis. Verification is done by computing a transformation from the pair of A to the pair of B and applying this transformation to various random points from mesh A. The more transformed random points have small distances to mesh B, the higher the confidence in the current hypothesis is. If the confidence value exceeds a threshold one can assume that the current hypothesis represents a valid registration of both meshes.

We favor this approach over ICP since it does not suffer from defects as shown in figure [\ref=icpRegistration]. Root mean square deviation (RMSD) minimization tends to shift the partial rings center of gravity towards the full rings center in figure [\ref=icpFullPart] which is not desired and can be observed in many similar scenarios. In addition it is possible to include previous knowledge in RANSAC hypothesis generation and verification.

Conclusions and Outlook

Registering two objects with completely represented surface turns out to be quite a challenge. One model holds significantly more data while the other model provides additional internal structures. Both models come from fundamentally different imaging techniques with different resolution. One holds color information while the other one has significantly varying measurement accuracy over the specimen. ICP suffers from mistakenly compensating interior CT data by shifting the model out of place. RANSAC generates not enough or faulty hypotheses due to mismatch in resolution. We will investigate other metrics to characterize point pairs and incorporate knowledge about accuracy variations in CT model to improve our registration. Once a successful registration is performed during the process of data fusion duplicated vertices will be unified and color information from optical scans are combined with volumetric model.