Towards a topological fingerprint of music

Introduction

Generally, the core of a piece of music consists of a small collection of strong, recognizable concepts, that are grasped by the majority of the listeners [\cite=dowling1972recognition] [\cite=folgieri2014eeg] [\cite=lara2015]. These core concepts are developed during the composition by varying levels of tension over time, drawing the attention of the listener to particular moments thanks to specific choices, frustrating his/her intuition through unexpected changes, or confirming his/her expectation with, for instance, a well-known cadence leading to resolution.

As the models for the analysis of audio signals take advantage of the strategies developed for image analysis [\cite=smaragdis2003non] [\cite=wang2003industrial] [\cite=li2010automatic], it is possible to borrow some tools from the topological analysis of shapes and data to tackle the problem of music analysis and classification. The main aim of this paper is the introduction of a low-dimensional geometric-topological model in order to describe, albeit in an extremely simplified form, music styles.

Loosely speaking, we introduce a metric representation of music as a planar polyhedral surface, whose vertices are then translated along a third dimension in basis on a specific function. The shapes obtained via these deformations are fingerprinted by computing their persistent homology [\cite=edelsbrunner2008persistent]. Afterwards, the musical meaning of this topological representation of music is discussed and applied to automatic style classification on three different datasets.

Background on persistent homology

In computational topology [\cite=EdHa09], persistent homology is actually considered an invaluable tool to describe both geometry and topology of a certain space, not only because of the simplicity of the method, but also because all the properties are ranked by importance, allowing us to choose the level of detail at which to perform such a description [\cite=edelsbrunner2008persistent] [\cite=FrLa99].

In more formal terms, given a topological space X, we define a continuous function [formula] to obtain a family of subspaces [formula], nested by inclusion, i.e. a filtration of X. The map f, called therefore a filtering function, is chosen according to the geometrical properties of interest (e.g., height, distance from center of mass, curvature). Applying homology to the filtration, births and deaths of topological features can be algebraically detected and their lifetime measured. The scale at which a feature is significant is measured by its longevity. Formally, given [formula], we consider the inclusion of Xu into Xv. This inclusion induces a homomorphism of homology groups Hk(Xu)  →  Hk(Xv) for every [formula]. The image of such a homomorphism consists of the k-homology classes that live at least from u to v along the filtration, and is called the kth persistent homology group of the pair (X,f) at (u,v). When, for every (u,v),u  ≤  v, the kth persistent homology groups are finitely generated, we can compactly describe them using the so-called persistence diagrams. A persistence diagram Dk(X,f) is the subset of [formula] consisting of points (called proper points) and vertical lines (called points at infinity) encoding the levels of f at which the birth or the death of homological classes occur, union all the points belonging to the diagonal u = v. In particular, if there exists at least one k-homology class that is born at the level ū and is dead at the level [formula] along the filtration induced by f, then p = (ū,) is a proper point of Dk(X,f); if there exists at least one k-homology class that is born at the level ū and never dies along the filtration induced by f, then p = (ū, +   ∞  ) is a point at infinity of Dk(X,f). A point at infinity is usually represented as the vertical line u = ū. Both points and lines are equipped with a multiplicity that depends on the number of classes with the same lifetime [\cite=FrLa01]. An example of persistence diagrams is displayed in  . The surface [formula] is endowed with the height function f. The associated persistence diagrams D0(X,f) and D1(X,f) are displayed on the right. D0(X,f) consists of one point at infinity r, whose abscissa u detects the absolute minimum of f, and one proper point p, whose abscissa and ordinate detect, respectively, the level at which the new connected component appears and merges with the existing one. D1(X,f) consists of one proper point, whose abscissa and ordinate detect, respectively, the level at which a new tunnel is created and disappears along the filtration.

One of the main reasons behind the usage of persistence diagrams in applications consists in the possibility of estimating the degree of dissimilarity of two spaces with respect to a certain geometrical property through an appropriate comparison of these shape descriptors. Because of its properties of optimality [\cite=dAFrLa] and stability [\cite=CoEdHa07], the most used instrument to compare persistence diagrams is given by the so called bottleneck distance (a.k.a. matching distance) [\cite=dAFrLabis].

The bottleneck distance between two persistence diagrams D and D' is defined as where σ varies among all the bijections between D and D' and for every [formula].

Musical setting

In order to safely introduce the main model presented in this paper, we start by defining some basic musical objects.

We model a note in equal tuning [formula] as a pair [formula], where p is called the pitch of the note, and d is its duration in seconds. In particular, if ν denotes the fundamental frequency of [formula], the pitch p(ν) is defined as [formula], where 440Hz is the fundamental frequency of the note A4 (the la of the fourth octave of the piano). For further details on pitches, see, e.g., [\cite=de2005pitch].

On a perceptual level, two notes an octave apart are really similar [\cite=burns1999intervals], thus, it is common to identify pitches modulo octave, by considering pitch classes [formula]. A representation of both the pitch and pitch-class spaces is depicted in .

The simplicial Tonnetz

The Tonnetz was originally introduced in [\cite=euler1774harmoniae] as a simple 3  ×  4 matrix representing both the acoustical and harmonic relationships among pitch classes. Later, it has been largely generalized to several formalisms, see, e.g., [\cite=cohn1997neo] [\cite=zabka2009generalized] [\cite=douthett1998parsimonious]. We will focus on its interpretation as a simplicial complex [\cite=bigo2013computation]. In this setting, the Tonnetz is modeled as an infinite planar simplicial complex, whose 0-simplices are labeled with pitch classes in a way that 1-simplices form either perfect fifth, major, or minor third intervals, and 2-simplices correspond to either major or minor triads. A finite subcomplex of the Tonnetz T is depicted in . We observe that the labels on its vertices are periodic with respect to the transposition of both minor and major third. This feature allows to work with the more comfortable toroidal representation [formula] displayed in .

It is possible to analyze and classify music by considering the subcomplexes of T generated by a sequence of pitch classes [\cite=bigo2013computation]. However, this approach does not allow to discriminate musical styles in a geometric or topological sense. In fact, as the example in  shows, two perceptively distinct sonorities can be represented by isomorphic subcomplexes.

A deformed Tonnetz for music analysis

In order to capture both the temporal and harmonic information encoded in a musical phrase, the vertices of the Tonnetz shall be displaced depending both on the pitch which is played and its duration.

Let V be the 0-skeleton of T and [formula] a finite collection of notes of a musical phrase. Assume that [formula] is the subset whose pitches [formula] belong to

[formula]

to the point [formula], where [formula], and then extend it linearly to all the simplices. The Tonnetz deformed under the action of this map will be denoted by T, and will be used as the main object of our topological description of music style. An example of deformation induced by a major triad played for 8 seconds is depicted in , while a 3-dimensional interactive animation showing how the Tonnetz is deformed by a musical phrase is available at .

A topological fingerprint of music styles

In order to describe the deformed Tonnetz, we use persistent homology.

We define the height function f on T to induce a lower level set filtration on the torus [formula]. The persistence diagrams obtained with this process are descriptors of the style characterizing the composition represented as a shape.

0th persistence diagrams. The connectedness of [formula] is retrieved by the presence of only one point at infinity. Let u  =  ū be its equation: ū is the absolute minimum of f on the deformed Tonnetz. If ū  ≈  0, then there exists at least one pitch-class set that does not have a relevant role in the composition, suggesting that it is based on a stable tonal or modal choice. On the contrary, if ū >  > 0, then all the pitch classes have been used in the composition for a relevant time. This configuration suits a more atonal or chromatic style. The presence of proper points is due to the existence of minima of the height function, that are subcomplexes of the Tonnetz not connected by an edge, and hence, representing a dissonant interval [\cite=plomp1965tonal]. Furthermore, the structure of the Tonnetz torus allows to retrieve a maximum of three connected components. To create this particular configuration, it is necessary to play a chromatic cluster: for instance, [formula], that is not usually used in a tonal or modal context.

1st persistence diagrams. The lifespan of 1-dimensional holes traversing the filtration provides symmetrical information with respect to the 0th persistence analysis. In this case, two points at infinity detect the two generators of the 1st homology group of the torus and, if there exists, proper points detect the presence of maxima of the height function, that are subcomplexes of the Tonnetz not connected by an edge.

As an example, we consider the persistence diagrams associated with Debussy's Arabesque, Jeux d'Eau by Ravel, and Klavierstück 1 by Schönberg, shown in . In the 0th persistence diagram describing Arabesque, there are no proper points. This is an evidence of the pentatonic and diatonic/modal inspiration of the composition [\cite=trezise2003cambridge]. We also observe that the entire chromatic scale has been used, since ū > 0. The abscissa of the point at infinity in the 0th persistence diagram of Jeux d'Eau is characterized by a high value, thus the entire set of pitch classes has been largely used in the composition. Moreover, the presence of a proper point highlights the ante-litteram use of the Petrushka chord, a superposition of a major triad and its tritone substitute: for instance, [formula]. Finally, the diagram associated with the Klavierstück 1 has two relevant proper points: this last feature points out the atonal nature of the composition.

The second row of  shows the 1st persistence diagrams associated with the same compositions. The tonal nature of Arabesque is highlighted by the a large distance between the points at infinity and the absence of proper points. The chromatic style of Jeux d'Eau implies the reduction of the distance between the two points at infinity. This last feature appears also in the diagram describing the Klavierstück 1, whose atonal tendency is stressed by a proper point representing the relevant lifespan of a third non-connected subcomplex.

Applications

In the following applications, we show how the persistence diagrams associated with a collection of compositions can effectively classify them according to their style. For k = 0,1, let [formula] be the set of kth persistence diagrams. Let M  =  mij = dB(Di,Dj), for [formula], be their distance matrix. The hierarchical clustering analysis [\cite=ott2009visualization] allows us to describe the configuration of the diagrams Di∈D with respect to the bottleneck distance. We will represent the organization of all their possible clusters as a dendrogram [\cite=langfelder2008defining] [\cite=martinez2010exploratory]. In this type of diagram, the abscissa of each splitting (vertical line) measures the distance between two clusters. Such distance is computed through elementary operations on the elements of M. Tonal and Atonal Music. We consider a dataset composed by nine pieces selected among the compositions by Beethoven, Debussy, Mozart, Ravel and Schönberg available at .

The clustering computed using the 0th persistence of these pieces is depicted in . Data are organized in two main clusters, that segregate the two first pieces of Schönberg's Drei Klavierstücke and Ravel's Jeux d'Eau, from the ones by Mozart, Beethoven and Debussy. The association between Klavierstück 2 and Jeux d'Eau mirrors the particular nature of this Schönberg's composition, that lies at the crossroad of tonal and atonal music, as it is proven by its disparate tonal interpretations [\cite=brinkmann2000arnold] [\cite=william1984harmony] [\cite=ogdon1981tonality]. The two movements of Mozart's KV311 form immediately a cluster reached at an increasing distance by the two first movements of the Sonata in C major by Beethoven. The third movement of Sonata in C major is grouped with Arabesque because both are characterized by a generous use of the pentatonic scale. Comparing three versions of All the Things You Are. The three interpretations are structured as follows:

Version 1 is played by a quartet in a standard way. Its main sections are a 3 / 4 introduction, a first exposition of the theme, and a 12 bars interlude introducing the last theme enriched by short improvisations.

Version 2 is performed by a piano solo, and it is characterized by a rich chromatic playing style of both hands. The main theme is executed twice.

Version 3 is performed by a duo (piano and bass). Its structure consists of an introduction, an exposition of the theme, and a piano improvisation.

The dataset is composed by the complete versions of the standard labeled as i_complete and a transposed version (i_complete_interval). Segments of each versions are included in the dataset and labeled as i_segment. In order to test the ability of the model to distinguish between a piece modulating in several tonalities, enriched with chromatic solos, and a non-structured sequence of pitches, a random version of each interpretation is also part of the dataset (i_random).

The resulting dendrogram is displayed in . We observe that the transposed versions have distance zero from the original ones, as an effect of the invariance of the filtration induced on the Tonnetz torus by the height function under uniform transposition. The randomized versions of the songs are well segregated. A small cluster groups the interlude of the first and the introduction of the third version, because both fragments share a very similar structure in terms of intervallic leaps and rhythm. Finally, in the top cluster, the two complete songs are linked to the fragment of the third version containing the theme. Hence, the 0th persistence homology retrieves the fragments containing the whole structure of the standard. This feature is surprising when taking into account the several modulations of the piece. Big Pop Clustering. shows a simplification of the clustering resulting by the comparison of the 1st persistence diagrams associated with 58 pop songs performed by 28 artists, spacing from Ray Charles to Lady Gaga. In order to give a simplified representation of this dendrogram, we considered only the three biggest clusters detected by the algorithm. On the left of each cluster, we listed the artists whose songs belong to that group. Names written in black bold characters indicate artists whose songs are entirely grouped in the cluster at their right, while red bold characters identify the three artists whose songs are spread among the three groups. We observe how the entire collection of songs by Ringo Starr, Paul McCartney and Simon & Garfunkel are grouped together in the blue cluster with Ray Charles, Stevie Wonder and George Benson. Moreover, the heterogeneity that characterizes Sting's compositions is mirrored by the presence of one of his songs in each cluster. The second and third clusters are less homogeneous, but promising, taking into account that so far each song is identified by a single persistence diagram.

Discussion and future works

We suggested a model describing music by taking into account the contribution of each pair (pitch class, duration) associated with the notes of a composition. The height function has been defined on the vertices the simplicial Tonnetz to induce a lower level set filtration on the Tonnetz torus. The 0th and 1st persistence diagrams associated with different musical pieces have been interpreted in musical terms and their bottleneck distance has been used to classify them hierarchically. The possible clusterings have been represented as dendrograms, showing that 0th and 1st persistence can be used to analyze and classify music.

The analysis and classification of music we performed has been realized by considering datasets composed by MIDI files. However, the extension of this model to audio files is straightforward. Given an audio signal, the chroma analysis [\cite=harte2005automatic] retrieves the contribution in time of each pitch class. Using a chromagram to define the height function, it would surely be affected by the noisy data coming form the signal. However, the stability of the persistence diagrams, when compared using the bottleneck distance, assures that a small perturbation of the function inducing the filtration corresponds to small variations of the persistence diagrams.

The model itself can be extended in several ways. For instance, it is possible to augment the dimensionality the simplicial Tonnetz. This would result in losing its property to be easily visualizable, but it would give the possibility to encode more information. This could be done by associating with each pitch class of the Tonnetz a velocity, or by adding information concerning whatever pitch-class related feature. Moreover, topological persistence offers further tools to improve the strategies we suggested. A natural development is the study of the multidimensional persistent homology [\cite=carlsson2009theory] [\cite=cerri2013betti] of musical spaces and their time-varying nature [\cite=Bergomi2015dynamical].