On consecutive happy numbers

Introduction

For an arbitrary positive integer n, let T(n) be the sum of the squares of 10-adic digits of n. That is, if we write [formula] with [formula], then [formula]. Also, let Tr denote the r-th iteration of T, i.e.,

[formula]

In particular, we set T0(n) = n. If T is iteratively applied to n, it is easy to see (cf. [\cite=Ho]) that we either get 1 or fall into a cycle

[formula]

We say that n is a happy number if we get 1 by applying T to n iteratively, i.e., Tr(n) = 1 for some positive integer r.

Obviously here squares and 10-adic digits are very specialized. In general, we may replace the square by an arbitrary positive e-th power, and replace the base 10 by an integer [formula]. Let Te,b(n) be the sum of the e-th powers of b-adic digits of n, i.e.,

[formula]

where [formula]. And n is called (e,b)-happy provided that there exists [formula] such that Tre,b(n) = 1. Observe that

[formula]

So if we iteratively apply Te,b to n, the process must reach some fixed points or cycles. And the fixed points and cycles of T2,b and T3,b ([formula]) have been listed in [\cite=GT].

In the second edition of his famous book [\cite=Gu], Guy asked whether there exists arbitrarily long sequences of consecutive (2,10)-happy numbers? For example, the least five consecutive (2,10)-happy numbers are

[formula]

In [\cite=ES], El-Sedy and Siksek gave an affirmative answer to Guy's question. As we will see soon, a key of El-Sedy and Siksek's proof is to find h > 0 such that h + x is (2,10)-happy for each x∈{1,4,16,20,37,42,58,89,145}.

However, El-Sedy and Siksek's result cannot be extended to every power e and base b. In fact, assume that p is a prime divisor of b - 1 and [formula]. Then by Fermat's little theorem

[formula]

that is, [formula] for every n. Hence now n is (e,b)-happy only if [formula]. In this paper, we shall show that the above examples are the only exceptions.

Let [formula] and [formula] be integers. Suppose that [formula] for any prime divisor p of b - 1. Then for arbitrary positive integer m, there exists l > 0 such that [formula] are all (e,b)-happy.

In view of Theorem [\ref=t1], we know that there exist arbitrarily long sequences of consecutive (2,b)-happy numbers if b is even. For example, the least nine consecutive (2,16)-happy numbers are

[formula]

However, there exists no pair of consecutive (2,12)-happy numbers less than 232 - 1 (the maximal value of unsigned long integers).

The proof of Theorem [\ref=t1] will be given in the next section.

Proof of Theorem [\ref=t1]

Let [formula] denote the set of all positive integers. Since 2 - 1 = 1|e - 1, below we always assume that b is even. And for convenience, we abbreviate '(e,b)-happy' to 'happy' since e and b are always fixed. The following lemma is motivated by El-Sedy and Siksek's proof in [\cite=ES].

Let x and m be an arbitrary non-negative integers. Then for any [formula], there exists a positive integer l such that

[formula]

for each [formula].

We make an induction on r. When r = 1, choose a positive integer s such that bs > m and let

[formula]

Clearly

[formula]

for any [formula].

Now assume r > 1 and the assertion of Lemma [\ref=l1] holds for the smaller values of r. Since [formula], there exists an m' satisfying that [formula] for all [formula]. Thus by the induction hypothesis, there exists an lr - 1 such that

[formula]

whenever [formula].

Let

[formula]

where s satisfies that bs > m. Then

[formula]

and for each [formula]

[formula]

Suppose that a subset De,b of positive integers satisfies that:

(1)  For any [formula], there exists [formula] such that Tre,b(n)∈De,b.

(2)  For any x∈De,b, T(x)∈De,b.

(3)  For any x∈De,b, there exists [formula] such that Tre,b(x) = x.

Then we say that De,b is a cycle set for Te,b. It is not difficult to see that De,b is finite and uniquely determined by e and b. For example, D2,10  =  {1,4,16,2037,42,58,89,145}.

Let De,b is the cycle set for Te,b. Assume that there exists [formula] such that h + x is happy for any x∈De,b. Then for arbitrary [formula], there exists [formula] such that [formula] are all happy.

By the definition of cycle sets, there exists [formula] such that Tre,b(y)∈D for all [formula]. Applying Lemma [\ref=l1], we can find an [formula] such that

[formula]

whenever [formula]. Thus by noting that x is happy if and only if Tre,b(x) is happy, we are done.

However, in general, it is not easy to search such h for De,b. With help of computers, when e = 2 and b = 10, El-Sedy and Siksek found such

[formula]

by noting that [formula] is happy for any x∈D2,10. Fortunately, the following lemma will reduce the requirement of h.

Let De,b is the cycle set for Te,b. Assume that for any x∈De,b, there exists [formula] such that both hx + 1 and hx + x are happy. Then there exists [formula] such that h + x is happy for each x∈De,b.

We shall prove that under the assumptions of Lemma [\ref=l2], for any subset S of De,b with 1∈S and [formula], there exists [formula] such that hS + x is happy for any x∈S.

The cases |S| = 2 are trivial. Assume that |S| > 2 and the assertion holds for any smaller value of |S|. For any [formula], since hx + 1 and hx + x are happy, there exists [formula] such that

[formula]

and

[formula]

by the definition of the cycle set. Let

[formula]

Then 1∈S*  ⊆  De,b and |S*| < |S|. Thus by the induction hypothesis, we can find [formula] such that hS* + Tre,b(hx + y) is happy for any y∈S. Also in view of Lemma [\ref=l1], there exists [formula] satisfying that

[formula]

provided that y∈S. It follows that (l + hx) + y is happy for any y∈S. All are done.

Suppose that for any integer a, there exists a happy number h such that

[formula]

Then for any [formula], there exists an arbitrarily large happy number l such that l + x is also happy.

Choose [formula] satisfying that bs > x and let x* = bs - x. Suppose that h is the happy number such that

[formula]

Note that hbφ((b - 1)e) is also happy and

[formula]

where φ is the Euler totient function. We may assume that h > Te,b(x*). Write h = (b - 1)ek + Te,b(x*). Let

[formula]

Then

[formula]

and

[formula]

It follows that both l and l + x are happy.

Let n be a positive odd integer. Then for any a with [formula] and positive integer k, there exists [formula] such that

[formula]

Assume that [formula] where [formula] are distinct odd primes and [formula]. For [formula], let gi be a prime root of pαiki. Assume that

[formula]

for each [formula]. Clearly both βi and γi are divisible by φ(pαii) since [formula]. So we only need to find r satisfying that

[formula]

for all i, or equivalently,

[formula]

Note that [formula] since [formula]. Thus such r always exists in view of the Chinese remainder theorem.

Assume that for any integer a, there exists a happy number h such that

[formula]

Then we can find a happy number h' such that

[formula]

Suppose that

[formula]

And suppose that

[formula]

In light of Lemma [\ref=l4], there exists [formula] such that

[formula]

Therefore

[formula]

which is apparently happy.

Let a be a positive integer. Assume that there exists a happy number h such that

[formula]

for some [formula]. Then we can find a happy number h such that

[formula]

In view of the proof of Lemma [\ref=l2], we may assume that l > Te,b(h'). And let

[formula]

where we choose s such that bs > h'. Clearly

[formula]

And

[formula]

Thus h is the desired happy number.

Note that the property of e is not used until now.

Write [formula] where [formula] are distinct odd primes and [formula] are positive integers. Let [formula] be a primitive root of pαii for [formula]. For every positive integer [formula], let [formula] be the integer such that

[formula]

And let [formula] be the minimal integer such that [formula], where Lr denotes r-th iteration of L. Since [formula], we have gei - gi is prime to pi for every i. Hence ra always exists.

Combining Corollary [\ref=c1], Lemma [\ref=l2], Lemma [\ref=l3] and Corollary [\ref=c2], now it suffices to show that for every integer [formula] there exists a happy number h such that

[formula]

We use an induction on ra. If ra = 0, then [formula]. There is noting to do. Now assume that [formula] and the assertion holds for any a' with ra' < ra. Clearly rL(a) = ra - 1. Hence by the induction hypothesis, there exists a happy number l such that

[formula]

Let [formula] be the integer such that

[formula]

And let

[formula]

Then

[formula]

And

[formula]

for every [formula]. Hence

[formula]

Thus in light of Lemma [\ref=l5], we are done.