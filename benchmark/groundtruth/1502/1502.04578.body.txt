The mso+u theory of [formula] is undecidable

Introduction

A celebrated result of Büchi is that the monadic second-order mso theory is decidable for the structure of natural numbers with order

[formula]

In other words, mso is decidable for infinite words. This paper shows that the decidability fails after mso is extended with the unbounding quantifier. The unbounding quantifier, denoted by

[formula]

says that φ(X) holds for arbitrarily large finite sets X. As usual with quantifiers, the formula φ(X) might have other free variables except for X. Call mso+u the extension of mso by this quantifier. The main contribution of the paper is the following theorem.

The mso+u theory of [formula] is undecidable.

Background.

The logic mso+u was introduced in [\cite=DBLP:conf/csl/Bojanczyk04], where it was shown that satisfiability is decidable for formulas on infinite trees where the [formula] quantifier is used once and not under the scope of set quantification. The decidability result from [\cite=DBLP:conf/csl/Bojanczyk04] straightforwardly entails decidability of the finite model problem for modal μ-calculus with backward modalities. A significantly more powerful fragment of the logic, albeit for infinite words, was shown decidable in [\cite=DBLP:conf/lics/BojanczykC06] using automata with counters. These automata where further developed into the theory of cost functions initiated by Colcombet in [\cite=DBLP:conf/icalp/Colcombet09]. The decidability result from [\cite=DBLP:conf/lics/BojanczykC06] straightforwardly entails decidability of the star height problem.

The difficulty of mso+u comes from the interaction between the unbounding quantifier and quantification over possibly infinite sets. This motivated the study of wmso+u, which is the variant of mso+u where set quantification is restricted to finite set. On infinite words, satisfiability of wmso+u is decidable, and the logic has an automaton model [\cite=DBLP:journals/mst/Bojanczyk11]. Similar results hold for infinite trees [\cite=DBLP:conf/stacs/BojanczykT12]. The results from [\cite=DBLP:conf/stacs/BojanczykT12] have been used to decide properties of ctl* [\cite=DBLP:conf/concur/CarapelleKL13]. Currently, the strongest decidability result in this line is about wmso+u on infinite trees extended with quantification over infinite paths [\cite=DBLP:conf/icalp/Bojanczyk14a]. The latter result entails decidability of problems such as the realisability problem for prompt ltl [\cite=KupfermanPitermanVardi09], deciding the winner in cost parity games [\cite=DBLP:conf/fsttcs/FijalkowZ12], or deciding certain properties of energy games [\cite=DBLP:conf/cav/BrazdilCKN12].

While the above results showed that fragments mso+u can be decidable, and can be used to prove results not directly related to the logic, it was not known if the full logic was decidable. The first evidence that mso+u can be too expressive was given in [\cite=DBLP:journals/fuin/HummelS12], where it was shown that mso+u can define languages of infinite words that are arbitrarily high in the projective hierarchy from descriptive set theory. This result was used in [\cite=DBLP:conf/icalp/BojanczykGMS14], where it was shown that, modulo a certain assumption from set theory (namely  v=l), the mso+u theory of the complete binary tree is undecidable. The result from [\cite=DBLP:conf/icalp/BojanczykGMS14] implies that there can be no algorithm which decides mso+u on the complete binary tree, and which has a correctness proof in the zfc axioms of set theory. This paper strengthens the result from [\cite=DBLP:conf/icalp/BojanczykGMS14] in two ways: first, we use no additional assumptions from set theory, and second, we prove undecidability for words and not trees.

Vector sequences

Define a number sequence to be an element of [formula], and define a vector sequence to be an element of [formula], i.e. an infinite sequence of vectors of natural numbers of possibly different dimensions. We write [formula] for vector sequences and f,g for number sequences. If f is a number sequence and [formula] is a vector sequence, then we write [formula] if for every position i, the i-th number in the sequence f appears in one of the coordinates of the i-th vector in the vector sequence [formula]. Number sequences are called asymptotically equivalent if they are bounded on the same sets of positions. A vector sequence [formula] is called an asymptotic mix of a vector sequence [formula] if every [formula] is asymptotically equivalent to some [formula]. A vector sequence of dimension d is one where all vectors have dimension d.

In the proofs below we use the following definition: two vector sequences are asymptotically equivalent if they have the same dimension d, and for each coordinate [formula] the corresponding number sequences are asymptotically equivalent.

Let [formula]. There exists a vector sequence of dimension d which is not an asymptotic mix of any vector sequence of dimension d - 1.

A vector sequence is said to have bounded dimension if there is some d such that all vectors in the sequence have dimension at most d. A vector sequence is said to tend to infinity if for every n, all but finitely many vectors in the sequence have all coordinates at least n. We order vector sequences coordintewise in the following way: we write [formula] if for every i, the i-th vectors in both sequences have the same dimension, and the i-th vector of [formula] is coordinstewise smaller or equal to the i-th vector of [formula]. A corollary of the above lemma is the following lemma, which characterises dimensions in terms only of boundedness properties.

Let [formula] be vector sequences of bounded dimensions which tend to infinity. Then following conditions are equivalent

on infinitely many positions [formula] has a vector of higher dimension than [formula];

there exists some [formula] which is not an asymptotic mix of any [formula].

Encoding a Minsky machine

We now use the results on vector sequences from the previous section to prove undecidability of mso+u. To do this, it will be convenient to view an infinite word as a sequence of finite trees of bounded depth, in the following sense. Consider a word

[formula]

which has infinitely many 1's. We view such a word as an infinite sequence of trees of depth n, denoted by [formula], as described in Figure [\ref=fig:word-to-tree].

The key to the undecidability proof is the following lemma, which says that, in a certain asymptotic sense, degrees can be compared for equality. Here the degree of a tree node is defined to be the number of its children.

There is an mso+u formula, which defines the set of words

[formula]

which have infinitely many 1's and such that [formula] has the following properties:

the degree of depth 2 nodes tends to infinity;

all but finitely many nodes of depth 1 have the same degree.

Minsky machines.

To prove undecidability, we reduce emptiness for Minsky machines to deciding mso+u. By a Minsky machine we mean a (possibly nondeterministic) device which has a finite state space, and two counters that can be incremented, decremented, and tested for zero. It is undecidable if a given Minsky machine has an accepting run, i.e. one which begins in a designated initial state with zero on both counters, and ends in a designated final state.

Let ρ be a finite run of a Minsky machine of length d. We say that a vector of natural numbers [formula] describes the run ρ if, for [formula], the numbers n2i - 1,n2i store the value of the two counters in the i-th configuration of ρ. Note that this description does not specify fully the run ρ, as the state information is missing. The following lemma contains the reduction of Minsky machine emptiness to satisfiability of mso+u.

For every Minsky machine, one can compute a formula of mso+u which defines the set of words

[formula]

which have infinitely many 1's and such that [formula] has the following properties, which are illustrated in Figure [\ref=fig:depth4]:

the degree of depth 3 nodes tends to infinity;

all but finitely many depth 1 nodes have the same degree d;

for every [formula], all but finitely many depth 2 nodes which are an i-th child have the same degree, call it ni;

[formula] describe some accepting run of the Minsky machine.

In particular, the formula computed in Lemma [\ref=lem:minsky] is satisfiable if and only if the Minsky machine has an accepting run. This yields undecidability of mso+u on infinite words, which is the same as our main Theorem [\ref=thm:main]. A corollary of the main theorem is undecidability of the logic mso+inf, which is a logic on profinite words defined in [\cite=DBLP:conf/icalp/Torunczyk12], because decidability of mso+u reduces to decidability of mso+inf.