Theorem Algorithm Notation Lemma Proposition Corollary Remark Definition Example Examples

The Combinatorics of [formula]-webs

Dongho Moon

Introduction

Combinatorial spiders can be used to describe the space of invariants of tensor products of irreducible representations for Lie algebras and their quantum analogues. Kuperberg [\cite=K] gave a description of the spiders for types [formula], [formula] using certain combinatorial graphs called webs. In this paper, we will focus on webs of type [formula].

An [formula]-web is a directed graph such that (1) vertices on a boundary line have degree one; (2) internal vertices are trivalent; and (3) each vertex is either a sink (all its edges are directed inward) or a source (all its edges are directed outward). A boundary vertex that is a sink corresponds to the natural three-dimensional module [formula] for [formula] or [formula] and carries a label "+  "; while a boundary vertex that is a source corresponds to the dual module [formula] and is labeled "-  ". An [formula]-web is said to be nonelliptic if each interior face is bounded by at least six edges.

Let [formula] be a partition of the integer d. The corresponding Young diagram is a left-justified array with λ1 boxes in the first row, λ2 boxes in the second row, and so forth. A standard tableau of shape λ is a filling of the Young diagram with d distinct positive integers in such a way that the entries in the boxes increase left to right across each row and from top to bottom down each column. Let [formula] be positive integers. A semistandard tableau of shape λ and type [formula] such that [formula] is a filling of the boxes of λ with a1 entries n1, a2 entries n2 etc., so that the entries in the boxes weakly increase left to right across the rows and strictly increase from top to bottom down each column. Petersen-Pylyavskyy-Rhoades [\cite=PPR] re-interpreted Kuperberg's result [\cite=K] on the dimension of the space of invariants (i.e. the number of [formula]-webs) in terms of semistandard tableaux of a particular shape and type.

Let γ be a fixed boundary with k "+  "s and 3n - 2k "-  "s. The number of semistandard tableaux of shape [formula] and type [formula] is equal to the number of nonelliptic [formula]-webs with boundary γ.

In [\cite=T], Tymoczko gave a bijective proof of Theorem [\ref=thm:prp] for the case k = 0 by exhibiting an explicit bijection between the set of standard tableaux of shape (3n) and the set of nonelliptic [formula]-webs which have 3n "-  "s on the boundary. Her approach introduces the notion of an [formula]-diagram. An [formula]-diagram on n vertices consists of a boundary line labeled with the numbers [formula], together with a collection of arcs drawn above it. For a given standard tableau [formula] of shape (3n), Tymoczko associates an [formula]-diagram to [formula] by the following algorithm:

If [formula], then [formula]. Starting with 5 in the bottom row, connect it to 4, and then connect 6 to 3. Moving to the second row, begin with 3 and connect it to 2, since 2 is the largest entry less than 3 in the first row. Finally, connect 4 and 1. The resulting [formula]-diagram associated to [formula] is

[formula]

The next step of Tymoczko's procedure is to replace vertices in the [formula]-diagram with certain configurations as pictured below.

[formula]

This is called trivalizing in [\cite=T], because vertices off the boundary become trivalent by this process. For Example [\ref=exam:first] above, the corresponding [formula]-web is

[formula]

In [\cite=Ru], Russell exhibited a bijection between the set of semistandard tableaux of shape [formula] and type [formula] and the nonelliptic [formula]-webs with one boundary line having k "-  " vertices and 3n - 2k "+  " vertices for arbitrary k such that 2k  ≤  3n. In this paper, we demonstrate an explicit bijection between the set of such semistandard tableaux and the nonelliptic [formula]-webs having k "+  " vertices on the top boundary line and 3n - 2k "-  " vertices on the bottom boundary line. Such webs combinatorially model the space [formula]. Several noteworthy special cases are when k = 0, which corresponds to the space [formula] of [formula]-invariants in [formula], and when n = k, which corresponds to the centralizer algebra [formula] of the [formula]-action on the tensor space [formula].

Our approach uses classical results from the representation theory of the symmetric group [formula] such as the well-known Robinson-Schensted correspondence (RS correspondence). That the representation theory of [formula] plays an essential role is no surprise, as [formula] is closely related with the representation theory and invariant theory of the general linear and special linear groups via Schur-Weyl duality. Another example of the connection with the RS correspondence can be found in [\cite=HRT].

The RS correspondence (see for example, [\cite=S] or [\cite=W]) is a bijection between permutations and ordered pairs of standard tableaux of the same shape, consisting of an insertion tableau and a recording tableau. Here, we reverse the order of the standard tableaux in the pair, so that a permutation σ corresponds to [formula], where [formula] is the recording tableau and [formula] is the insertion tableau. This switch is simply a notational convenience for when we show in what follows that the pair of standard tableaux constructed using the notion of path depth is the same as the pair [formula].

For example, suppose [formula]. The tableau [formula] is created by inserting the numbers 4  2  1  5  3 in succession, and [formula] is created by recording where the new box has been added to [formula] at each step. In the insertion process, a number x is adjoined to the right-hand end of first row of [formula] unless that violates the "standard" property. When a violation occurs, the smallest y in the row such that x  <  y is bumped to the next row, and x is placed in the position vacated by y. The insertion-bumping process then continues with y until a number is adjoined to the end of a row in the tableau. For σ, the steps to construct [formula] are as follows:

[formula]

In Section [\ref=sec:central], we review basic definitions related to [formula]-webs and their connections with centralizer algebras of the [formula]-action on tensor products. In Section [\ref=sec:bijection], we construct a map Φ from semistandard tableaux to [formula]-webs, and then prove in Section [\ref=sec:proof] that the webs are nonelliptic. The results on 3  2  1-avoiding permutations in Section [\ref=sec:combinatorics] are used in Section [\ref=sec:inverse] to show that Φ is indeed a bijection. In Section [\ref=sec:flow], we illustrate how Westbury's flow diagrams provide a different bijection, which avoids using the RS correspondence. We obtained this alternate bijection after submitting the first version of this paper, and thank Heather Russell for bringing [\cite=We] to our attention.

We note that the result on shuffle and join obtained in [\cite=Ru] as an application of Russell's bijection can be proved using our bijection also, although we do not include that proof here.

[formula]-webs and centralizer algebras

The [formula]-spider category introduced by Kuperberg in [\cite=K] describes the invariants of tensor products of copies of the natural 3-dimensional representation [formula] of the complex Lie algebra [formula] and its dual representation [formula]. A tensor product of copies of [formula] and [formula] corresponds to a string [formula] of symbols +   and -  , and we write [formula]. Let [formula] for all [formula] denote the space of [formula]-invariants in [formula].

The objects in the [formula]-spider category are finite strings of +   and -   signs, including the empty string. The morphisms of the [formula]-spider category are [formula]-webs. An [formula]-web is defined combinatorially as a directed graph with a boundary labeled by the sign string [formula] so that

vertices on the boundary have degree one and are labeled by the components of [formula] in a counterclockwise fashion;

internal vertices are trivalent; and

each vertex is either a sink (all its edges are directed inward) or a source (all its edges are directed outward).

Such an [formula]-web is said to be nonelliptic if each interior face is bounded by at least six edges. The following is an example of nonelliptic [formula]-web with boundary [formula]:

[formula]

No distinction is made between two diagrams that are the same up to rotation.

Let [formula] denote the set of nonelliptic [formula]-webs with boundary condition [formula]. The vector space of formal linear combinations of [formula] is the [formula]-web space [formula].

Assume [formula] is a sign string. Then the vector spaces [formula] and [formula] have the same dimensions.

Consider the special case that [formula] consists of k minuses followed by k pluses, so that [formula]. In this situation, [formula], since the [formula]-action on [formula] is given by (x.φ)(w)  =  x.φ(w)  -  φ(x.w).

The above theorem implies that we may label a basis of the centralizer algebra [formula] by nonelliptic [formula]-webs that have a bottom row of k minus signs and a top row of k plus signs. For example, [formula] is an element in [formula].

Multiplication of [formula]-webs is governed by the following rules:

(M1)   [formula]   [formula]   [formula].

For example,

[formula]

The product of [formula] and [formula] is computed by placing the first graph above the second and concatenating the diagrams using the rules above:

[formula]

The thick edge indicates the portion of the web to which the rule is applied.

The symmetric group [formula] acts on [formula] by permuting the tensor factors, and this action commutes with the action of [formula]. Classical Schur-Weyl duality says that there is an epimorphism [formula] and that the kernel of this map is the ideal generated by the Young symmetrizer [formula], where the sum is over the permutations σ of {1,2,3,4}.

The transpositions si  =  (i  i + 1) for [formula] generate [formula]. We let [formula] for 1  ≤  i  <  k, denote the image of [formula] in [formula]. Then, the elements [formula], generate [formula], and they satisfy the following relations:

[formula];

[formula]   if   |i  -  j|  >  1;

[formula]   for all   [formula];

[formula],  where  [formula]   for all   [formula].

Relation (R4) comes from the fact that if [formula] and gi  =  fifi + 1fi  -  fi in [formula], then [formula], as τ ranges over the permutations of i,i  +  1,i  +  2,i  +  3, and σ ranges over the permutations of {1,2,3,4}. Here ψ is the element of [formula] that interchanges [formula] and [formula] for [formula] and acts as the identity on the other values. The following relations can be deduced from (R1)-(R4):

[formula]   for all  [formula],  [formula];

[formula];

[formula];

[formula].

Each of the generators [formula] can be identified with a nonelliptic [formula]-web as shown below, and one can verify that the multiplication above corresponds to web multiplication.

[formula]

The following figure illustrates [formula] (equivalently, [formula]):

[formula]

A map between semistandard tableaux and nonelliptic [formula]-webs

A bijection between semistandard tableaux and standard tableaux

Let [formula] be a partition which sits inside the partition (nk) having k rows of n boxes each. The complementary partition [formula] also fits inside (nk) in the lower right-hand corner by rotating νc by 180 degrees.

There is a bijection φ between the set of semistandard tableaux of shape ν  ⊆  (nk) and type [formula] and the set of standard tableaux with entries [formula] and shape [formula].

For a semistandard tableau [formula] of shape ν with type [formula], the standard tableau [formula] is obtained by the following procedure: (i) place [formula] inside the rectangle of shape (nk); (ii) fill in the rest of the boxes in each column with the missing numbers in [formula] in ascending order from bottom to top; (iii) rotate the resulting tableau 180 degrees and then take its conjugate. For example, when n = 3, k  =  7, and

[formula]

we obtain

[formula]

so that

[formula]

which has shape [formula]. The map φ is clearly a bijection.

The theorem above has a number of applications; for example, it can be used to prove results about representations. We illustrate this with one quick example. Recall that the finite-dimensional irreducible representations [formula] of the complex special linear Lie algebra [formula] are indexed by partitions λ with at most k parts (i.e. k rows). The irreducible representations [formula] of the symmetric group [formula] are labeled by partitions μ of k and have a basis indexed by the standard tableaux of shape μ with entries [formula]. Now [formula] decomposes into weight spaces (common eigenspaces) relative to the diagonal matrices in [formula], and the weight space corresponding to [formula] (where εi projects a diagonal matrix onto its (i,i)-entry) has a basis indexed by the semistandard tableaux of shape λ and type [formula]. Because matrices in [formula] have zero trace, [formula] on [formula], and the weight 0 corresponds to the semistandard tableaux of type [formula], where each entry occurs with the same multiplicity. Thus, if 0 is a weight of [formula], then [formula] is a multiple of k. The converse holds as well, which can be seen by filling the boxes of [formula] with [formula] in order, starting with the first row of λ and moving left to right across the rows from top to bottom. In particular, if λ is a partition of (n - 1)k, for some n  ≥  2, and λ  ⊆  (nk), then λc is a partition of k. The zero weight space [formula] of [formula] has a basis indexed by the semistandard tableaux of type [formula]. Since the standard tableaux of shape [formula] are in one-to-one correspondence with the standard tableaux of shape λc, which give a basis for the irreducible [formula]-module [formula], we have the following consequence of the bijection in Theorem [\ref=thm:cute] under these assumptions:

[formula], where h(λc) is the product of the hook-lengths of the boxes in λc.

The last equality comes from the well-known hook-length formula that gives dimensions of the irreducible [formula]-modules (see e.g. [\cite=S]).

Semistandard tableaux and [formula]-webs

The bijection we define consists of a sequence of elementary steps, which we illustrate by a running example.

Step 0. Start with a semistandard tableau [formula] of shape (3n) and type [formula]:

for example, let k = 7,n = 8, and

[formula]

Step 1. Let [formula] be the subtableau of [formula] having the entries [formula], and let [formula] be the shape of [formula]:

[formula]

Step 2. Let [formula] be the standard tableau [formula] obtained from [formula] using Theorem [\ref=thm:cute]:

[formula]

Step 3. Let [formula] be the skew-subtableau of [formula] formed by the entries [formula]:

[formula]

Step 4. Replace each entry i of [formula] with [formula], rotate the result by 180 degrees, and take its conjugate to obtain a standard tableau [formula]:

[formula]

[formula] has shape [formula].

[formula] has shape [formula]

In our example, λ  =  (4,2,1) and μ  =  (5,3,2).

Step 5. Assign a pair [formula] to [formula] by the following procedure:

Let [formula] be the entries in the third row of [formula]. Do the following steps in order to create the tableaux [formula] and [formula]:

Place [formula] from left to right across the third row of [formula].

For [formula], let jp be the largest entry in the second row of [formula] less than [formula], such that jp is different from [formula] when p  >  1. Place [formula] in the second row of [formula] so that they are increasing from left to right across the row.

For [formula], let ip be the largest entry in the first row of [formula] less than jp, such that ip is different from [formula] when p  >  1. Place [formula] in the first row of [formula] so that they are increasing from left to right across the row.

Shift the remaining entries in each row of the tableau [formula] to the left to form the tableau [formula].

The shape of [formula] is (λ3,λ3,λ3), and the shape of [formula] is the two-rowed partition [formula].

[formula]

By its construction, [formula] is a standard tableau. To verify that [formula] is standard, it suffices to show that if a is the (1,s)-entry and b is the (2,t)-entry of [formula], and they are in the same column of [formula], then s  ≤  t. Assume the contrary, that s > t. Since a is immediately above b in the same column of [formula] and s  >  t, there must be a pair (ip,jp) from Step 5 above with ip to the left of a and jp to the right of b in [formula], such that a  <  jp. However, this contradicts the way ip was chosen in Step 5. So, we conclude that [formula] is a standard tableau.

Step 6. Perform (2) of Algorithm [\ref=alg:tym] with [formula] to get an [formula]-diagram [formula] and then trivalize the vertices to obtain an [formula]-web [formula] whose boundary has k "+  "s on the top:

[formula]

Step 7. Apply Step 5 to [formula], to obtain [formula] and [formula]:

[formula]

The shape of [formula] is (μ3,μ3,μ3) and of [formula] is (μ1  -  μ3,μ2  -  μ3) which is [formula]. Hence, [formula] and [formula] have the same shape.

Step 8. Apply Step 6 to [formula] to obtain an [formula]-diagram [formula] and an [formula]-web [formula] whose boundary has 3n - 2k "-  "s on the bottom:

[formula]

Step 9. If [formula] are the entries of [formula], and [formula] are the entries of [formula], replace each αi and each βi by i to produce a pair of standard tableaux with entries in [formula]. Then perform the inverse of the Robinson-Schensted correspondence on the pair to get a permutation σ in [formula]:

[formula]

[formula]

Step 10. For each [formula], connect vertex αi on the top row to vertex βσ(i) on bottom row (which we refer to as isolated vertices) according to the following rule:

The path from αi to βσ(i) should stay within the open region Ro between the two webs [formula] and [formula] and cross the smallest number of arcs in [formula] and [formula]. After these paths are drawn, let [formula] be the resulting diagram.

[formula]

In the example, [formula], so we connect the isolated vertex α1 = 1 on the top with the isolated vertex β3 = 4 on the bottom, α2 = 3 on the top with β1 = 1 on the bottom, α3 = 5 on the top with β2 = 2 on the bottom and α4 = 6 on the top with β4 = 9 on the bottom.

[formula]

Step 11. Trivalize the vertices as described in Section [\ref=sec:intro] to produce an [formula]-web [formula]:

[formula]

Our aim is to show the following:

The map [formula] is a bijection between the set of semistandard tableaux [formula] of shape (3n) and type [formula] and the set of nonelliptic [formula]-webs with k "+  "s on the top boundary and 3n - 2k "-  "s on the bottom boundary.

We close this section with some comments and a result we will use later.

Recall that a permutation [formula] is 3  2  1-avoiding if there do not exist [formula] such that σ(c)  <  σ(b)  <  σ(a). It is well known that the RS correspondence gives a bijection between the set of 3  2  1-avoiding permutations in [formula] and the set of pairs of tableaux of shape λ for some partition λ of [formula], whose length is less than or equal to 2 (see for example, [\cite=Wi]). Because the tableaux [formula] and [formula] above are of the same shape and have at most 2 rows, the permutation obtained in Step 9 will be 3  2  1-avoiding. The steps above construct an [formula]-web having k "+  "s on the top boundary and 3n - 2k "-  "s on the bottom boundary. The top and bottom boundaries have the same number of isolated vertices, and the 3  2  1-avoiding permutation σ prescribes how to connect the isolated vertices on the top boundary to those on the bottom boundary. Therefore, we have the following corollary:

Assume [formula] is a semistandard tableau as in Theorem [\ref=thm:main]. Then Steps 1-10 above associate to [formula] a triple [formula], where [formula] is an [formula]-diagram with k "+  "s on the top boundary, [formula] is an [formula]-diagram with 3n - 2k "-  "s on the bottom boundary, and σ is a 3  2  1-avoiding permutation.

The notions of circle depth and path depth from [\cite=T] will enable us to prove Theorem [\ref=thm:main]. The faces (regions) determined by an [formula]-diagram [formula] and its trivalization [formula] are the same.

Suppose [formula] is an [formula]-diagram that lies above a horizontal boundary line, and let [formula] be its trivalization. Let x be a point lying on a face of [formula] (or [formula]).

The circle depth of x, denoted [formula], is the number of semicircles in [formula] that lie above x.

The path depth of x, denoted [formula], is the minimal number of edges in [formula] crossed by any path from x to the unbounded region f∞ that lies above the boundary line.

In particular, any point in f∞ has circle depth and path depth equal to 0.

The following result can be found in [\cite=T].

Let [formula] be a standard tableau of shape (3n), and let [formula] be the [formula]-diagram and [formula] the [formula]-web corresponding to [formula] by Algorithm [\ref=alg:tym]. Then, for a point x in a face of [formula] (or [formula]), the path depth and the circle depth of x agree.

In the following example, the numbers indicate path (circle) depths, which are the same for all interior points in a given face.

[formula]

Because of this result, the only time we will need to make a distinction between an [formula]-diagram and its trivalization is when we show the nonelliptic property.

[formula] is a nonelliptic [formula]-web

We fix two positive integers k and n such that 2k  ≤  3n for all arguments in what follows. Let [formula] be a semistandard tableau of shape (3n) and type [formula], and assume [formula] is the [formula]-web obtained by applying the algorithm given in the previous section. Although the process certainly defines an [formula]-web, it is not readily apparent that [formula] is nonelliptic. We give a proof that [formula] is nonelliptic in this section.

We will use the notation from the steps in Section [\ref=sec:bijection] that created [formula]. In particular, [formula] and [formula] are the [formula]-diagrams produced from 3-rowed standard tableaux in Steps 6 and 8, respectively.

In Algorithm [\ref=alg:tym], an entry [formula] in the third row of a tableau is connected to an entry j in the second row, and j is connected to an entry i in the first row. We refer to the union of the arcs connecting [formula] with j and j with i as an [formula]-configuration. Thus, the [formula]-diagrams considered here are collections of [formula]-configurations.

If [formula] and [formula] are two [formula]-configurations in an [formula]-diagram obtained from a standard tableau with three rows, then there are only five possible relative positions for [formula] and [formula] as depicted in the following:

[formula]

[formula]

[formula]

[formula]

[formula]

There are five standard tableaux of shape (23), and each standard tableau corresponds to one of the relative positions of two [formula]-configurations.

Any [formula]-configuration [formula] consists of a left and a right arc (semicircle), which we denote [formula] and [formula]. Now assume [formula] and [formula] are the tableaux constructed in Steps 2 and 4 and [formula] and [formula] are the corresponding [formula]-diagrams from Steps 6 and 8, respectively.

Assume v is an isolated vertex in [formula] (resp. in [formula]), and v has label a. Let [formula] be an [formula]-configuration in [formula] (resp. in [formula]). If v is in [formula], then a lies in the first row of [formula] (resp. of [formula]). If v is in [formula], then a lies in the second row of [formula] (resp. of [formula]).

Assume [formula] has vertices labeled [formula]. Since v is an isolated vertex, a lies in either the first or second row of [formula]. If v is in [formula], then a is greater than j, so it must lie in the first row of [formula] by the way j was chosen. Similarly, if v is in [formula], then a is greater than i and less than j, so it must lie in the second row of [formula] by the way i was chosen.

Let v be an isolated vertex in [formula] (resp. in [formula]), then it is impossible for v to be in both [formula] and [formula] for two [formula]-configurations [formula] and [formula] of [formula] (resp. of [formula]).

There exists a unique shortest path from an isolated vertex v on the bottom boundary to the unbounded region Ro of [formula].

Due to Proposition [\ref=depth], there exists a shortest path from v to Ro, and such a path is determined by the circle depth of v. The path moves from one face of [formula] to another so that the circle depth is strictly decreased. Therefore, if there is only one choice of direction for moving, the shortest path must be unique. There is only one choice by Corollary [\ref=lemma:LR], because there can be no isolated vertices in the shaded regions of figures IV and V of Lemma [\ref=lemma:relative], since those regions lie inside both a right semicircle and a left semicircle.

Recall from Step 9 in Section [\ref=sec:bijection] that [formula] are the labels of the isolated vertices in [formula], [formula] are the labels of the isolated vertices in [formula], and σ is a 3  2  1-avoiding permutation on [formula]. Let [formula] and [formula] be order-preserving bijections.

Let v1 and v2 be two isolated vertices labeled by a and b respectively, where a < b. If v1 and v2 satisfy either of the following conditions,

v1 and v2 are contained in a semicircle in [formula] (resp. [formula]),

v1 is inside [formula] and v2 is inside [formula] for some [formula]-configurations [formula] and [formula] of [formula] (resp. [formula]),

then [formula] (resp. [formula]).

For both (i) and (ii), we present the proof only for the case [formula].

(i) Assume v1 and v2 lie inside one semicircle. Then they are in either [formula] or [formula] of an [formula]-configuration of [formula]. Therefore, a and b must be on the same row of [formula].

Suppose that a and b are in the second row of [formula], and suppose on the contrary that [formula]. Consider the RS correspondence applied to [formula]. Since a is in the second row of [formula], there is a bump when we insert [formula]. So there exists an x with [formula], [formula]. Thus, we have [formula] and [formula]. This contradicts the fact that σ is 3  2  1-avoiding.

Suppose that a and b are in the first row of [formula], that is, v1 and v2 are in the right semicircle [formula]. Let i < j < k be the three vertex labels of [formula], so that j < a < b < k. We again assume that [formula]. Note that, when we insert [formula], there is no bump, since a is in the first row of [formula]. Then, since b is in the first row, there is no bump when we insert [formula] also. But [formula]. Hence, [formula] must be bumped down to second row before inserting [formula]. Therefore, there exists x with [formula] and [formula] is in the second row of [formula]. This is impossible by the way j was chosen since j  <  x < k.

(ii) If v1 is inside [formula] and v2 is inside [formula], then a is in the second row of [formula] and b is in the first row of [formula]. Suppose on the contrary that [formula]. Since a is in the second row, there is a bump when we insert [formula] while applying the RS correspondence to σ. So there exists an x with [formula] and [formula]. Then, [formula] and [formula]. This contradicts the 3  2  1-avoiding property of σ.

Let R be a bounded region in [formula], where [formula] is as in Step 10 of Section [\ref=sec:bijection]. Suppose that there is a point of crossing (which has not yet been trivalized) on the boundary of R such that a directed edge on the boundary is moving toward the point, and the other directed edge on the boundary is moving away from the point. Then when we trivalize the crossing, there will be one more boundary edge added to the boundary of R.

This is clear from the definition of trivalizing:

[formula]

The following proposition completes the proof that [formula] in Theorem [\ref=thm:main] is a nonelliptic [formula]-web.

For a semistandard tableau [formula] of shape (3n) and type [formula], the [formula]-web [formula] is nonelliptic.

Let R be a bounded, internal region of [formula], and let Ro be the open region between the [formula]-webs [formula] and [formula] of [formula], as in Step 10 of Section [\ref=sec:bijection]. After trivalization has taken place, internal regions are bounded by an even number of edges, since sink and source vertices alternate along the boundary of internal faces. Hence, if R has more than four boundary edges in [formula], then after trivalization, R is bounded by at least six edges. So we may restrict our attention to the case that R is bounded by either three or four edges. We know from the work of Tymoczko [\cite=T], that [formula] and [formula] (as [formula]-webs) have no internal regions with four edges. Therefore, we may suppose that R has at least one edge coming from a vertical line. At this juncture, we break our considerations into several cases.

"Case 1: " R is not contained in Ro

We treat only the [formula] case, since every argument can be translated to [formula] by reversing the arrows on the directed edges.

Since there are no crossings between vertical lines outside Ro, there must be a part of the vertical line passing two semicircular arcs of [formula]; let them be [formula] and [formula] so that the vertical line passes [formula] first in going from bottom to top, where [formula] is either [formula] or [formula]. By Corollary [\ref=lemma:LR] and Lemma [\ref=lemma:relative], we see that [formula] and [formula] do not intersect each other.

[formula]

Hence, there must be another arc (part of a vertical line or a semicircle). Since the direction of every arc in [formula] is upward, before trivalization there will be at least one point (of crossing) such that one edge on the boundary of R is moving from the point while the other is toward the point. This crossing point is indicated by [formula] in the illustrations above. Therefore, as in [\eqref=eq:addaline], at least one more boundary edge will be added to R upon trivalizing, so there will be at least six edges on the boundary of R in [formula].

"Case 2: " R is contained in Ro.

3  2  1-avoiding permutations

In Section [\ref=sec:inverse], we will use the path depth of Definition [\ref=def:circle] to create a pair of standard tableaux from an [formula]-web, and this will enable us to show that the map Φ in Section [\ref=sec:bijection] is a bijection. The algorithm that constructed the [formula]-web [formula] from a semistandard tableau [formula] produced a 3  2  1-avoiding permutation via the RS correspondence in Step 9. In this section, we construct a pair of standard tableaux from a 3  2  1-avoiding permutation using the path depth of a permutation and show that this pair is exactly the same as the one coming from the RS correspondence.

The 3  2  1-avoiding permutations in [formula] and the Temperley-Lieb diagrams with [formula] vertices are both counted by the Catalan number [formula] (see for example, [\cite=St]). In Remark [\ref=rem:tlbijection], we show how the considerations here give a direct bijection between the set of 3  2  1-avoiding permutations and the set of Temperley-Lieb diagrams. Bijections using the reduced expressions for Temperley-Lieb diagrams as words in the generators are known and can be found for example in [\cite=BJS].

For the remainder of the section, we assume that [formula] is a 3  2  1-avoiding permutation.

Assume [formula].

If σ(s)  ≥  s and σ(t)  ≥  t, then σ(s)  <  σ(t).

If σ(s)  ≤  s and σ(t)  ≤  t, then σ(s)  <  σ(t).

If σ(s) = s, then σ(i) < s for all i < s and σ(j) > s for all j > s.

For (i), assume the contrary that σ(s)  >  σ(t)  ≥  t. If for all i > t, σ(i)  >  σ(t), then σ(i) > t since σ(t)  ≥  t. Then σ is not bijective, since σ(s)  >  σ(t)  ≥  t and s < t. Thus, for some i > t  >  s, we have σ(i)  <  σ(t)  <  σ(s), which contradicts the fact that σ is 3  2  1-avoiding. Part (ii) can be done by a similar argument, and (iii) follows from (i) and (ii).

We associate to σ a diagram with vertices numbered [formula] from left to right on the top and on the bottom boundary lines, and with vertex i on top connected to vertex σ(i) on the bottom by a vertical line. The vertical lines divide the region between the top and bottom boundaries into faces. Next we introduce an analog of the path depth given in Definition [\ref=def:circle] for the diagram of σ.

Let f∞ be the unbounded face open to left of the diagram of σ. For any point x in the interior of a face of the diagram, the path depth of x, denoted [formula], is the minimal number of edges crossed by any path from x to f∞ that does not intersect the top or bottom boundaries.

Note that when a path from x to f∞ crosses horizontally at the intersection of two lines in the diagram, it is counted as a single edge crossing. All points in the interior of a face f have the same path depth, so we set [formula] for any point x in f.

For a 3  2  1-avoiding permutation σ, we define the path depth difference δσ(v) of a boundary vertex v to be

[formula]

where flv is the face to the left of v and frv is the face to the right of v. In [\eqref=eq:depthconf] below, we will show that δσ(v) is always either 0 and 1 for every boundary vertex v.

For [formula], the path depths of the internal faces are displayed here. Also when δσ(v)  =  1 (resp. = 0) for a boundary vertex v we write δσ  =  1 (resp. δσ  =  0).

[formula]

To distinguish the top and bottom vertices, we denote the ith vertex on the top (resp. bottom) boundary of the diagram of σ by ti (resp. bi). Using the values δσ(ti) and δσ(bi), we create standard tableaux [formula] and [formula] of at most two rows by assigning the position of i as follows:

For [formula],

put i in the first row of [formula] (of [formula]) if δσ(ti) = 1 (if δσ(bi) = 1);

put i in the second row of [formula] (of [formula]) if δσ(ti) = 0 (if δσ(bi) = 0);

let [formula].

Now we assume σ corresponds to a pair of standard tableaux [formula] by the RS correspondence, where [formula] is the recording tableau and [formula] is the insertion tableau. Note that the permutation σ in Example [\ref=exam:perm] corresponds to [formula] by the RS correspondence.

The following is the main theorem of this section, which we prove after a sequence of results.

Let σ be a 3  2  1-avoiding permutation, and assume [formula] as in Definition [\ref=def:inverse]. Suppose σ corresponds to [formula] under the RS correspondence. Then [formula] and [formula].

Let L, F,R be the subsets of all [formula] such that

[formula]

If [formula] (or if [formula]) with r < s, then σ(r)  <  σ(s).

If [formula], then s is in the first row of the recording tableau [formula] of σ.

Part (i) is a consequence of Lemma [\ref=lem:s5l1]. For (ii), let [formula] and i < s. If [formula], then we have σ(i)  <  σ(s) by (i). If i∈L, then σ(i) < i < s < σ(s). Hence for any i < s, we have σ(i) < σ(s). So in the Robinson-Schensted procedure, we adjoin σ(s) to the end of the first row of the insertion tableau, and therefore, s is in the first row of recording tableau.

For an intersection of lines in the diagram of σ, the path depths of the faces around the crossing must be as in one of the following configurations:

[formula]

Note that the vertices a,b,c,d in these pictures represent either a vertex on a boundary or a crossing point of two vertical lines. If a is a vertex on the top boundary, then the second configuration is not possible, since the shortest path from a point in fra to f∞ must cross an edge to get to fla as shown below. Likewise, if c is a bottom vertex, then the third configuration is impossible.

[formula]

If [formula], then δσ(ts) = 1.

If s∈L, then δσ(bσ(s)) = 1.

If s∈F, then δσ(bσ(s)) = δσ(bs)  =  1.

Only the first and third configurations in [\eqref=eq:depthconf] can occur when a  =  s on the top boundary of the diagram of σ, so (i) is apparent. Similarly, if c  =  σ(s) for some s∈L, then only the first two configurations are possible and we have (ii). Part (iii) is clear.

We have seen in Lemma [\ref=lem:s5rs] that each [formula] lies in the first row of the recording tableau [formula]. To determine conditions for s∈L to lie in the first row of [formula] will require some additional concepts.

Assume s∈L and start moving along the edge from vertex ts on top. Whenever we reach a crossing, we make one of the following allowable turns:

[formula]

We keep traveling until we arrive at a vertex on the top or bottom boundary and then stop. The following illustrates what happens in Example [\ref=exam:perm].

[formula]

Let ε(ts) be the number of turns we made to arrive at a vertex in top or bottom starting from ts. The following lemma is clear.

For s∈L, starting from vertex ts, we arrive at a vertex tr in the top if and only if ε(ts) is odd, and in this case, r∈R. We arrive at a vertex br in the bottom if and only if ε(ts) is even, and in this case, σ- 1(r)∈L.

As we traverse an edge, there are faces f1 and f2 on the two sides of that edge. The absolute value of the difference |dσ(f1) - dσ(f2)| is either 0 or 1 by ([\ref=eq:depthconf]). When the edge is connected to a vertex v on either the top or bottom boundary, the path depth difference equals δσ(v). The differences switch back and forth between 0 and 1 as we make a turn (see [\eqref=eq:depthconf] and [\eqref=eq:alloedturns]).

Therefore, starting from vertex ts, s∈L, if we make an odd number of turns and arrive at vertex tr, r∈R, then δσ(ts) and δσ(tr) are different. If instead we make an even number of turns and arrive at vertex br, then σ- 1(r)∈L, and δσ(ts)  =  δσ(br).

Now from Lemma [\ref=lem:ellcond1], we have the following corollary.

For s∈L, when we start from the vertex ts, we end at a vertex on the top if and only if δσ(ts) = 0.

Let s∈L. Assume s is in the second row of the recording tableau [formula]. Hence, σ(r) is bumped out of the first row of [formula] by σ(s)  <  σ(r) for some r < s while applying the Robinson-Schensted process. And by Lemma [\ref=lem:s5l1], r∈R. Note any σ(r) can be bumped out at most once. Thus, each s∈L in the second row of [formula] is paired with a unique r∈R with r < s such that σ(r)  >  σ(s). We call such a pair (r,s) an RS pair.

For

[formula]

the crossings in the diagram of σ made by the RS pairs are indicated by squares in the following example.

[formula]

Recall σ corresponds to [formula].

Assume s∈L, and there is an RS pair (r,s). We will show that a Turn II is always followed by a Turn I during the trip starting from ts, and hence δσ(ts)  =  0 by Corollary [\ref=C:delsig]. The following illustrates the possibilities that occur when a Turn II occurs.

[formula]

In either case, since r < s' < s and s' is not paired with r, there must be an r' such that r' < r,  r'∈R,   (r',s') is an RS pair, and a Turn I follows:

[formula]

We repeat this procedure until we arrive at a vertex on the top boundary in this case.

On the other hand, assume that s∈L and s is in the first row of the recording tableau [formula], i.e., there is no RS pair of s. We show that if a Turn I happens, then always a Turn II follows during the trip starting from ts, and hence δσ(ts)  =  1 by Corollary [\ref=C:delsig]. In order for a turn to occur, the line traveled is crossed by a line starting from a vertex tr with r∈R, r < s, and σ(r)  >  σ(s). Since s is not paired, r must be paired with another s'∈L with r < s' < s. If there is no s''∈L such that s' < s'' < s, then we make a Turn II when the line from ts' crosses the line from tr.

[formula]

If there is s''∈L such that s' < s'' < s, then we make a Turn II at the crossing of the line from ts'' with the line from tr. If s'' is paired with a r'∈R, then r' > r since s' < s'' is paired with r.

[formula]

Then, the line from tr' must meet with the line from ts, and we get a contradiction, since we made a turn at the crossing of the line from tr and the line from ts. Hence, s'' is not part of an RS pair, and we make a turn at the crossing of the line from tr and the line from ts''.

[formula]

We continue this procedure until we arrive at a vertex on the bottom boundary in this case.

We now have the following result, which summarizes the relationship we have determined between the path depth differences and the positions in the recording tableau [formula] of σ.

Assume [formula] is the recording tableau of σ and L is as in Definition [\ref=def:LRFsets].

If [formula], then δσ(ts) = 1 and s is in the first row of [formula].

If s∈L and δσ(ts) = 1, then s is in the first row of [formula].

If s∈L and δσ(ts) = 0, then s is in the second row of [formula].

Now we are ready to prove the main theorem in this section.

(Proof of Theorem [\ref=thm:RSpairs]). From a 3  2  1-avoiding permutation σ, we obtained a pair of standard tableaux [formula] using the path depth differences in Definition [\ref=def:inverse] and a pair of standard tableaux [formula] by the RS correspondence. Lemma [\ref=lem:c2c2] shows that [formula]. Since [formula] and σ- 1 corresponds to [formula], we have [formula].

Starting a trip from ts, s∈L, we only need Turn I and Turn II. However, beginning the trip from any vertex on the top (or bottom), also requires using the following turns.

[formula]

Connecting the initial and terminal vertices of each path traveled results in a planar diagram (no edges cross) with each of the [formula] vertices connected to a unique vertex. This determines a bijection between the set of 3  2  1-avoiding permutations and Temperley-Lieb diagrams. In particular, Example [\ref=exam:perm] gives

[formula]

hence, the following Temperley-Lieb diagram

[formula]

Φ is bijective

In Section [\ref=sec:bijection], we constructed a map Φ from the set of semistandard tableaux of shape (3n) and type [formula] to the set of nonelliptic [formula]-webs with a boundary of k pluses on the top and a boundary of 3n - 2k minuses on the bottom. In this section, we show that Φ is a bijection by using Khovanov-Kuperberg's definition (Definition [\ref=def:circle]) of path depth.

We connect the rightmost vertex on the top boundary of an [formula]-web to the rightmost vertex on the bottom boundary to form one boundary line, and consider the unbounded region of the web that opens to left as f∞. Then, we assign a path depth as in Definition [\ref=def:circle] from each internal face of the web to f∞. We will use this web path depth to construct two standard tableaux from the web, providing the inverse of Φ. This is analogous to what we did in Section [\ref=sec:combinatorics], where we used the path depth of a 3  2  1-avoiding permutation to construct two standard tableaux that were exactly the same tableaux produced from the inverse of the RS correspondence by Theorem [\ref=thm:RSpairs].

Recall from [\eqref=eq:ell] that δσ(v) is the path depth difference for a boundary vertex v of a 3  2  1-avoiding permutation σ, and δσ(v)  =  0 or 1 (see [\eqref=eq:depthconf]). In an analogous manner, we define δ(v) for a boundary vertex of a nonelliptic [formula]-web. The only difference is that δ(v) may have values 0,1 and - 1. (We will see below that δ(v) has only these values.) Using the values δ(ti) and δ(bi), we create two standard tableaux [formula] and [formula] of at most three rows by inserting i as follows:

put i on the first row of [formula] (of [formula]) if δ(ti) = 1 (resp. if δ(bi) = 1);

put i on the second row of [formula] (of [formula]) if δ(ti) = 0 (resp. if δ(bi) = 0);

put i on the third row of [formula] (of [formula]) if δ(ti) =  - 1 (resp. if δ(bi) =  - 1).

Note that this is an extension of Definition [\ref=def:inverse]. From [\cite=K] and [\cite=PPR], we know that the set of semistandard tableaux of shape (3n) and type [formula] and set of nonelliptic [formula]-webs with k pluses on the top boundary and 3n - 2k minuses on the bottom boundary have the same cardinalities. Hence, to show that Φ is bijective, it is enough to prove that Φ is injective, which amounts to showing that we can recover [formula] from [formula]. Observe that if we can recover [formula] and [formula], then getting [formula] is straightforward by applying φ- 1 (for φ as given in Theorem [\ref=thm:cute]), adjusting entries, rotating tableaux and joining them together. So, we will only show that we can determine [formula] and [formula] from [formula] using the path depth differences δ(v).

We start by noting that path depth differences δ(v) of boundary vertices v on [formula] are same as those on [formula] given in Step 10 of Section. The diagram [formula] is formed by the diagrams of the two webs [formula] and [formula] and the diagram of a 3  2  1-avoiding permutation σ on the isolated vertices.

Let v be an isolated vertex on the top boundary of [formula] and consider its path depth difference δσ(v) as a vertex in the diagram of the permutation σ as in Section [\ref=sec:combinatorics]. (An isolated vertex on the bottom boundary can be treated by a similar argument.) Corollary [\ref=lemma:LR] implies that only the following two configurations can occur when an [formula]-configuration is added to the diagram of σ. The value of the difference does not change by the addition of the [formula]-configuration; hence δ(v)  =  δσ(v) for isolated vertices. This implies that [formula] and [formula] can be recovered by Theorem [\ref=thm:RSpairs] from the path depth δ(v) of the isolated vertices:

[formula]

[formula]

(Path depths are indicated as a, a + 1, or a + 2.)

Now assume that we have an [formula]-configuration in [formula] (or [formula]). Adding a vertical line connecting an isolated vertex on the top boundary with an isolated vertex on bottom boundary to the [formula]-configuration results in no change to δ(v) for a vertex v in the [formula]-configuration, since the shortest path from frv and flv to f∞ either will cross the vertical line if v is to the right of the line or will not cross the vertical line if v is to the left of the line. Hence, the path depth difference of a vertex in [formula] (resp. [formula]) is the same as it is in [formula]. Thus, by Tymoczko's result (see Proposition [\ref=depth]), the path depths in [formula] and the circle depths in [formula] are the same (resp. of [formula] and of [formula] are the same). Then we can recover [formula] from [formula] ([formula] from [formula]) by δ(ti) = 1,0, - 1 (or δ(bi) = 1,0, - 1) if and only if i in the first, second or third row of [formula] (or [formula]), respectively.

Once [formula] and [formula] are determined, then [formula] can be obtained by putting i in row r of [formula] if and only if i is in row r of [formula] or [formula]. Similarly, we can recover [formula] from [formula] and [formula].

In summary, we uniquely determined [formula] from [formula] using δ(v), and hence Φ is injective (and bijective, too).

The following is our example from Section [\ref=sec:bijection]. The path depths are indicated on [formula] and [formula].

[formula]

Then, using the path depths, we recover the standard tableaux

[formula]

Connections with Westbury's flow diagrams

The algorithm in Section [\ref=sec:bijection] produces an [formula]-web from a pair [formula] of standard tableaux obtained from a semistandard tableau [formula]. Westbury [\cite=We] has given an alternative to [formula]-webs connected with [formula] using flow diagrams in triangular shapes. In this final section, we describe how to obtain an [formula] flow diagram from such a pair [formula] of standard tableaux. The results described here for [formula] can be extended to [formula] for arbitrary r, and more details on this will appear elsewhere. Our aim here is to describe the relationship between the results of the previous sections to the flow diagram approach.

First, we briefly review Westbury's result. To [formula], we associate two equilateral triangles whose sides are one unit in length:

[formula]

For compatibility with the conventions in previous sections, our arrows are the reverse of what is in [\cite=We], so they go from -   to +   rather than from +   to -  . The edge labels 0 and r are omitted in the diagrams, and the triangles associated to 1, - 1,r, - r are

[formula]

Now to each pair (s,t), [formula], we associate a rhombus such that when st  ≠  0,

[formula]

If t = 0 or s = 0, the corresponding rhombi are

[formula]

Reversing the orientation of an edge changes the sign of the label:

[formula]

Also for [formula], an edge labeled with - q,  (1  ≤  q  ≤  r - 1)   is identified with an edge labeled with r - q. For example, in the [formula] case we have

[formula]

We associate to a word w of n symbols from [formula] an equilateral triangle of length n. Along the top boundary of this triangle, we place triangles of unit length as in [\eqref=eq:triangle1], so that the numbers on the top of these triangles, when read from left to right, give the word w. Then, we fill in the rest of the triangle with rhombi as described above, so that the labels on the edges match on the boundaries of the rhombi. The triangular diagram obtained in this way is the flow diagram determined by w (see [\cite=We] for more details). The following is an example of [formula] flow diagram associated to the word w  =    2  2    1. (Note we use ā instead of - a when writing a word to simplify the notation.)

[formula]

We say a word w (or its associated flow diagram) is admissible if the associated flow diagram of w has no contact with the boundaries of the large triangle other than with the top boundary of triangle. (The diagram above is not admissible.)

Let [formula] be the natural r-dimensional [formula]-module and [formula] be the dual module. A tensor product of copies of [formula] and [formula] corresponds to a string [formula] of symbols +   and -   and is denoted [formula]. Each word [formula] in [formula] of length n determines a sign string [formula] given by [formula] if wi > 0 and [formula] if wi < 0. For a given sign string [formula] of length n, we let [formula] be the set of admissible words w in [formula] of length n whose sign string [formula]. Then the following analog of Theorem [\ref=T:inv] holds in this setting:

Let [formula] be a sign string and [formula] be the set of admissible words in [formula] whose sign string is [formula]. Then, there is a bijection between [formula] and a basis for the space [formula] of [formula]-invariants in [formula].

Any interior face of a flow diagram is bounded by at least six edges, since the following rhombus configuration is not allowable:

[formula]

Therefore, the nonelliptic [formula]-webs discussed earlier in this paper are indeed [formula] flow diagrams. Thus, in the [formula] case, what we want is a bijection (in fact an injection) mapping the pair [formula] in Section [\ref=sec:bijection] to an admissible flow diagram. To achieve this, we apply the following algorithm, which we illustrate with the running example from Section [\ref=sec:bijection], where [formula] has shape λ  =  (4,2,1) and [formula] has shape μ = (5,3,2).

[formula] Break [formula] into one-column tableaux:

Let [formula] be the entry in position (a,b) of [formula].

For [formula], let [formula] be the largest entry in the second row of [formula] less than [formula], such that [formula] is different from [formula], [formula], [formula] when p  >  1. Associate [formula] with [formula].

For [formula], let [formula] be the largest entry in the first row of [formula] less than [formula] such that [formula] is different from [formula], [formula], [formula] when p  >  1. We associate [formula] with [formula].

Now assemble associated entries of [formula] to form one-column tableaux. There will be λ3 tableaux of shape (13),  λ2  -  λ3 tableaux of shape (12), and λ1  -  λ2 tableaux of shape (1). For [formula] as above, we obtain [formula], [formula], [formula], [formula]. The index [formula] in [formula] indicates that the shape of the tableau is [formula]. To determine the second index, we compare the bottom entries in the tableaux of shape [formula] and number the tableaux so the one with the smallest last row entry is [formula], the next one is [formula], and so forth until we reach the one with the largest last row entry.

[formula]   Break [formula] into one-column tableaux by the same procedure:

Thus, if [formula], then [formula], [formula], [formula], [formula], [formula].

[formula] Associate words in {  ±  1,  ±  2,  ±  3} to the one-column tableaux:

Recall that [formula] has k entries and [formula] has 3n - 2k entries, where k  =  7 and n = 8 in this particular example. From [formula], we get the word [formula] of length 3n - k (which is 17 here) where

[formula]

[formula]

where [formula] is in position 2, [formula] in position 7, and [formula] in position 8. A wall [formula] separates the wi from [formula] on the left from the wi on the right from [formula].

The word gives the labels on the top boundary of the triangle,

[formula]

[formula]   Draw the flow diagram according to the boundary specifications:

[formula]

[formula]   Repeat the same procedure for the other one-column tableaux of length 3 coming from [formula] and [formula].

[formula]

where the word [formula] from [formula] is constructed from setting

[formula]

The corresponding flow diagram is

[formula]

Now for [formula], we pair [formula] and [formula] and to get an admissible flow diagram. The number of such tableaux will always be the same for each [formula]. (Recall from Step 7 of Section [\ref=sec:bijection] that [formula] and [formula] have the same shape.) From [formula], we get the word

[formula]

and the flow diagram

[formula]

Applying a similar process to the pair [formula], we get the word

[formula]

and to the pair [formula], the word

[formula]

The result of superimposing all the flow diagrams is the following flow diagram:

[formula]

Note by our choice of index i for the tableaux [formula] and [formula] above, any two edges that cross have different labels. By replacing the crossings with rhombi as in [\eqref=eq:rhombus], which is equivalent to trivalizing the crossings that was used earlier, we have the final flow diagram associated to [formula], which is admissible.

[formula]

Reading the labels off the top boundary, we can recover [formula] from the flow diagram. Hence, the map sending the pair [formula] to the flow diagram is an injection, and indeed a bijection.