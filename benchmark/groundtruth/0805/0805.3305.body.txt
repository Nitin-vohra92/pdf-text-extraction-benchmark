On a certain generalization of the Balog-Szemeredi-Gowers theorem

The Balog-Szemerédi-Gowers theorem has a rich history, and is one of the most useful tools in additive combinatorics. It began with the a paper by Balog and Szemerédi [\cite=balog], and then was refined by Gowers [\cite=gowers] to the following basic result (actually, Gowers proved somewhat more than we bother to state here):

There exists an absolute constant κ  >  0 such that the following holds for all finite subsets X and Y of size n  >  n0 of an abelian group: Suppose that there are at least Cn3 solutions to x1  +  y1  =  x2  +  y2, xi∈X and yi∈Y. Then, X contains a subset X', of size at least Cκn, such that

[formula]

Sudakov, Szemerédi and Vu [\cite=sudakov] proved a refinement of this theorem (Balog [\cite=balog2] independently obtained a similar result), given as follows:

Let n,C,K be positive numbers, and let A and B be two sets of n integers. Suppose that there is a bipartite graph G(A,B,E) with at least n2 / K edges and |A  +  GB|  ≤  Cn. Then one can find a subset A'  ⊂  A and a subset B'  ⊂  B such that |A'|  ≥  n / 16K2, |B'|  ≥  n / 4K and |A' + B'|  ≤  212C3K5n.

Remark. It is not difficult to show that this theorem, along with some lemmas and theorems of Ruzsa (the Ruzsa triangle inequality [\cite=tao], and the Ruzsa-Plunnecke Theorem [\cite=ruzsa]), implies that we may take κ  <  20 in Theorem [\ref=BSG].

In the same paper, Sudakov, Szemerédi and Vu [\cite=sudakov] proved the following powerful hypergraph version of the Balog-Szemerédi-Gowers Theorem:

For any positive integer k, there are polynomials fk(x,y) and gk(x,y) with degrees and coefficients depending only on k, such that the following holds. Let n,C,K be positive numbers. If A1,...,Ak are sets of n positive integers, H(A1,...,Ak,E) is the k-partite, k-uniform hypergraph with at least nk / K edges, and [formula], then one can find subsets Ai'  ⊂  Ai such that

[formula] |Ai'|  ≥  n / fk(C,K) for all 1  ≤  i  ≤  k;

[formula] [formula].

The notation [formula] means that the sum is restricted to the hypergraph H.

Beautiful and useful as it is, it would be nice if one had some control on the degrees of these polynomials f and g. And, for particular applications that we (Croot and Borenstein) have in mind, it would be good to be able to control the rate of growth of sums [formula], where [formula] is much smaller than k - it would be good to be able to bound the size of this sum from above by

[formula]

where dk depends only on k. Perhaps such a bound can be developed by modifying the proof of Sudakov, Szemerédi and Vu; however, in the present paper, we take a different tack, and produce an alternate proof of a related hypergraph Balog-Szmeredi-Gowers theorem, where such an upper bound as ([\ref=implicit]) will be implicit, though only for the case where [formula]. In our proof, we will use some of the same standard tricks as Sudakov, Szemerédi and Vu do in their proof.

The notation we use to describe this theorem, and its proof, will be somewhat different from that used by Sudakov, Szemerédi and Vu. Furthermore, we will not attempt here to give the most general formulation of the theorem.

For every 0  <  ε  <  1 / 2 and c  >  1, there exists δ  >  0, such that the following holds for all k sufficiently large, and all sufficiently large finite subsets A of an additive abelian group: Suppose that

[formula]

and let

[formula]

If

[formula]

then there exists

[formula]

such that

[formula]

Proof of Theorem [\ref=main_theorem]

Notation and basic assumptions

It will be advantageous to describe the proof in terms of strings. So, the set

[formula]

will be thought of as a collection of strings of length k:

[formula]

where each xi∈A.

Often, we split these strings up into substrings; for example, the string

[formula]

can be written as a product of a "left substring [formula] of length k / 2" (assume k is even) and a "right substring r of length k / 2". So,

[formula]

We may assume that

[formula]

since if this is not the case, then we let k' be the largest power of 2 of size at most k, and proceed as follows: Given a string [formula] in S, we write it as a product [formula], where

[formula]

Now, for some string y we will have that rx  =  y for at least |S| / |A|k - k' choices for x∈S. Letting S' denote the set of all strings [formula] with rx  =  y, we will have

[formula]

and clearly

[formula]

So, we could just assume that our k had this value k' all along (remember, we get to choose k to be as large as needed to get the desired conclusion).

The suppression of subscripts, and a comment about iteration

In the proof of our theorem, we will iteratively replace our initial set S with other, smaller and smaller sets having certain useful properties. If we were so inclined, we could describe this iteration by saying that we produce a sequence of sets

[formula]

The trouble with this is that it leads to a proliferation of subscripts, which can be unpleasant.

Instead of introducing subscripts, we use the "assignment operator", denoted by

[formula]

which means that the set S gets "reassigned" to the set S'. So, it is worth keeping in mind that later into the proof, S refers to a different set than at the start of the proof. The same will be true of k and δ.

Lengths of iterations and the choice of δ and k

At almost every step of our iteration, we will replace S  ⊆  Ak with S'  ⊆  Ak', satisfying

[formula]

Clearly, for δ  >  0 small enough, the number of such iterations we can take will be bounded from above in terms of ε and c. Furthermore, since at each step, k' is at least half the size of k, so long as the initial value of k is large enough in terms of c and ε, we will not run out of dimensions.

Since our theorem is a qualitative result, in that it does not even attempt to explain how δ or k depends on ε and c, there is no need to be more precise about just how small one needs take δ or how large to take k, in order for our iteration process to terminate and prove our theorem.

The iteration part of the argument

Given a string x of length k / 2, we let Rx denote the set of all strings y of length k / 2 such that

[formula]

We analogously define Lx.

We will now select an x, and therefore Rx, very carefully, so that it satisfies certain useful properties: We begin with the inequality

[formula]

We now apply the following lemma, which is easily proved upon using the Cauchy-Schwarz inequality:

Suppose that V is a set of n elements, and suppose that

[formula]

satisfy

[formula]

Then, there exists 1  ≤  j  ≤  r such that

[formula]

From this lemma we easily deduce that there exists x such that

[formula]

Next, we let

[formula]

and we observe that

[formula]

so, S' is not too much smaller than S.

We now make a reassignment:

[formula]

and observe that S now satisfies

[formula]

and we in addition have that every element of S can be expressed as yz, where z∈Rx.

Now suppose that there is a string y of length k / 2 such that if

[formula]

then

[formula]

If this occurs, then we make another reassignment:

[formula]

and we start back at the very beginning of this subsection [\ref=iteration_section].

The sets H' and H''

When we come out of the iteration loops ('reassignments') from the previous subsection, we finish with a set S having a number of highly useful properties, among them:

[formula] |S|   ≥   |A|k  -  δ;

[formula] Each Ry  ⊆  Rx; and,

[formula] If we let H denote those strings h of length k / 2 such that

[formula]

then for every such h we will have that

[formula]

One can easily show, using the lower bound for |S|, that for |A| sufficiently large,

[formula]

Since

[formula]

we deduce that there exists z∈Rx such that there are at least

[formula]

vectors h∈H satisfying

[formula]

Fix one of these z, and let

[formula]

denote all those h∈H such that ([\ref=v_hold]) holds. Note that

[formula]

Next, let

[formula]

denote those h∈H' such that there are at least

[formula]

other h'∈H' satisfying

[formula]

We have that

[formula]

So,

[formula]

for |A| sufficiently large.

We also note that

[formula]

This is one of the places where it was essential to have that z∈Rh for all h∈H'.

Now suppose that, in fact,

[formula]

If so, then we assign

[formula]

and we repeat our iteration process again, starting in subsection [\ref=iteration_section].

On the other hand, if ([\ref=H'_check]) does not hold, then we will have that

[formula]

The final leg of the proof

From the fact that

[formula]

along with the fact that Rh  ⊆  Rx and

[formula]

as well as ([\ref=H'H'']), we deduce that there are at least

[formula]

quadruples

[formula]

such that

[formula]

Now we apply Theorem [\ref=BSG], setting

[formula]

Following the comment after Theorem [\ref=SSV], we have that there exists

[formula]

such that

[formula]

Let H''' denote the set of all

[formula]

such that

[formula]

By ([\ref=H''count]) and ([\ref=H'H'']), we have that

[formula]

By simple averaging, there is some vector

[formula]

such that there are at least

[formula]

vectors h∈H''' whose last k / 2 - 1 coordinates are the vector w. The upshot of this is that if we let

[formula]

then

[formula]

and

[formula]

Now we apply a weak form of the Ruzsa-Plunnecke Theorem [\cite=ruzsa], given as follows:

Suppose that X is some finite subset of an additive abelian group, such that

[formula]

Then, we have that

[formula]

Using

[formula]

we deduce that for [formula] even,

[formula]

By selecting δ  >  0 small enough, relative to ε  >  0, we can ensure that for ε  <  1 / 2,

[formula]

Of course, when 1 / 2  ≤  ε  <  1 the inequality is trivial, as c  >  1. Clearly, on rescaling ε appropriately, our theorem is proved.

Acknowledgements

We would first and foremost like to thank Jozsef Solymosi, who emailed us the reference to the Sudakov-Szemerédi-Vu paper, and then who presented to us his own proof of it. We would also like to thank Boris Bukh, who also pointed out this paper and result to us.

Jozsef (as we have been reminded) and especially Boris made certain very helpful remarks to us concerning an application of the Bourgain-Chang sum-product theorem on a paper of ours yet to be written up, of which the present paper was once a part. We wish to thank them for their remarks in advance of the writeup of that new paper.

Van Vu also mentioned his hypergraph result to us in passing during the conference, and we wish to thank him for the comment.

We wish to thank Terry Tao for pointing out a result from section 2.6 from his book with Vu. Evan plans to work on this.

We wish to thank Harald Helfgott for pointing out section 2.6 of the Tao-Vu book.

Finally, we wish to thank Antal Balog for the warmth and interest in our result.

For anyone we forgot to thank, our apologies in advance.