Proving Infinitary Formulas

Introduction

The semantics of ASP programs can be defined using a translation that turns programs into sets of infinitary propositional formulas [\cite=geb15]. To prove properties of ASP programs we need then to reason about stable models of infinitary formulas in the sense of Truszczynski [\citeyear=tru12]. In particular, we often need to know which transformations of infinitary formulas do not affect their stable models. It is useful to know, for instance, that stable models of infinitary formulas are not affected by applying the infinitary De Morgan's laws

[formula]

and

[formula]

where A may be infinite. "Strongly equivalent" transformations of this kind are used in the proof of the interchangeability of the cardinality constraint {p(X)}0 and the conditional literal [formula] (Harrison et al. 2015a, Example 7), as well as the proof of correctness of the n-queens program given in the electronic appendix of [\cite=geb15].

Strongly equivalent transformations of infinitary formulas are characterized by the infinitary logic of here-and-there [\cite=har15a]. The set of theorems in the sense of that paper coincides with the set of all infinitary formulas that are "HT-valid"--satisfied by all interpretations in the sense of the logic of here-and-there.

The set of theorems is defined by Harrison et al. [\citeyear=har15a] in terms of closure under a set of inference rules; there is no definition of a proof in that paper. It is possible to reformulate the definition of a theorem in terms of proofs, but those proofs would consist generally of infinitely many formulas, because some of the inference rules introduced there have infinitely many premises. In formalized mathematics, proofs are useful in that they are finite syntactic objects that can establish the validity of assertions about infinite domains. "Infinite proofs", on the other hand, do not have this property.

Can we use finite syntactic objects of some kind to establish that an infinitary formula is HT-valid, at least in some cases?

The definition of an instance of a propositional formula (Harrison et al. 2015a) may help us answer this question. Propositions 1 and 3 in that paper show that substituting infinitary formulas for atoms in a finite intuitionistically provable formula results in an HT-valid formula. For example, the formula

[formula]

is intuitionistically provable; it follows that for any infinitary formulas F, G, H, the infinitary formula

[formula]

is HT-valid. We can think of a proof of ([\ref=subsum]) as a proof of ([\ref=subsum2]) with respect to the substitution that maps p to F, q to G, and r to H. In a similar way, we can talk about proofs of the formula

[formula]

for any non-empty finite family (Fα)α∈A of infinitary formulas and any infinitary formula G.

In this paper we show how the idea of an infinitary instance of a finite formula can be used in a different setting. We will define instances for first-order formulas, and that will allow us, for example, to talk about finite proofs of ([\ref=subsum3]) even when A is infinite. Consider the signature that has (symbols for) the elements of A as object constants, the unary predicate constant P, and the propositional constant Q. We will see that ([\ref=subsum3]) is the instance of the first-order formula

[formula]

corresponding to the substitution that maps P(α) to Fα, and Q to G. This formula is intuitionistically provable, and according to the main theorem of this paper it follows that ([\ref=subsum3]) is HT-valid.

After a review of the infinitary logic of here-and-there in Section [\ref=sec:def], we define instances of a first-order formula in Section [\ref=sec:flatsubs], and state the main theorem in Section [\ref=sec:mt]. Two other useful forms of the main theorem are discussed in Section [\ref=sec:so]. The proof of the theorem is outlined in Section [\ref=sec:proof].

A preliminary report on this project was presented at the 8th Workshop on Answer Set Programming and Other Computing Paradigms held in Cork, Ireland in 2015.

Infinitary Logic of Here-and-There

This review follows Harrison et al. (2015, 2015a).

Infinitary Formulas

Throughout this note, we will use σ to denote a propositional signature, that is, a set of propositional atoms. For every nonnegative integer r, (infinitary propositional) formulas (over σ) of rank r are defined recursively, as follows:

every atom from σ is a formula of rank 0;

if H is a set of formulas, and r is the smallest nonnegative integer that is greater than the ranks of all elements of H, then [formula] and [formula] are formulas of rank r;

if F and G are formulas, and r is the smallest nonnegative integer that is greater than the ranks of F and G, then F  →  G is a formula of rank r.

We will write [formula] as [formula], and [formula] as [formula]. The symbols [formula] and [formula] will be understood as abbreviations for [formula] and for [formula] respectively; [formula] and F  ↔  G are understood as abbreviations in the usual way.

A set or family of formulas is bounded if the ranks of its members are bounded from above. For any bounded family (Fα)α∈A of formulas, we denote the formula [formula] by [formula], and similarly for disjunctions. For example, if all formulas Fα and G are atoms then the left-hand side of equivalence ([\ref=subsum3]) is shorthand for the formula

[formula]

of rank 2.

HT-Interpretations

An HT-interpretation of σ is an ordered pair 〈Ih,It〉 of subsets of σ such that Ih  ⊆  It. The symbols h,t are called worlds; respectively here and there. They are ordered by the relation h  <  t. HT-interpretations are the special case of Kripke models for intuitionistic logic with only two worlds.

The satisfaction relation between an HT-interpretation I  =  〈Ih,It〉, a world w, and a formula is defined recursively, as follows:

[formula] if p∈Iw;

[formula] if for every formula F in H, [formula];

[formula] if there is a formula F in H such that [formula];

[formula] if, for every world w' such that w  ≤  w', [formula] or [formula].

In particular,

[formula] if, for every world w' such that w  ≤  w', [formula].

We say that I satisfies F, and write [formula], if [formula] (equivalently, if [formula] for every world w). A formula is HT-valid if it is satisfied by all HT-interpretations.

Substitutions and Instances

By Σ we denote an arbitrary signature in the sense of first-order logic that contains at least one object constant. The signature may include propositional constants (viewed as predicate constants of arity 0). Object constants will be viewed as function constants of arity 0. In first-order formulas over Σ, we treat the binary connectives [formula], [formula], and →   and the 0-place connective [formula] as primitive; [formula], [formula], and ↔   are the usual abbreviations from propositional logic.

A substitution is a function ψ that maps each closed atomic formula over Σ to an infinitary formula over σ, such that the range of ψ is bounded. A substitution ψ is extended from closed atomic formulas to arbitrary closed first-order formulas over Σ as follows:

[formula] is [formula];

ψ(α1  =  α2), where α1,α2 are ground terms, is [formula] if α1 is α2, and [formula] otherwise;

[formula], where [formula] is a binary connective, is [formula];

[formula] is [formula], where α ranges over the ground terms of Σ;

[formula] is [formula], where α ranges over the ground terms of Σ.

The formula ψF will be called the instance of F with respect to ψ.

For example, if Σ includes the elements of A as object constants, but no other function constants, then ([\ref=subsum3]) is the instance of ([\ref=subsum4]) with respect to the substitution ψ defined as follows:

[formula]

If the function constants of Σ are the object constant a and the unary function constant s, then any infinite conjunction of the form

[formula]

where Fi,Gi are infinitary formulas, is the instance of the first-order formula

[formula]

with respect to the substitution ψ defined as follows:

[formula]

[formula]

Main Theorem

The main theorem stated below shows that if a closed first-order formula is intuitionistically provable then all its instances are HT-valid. The theorem is actually more general because it refers to a deductive system that includes, in addition to the axioms and inference rules of first-order intuitionistic logic with equality, some additional axioms. We can add, first of all, the axiom schema

[formula]

[\cite=hos66] [\cite=ume59], the axiom schema

[formula]

[\cite=lif07a], and the "decidable equality" axiom

[formula]

We include also the axioms of the Clark Equality Theory [\cite=cla78]:

[formula]

for all pairs of distinct function constants f, g from Σ;

[formula]

for all function constants f from Σ of arity greater than 0; and

[formula]

for all terms t(x) that contain x but are different from x.

The deductive system obtained from first-order intuitionistic logic with equality by adding axioms ([\ref=hosoi])-([\ref=cet3]) will be denoted by [formula] ("Herbrand logic of here-and-there").

Main Theorem. If a closed first-order formula F is provable in [formula] then any instance of F is HT-valid.

Example 1. The infinitary De Morgan's laws ([\ref=dm2]) and ([\ref=dm1]) with non-empty A are HT-valid because they are instances of the first-order formulas

[formula]

and

[formula]

respectively, and these formulas are provable in [formula]. (The first equivalence, and one direction of the second, are provable intuitionistically. To prove the second equivalence right-to-left, use ([\ref=sqht]) with P(x) as F.)

If A is empty then formula [\eqref=dm2] is [formula] and [\eqref=dm1] is [formula]. Both of these formulas are HT-valid. However, in view of the restriction that Σ contain at least one object constant neither is an instance of the formulas in the previous example. Without that restriction, the assertion of the Main Theorem would become incorrect. Indeed, the formula [formula] would be then an instance of the intuitionistically provable formula [formula].

Example 2. As discussed above, the fact that formula ([\ref=subsum3]) is HT-valid follows from the provability of ([\ref=subsum4]) in first-order intuitionistic logic. Consider the formula dual to ([\ref=subsum3]):

[formula]

(As before, (Fα)α∈A is a non-empty family of infinitary formulas, and G is an infinitary formula.) The fact that this formula is HT-valid can be derived from the main theorem above in a similar way, with the corresponding first-order formula

[formula]

The proof of the right-to-left direction will use ([\ref=sqht]), again with P(x) as F.

Example 3. Any formula of the form

[formula]

with non-empty A (Harrison et al. 2015a, Example 2) is HT-valid because it is an instance of the intuitionistically provable formula

[formula]

Example 4. Any formula of the form

[formula]

where A is non-empty, is HT-valid because it is an instance of the axiom schema ([\ref=sqht]).

Including Restrictors

Under the definition of an instance above, all infinitary conjunctions and disjunctions in an instance of a formula have the same indexing set. In this section we give a more general definition that overcomes this limitation.

We assume here that some unary predicate symbols of the signature Σ may be designated as restrictors. The role of restrictors will be somewhat similar to the role of sorts in a many-sorted signature. A generalized variable is defined as either a variable or an expression of the form

[formula]

where [formula] (n  ≥  1) are distinct variables, and [formula] are restrictors. Formulas with restrictors are defined recursively in the same way as first-order formulas over Σ except that a quantifier may be followed by a generalized variable. For instance, if Σ includes the unary predicate constants P and R, and the latter is a restrictor, then

[formula]

is a formula with restrictors.

Generalized variables ([\ref=gv]) can be eliminated from a formula with restrictors by replacing subformulas of the form

[formula]

with

[formula]

and subformulas of the form

[formula]

with

[formula]

To prove a formula with restrictors in a deductive system means to prove the first-order formula obtained by this transformation. For instance, we can say that formula ([\ref=r0]) is provable in the intuitionistic predicate calculus because the formula

[formula]

is provable in that deductive system. Satisfaction of closed formulas with restrictors is defined in a similar way.

In the presence of restrictors, a substitution is defined as a function ψ that maps each closed atomic formula F over Σ to one of the formulas [formula], [formula], if F begins with a restrictor, and to an infinitary formula over σ otherwise, such that the range of ψ is bounded. A substitution ψ is extended to closed first-order formulas over Σ with restrictors in the same way as for first-order formulas as in Section [\ref=sec:flatsubs], with the additional clauses:

[formula] is

[formula]

[formula] is

[formula]

Main Theorem for Formulas with Restrictors. If a closed first-order formula F with restrictors is provable in [formula] then any instance of F is HT-valid.

Example 5. Consider a formula of the form

[formula]

where B is a proper subset of A. It is an instance of ([\ref=r0]): take the elements of A to be the only function constants of Σ, and define the substitution ψ by the conditions

[formula]

Since ([\ref=r0]) is intuitionistically provable, ([\ref=x5]) is HT-valid.

Example 6. Any formula of the form

[formula]

is an instance of the formula

[formula]

Indeed, we can include the elements of [formula] among the object constants of σ and choose ψ so that

[formula]

Since ([\ref=r1]) is intuitionistically provable, ([\ref=eq:disj-dist]) is HT-valid.

References to the new version of the main theorem can be replaced in some cases by references to the more restricted version from Section [\ref=sec:mt] at the cost of using more complicated substitutions. For instance, the claim that formula ([\ref=x5]) is HT-valid, under the additional assumption that B is non-empty, can be justified as follows. Take Σ to be the signature consisting of the elements of A as object constants, the unary function constant f, and the unary predicate constant P. Choose an element α0 of B. Then ([\ref=x5]) is the instance of the formula

[formula]

with respect to the substitution ψ defined by the condition: for all object constants α,

[formula]

Including Second-Order Axioms

We will define now an extension [formula] of [formula] where predicate and function variables of arbitrary arity are included in the language, as in Section 1.2.3 of the handbook chapter by Lifschitz et al. [\citeyear=lif08b]. The set of axioms and inference rules of [formula] is extended by adding the usual postulates for second-order quantifiers, the axiom schema of comprehension

[formula]

(n  ≥  0), where the predicate variable p is not free in F, and the axiom of choice

[formula]

(n  >  0). The main theorem can be extended as follows.

Main Theorem for [formula]. If a closed first-order formula F (possibly with restrictors) is provable in [formula] then any instance of F is HT-valid.

In the special case when the signature Σ contains finitely many function constants, by DCA we denote the domain closure axiom:

[formula]

where the conjunction extends over all function constants f from Σ, and Cf(p) ("set p is closed under f") stands for the formula

[formula]

(In the presence of DCA, axioms ([\ref=de]) and ([\ref=cet3]) become redundant.) For instance, if Σ contains an object constant a and unary function constant s and no other function constants, then DCA turns into the second-order axiom of induction

[formula]

and [formula] DCA becomes an extension of second-order intuitionistic arithmetic.

In the following version of the main theorem, the signature Σ is assumed to contain finitely many function constants.

Main Theorem for [formula] DCA. If a closed first-order formula F (possibly with restrictors) is provable in [formula] DCA then any instance of F is HT-valid.

Note that both versions of the main theorem stated in this section refer to first-order formulas provable using second-order axioms. The notion of a substitution is not defined here for second-order formulas.

Example 7. Any equivalence of the form

[formula]

(Harrison et al. 2015a, Example 1) is HT-valid. Indeed, with the appropriate choice of the signature Σ, it is an instance of the formula

[formula]

This formula is provable in [formula] DCA. (The implication left-to-right is given by axiom ([\ref=axoi]).)

Proof of Main Theorem

The proof of the theorem makes use of "Herbrand HT-interpretations"--Kripke models with two worlds and with the universe consisting of all ground terms of the signature Σ. We will see that all theorems of [formula] (and its extensions discussed in the previous section) are satisfied by all Herbrand HT-interpretations. On the other hand, for any substitution ψ and any HT-interpretation I of σ, we can find an Herbrand HT-interpretation J such that J satisfies a closed first-order formula F if and only if I satisfies ψF. The main theorem will directly follow from these two facts.

An Herbrand HT-interpretation of a first-order signature Σ is a pair 〈Jh,Jt〉 of subsets of the Herbrand base of Σ (that is, the set of all ground atomic formulas over Σ that do not include equality) such that Jh  ⊆  Jt. By U we denote the Herbrand universe of Σ, that is, the set of all ground terms over Σ.

For each function [formula] of arity n  >  0 that maps from Un to U we introduce a function constant [formula] of arity n, called the function name of [formula]. For each pair [formula] of subsets of Un such that [formula], we introduce an n-ary predicate constant [formula], called the predicate name of [formula]. By Σ* we denote the signature obtained by adding all function and predicate names to Σ, and by U* we denote the Herbrand universe of Σ*. Then for each term α∈U*, we define the term ∈U recursively as follows:

if α is an object constant from U then [formula] is α;

if α is of the form [formula] where f is a function constant from Σ, then [formula] is [formula];

if α is of the form [formula] where [formula] is a function name, then [formula] is the element of U obtained by applying [formula] to [formula].

The satisfaction relation between an Herbrand HT-interpretation J  =  〈Jh,Jt〉, a world w, and a closed second-order formula F over Σ is defined recursively, as follows:

[formula].

[formula] if [formula] is [formula].

[formula] if [formula].

[formula] if [formula].

[formula] if [formula] and [formula]; similarly for [formula].

[formula] if for every world w' such that w  ≤  w', [formula] or [formula].

[formula], where v is an object variable, if for each ground term α over Σ, [formula]; similarly for [formula].

[formula], where v is a function variable, if for each function name [formula] of the same arity as v, [formula]; similarly for [formula].

[formula], where v is a predicate variable, if for each predicate name [formula] of the same arity as v, [formula]; similarly for [formula].

A closed second-order formula F over Σ* is HHT-valid if [formula] for every Herbrand HT-interpretation J.

Soundness Lemma.

If a second-order formula F over Σ* is provable in [formula] then the universal closure of F is HHT-valid.

For any first-order signature Σ containing finitely many function constants, if a second-order formula F over Σ* is provable in [formula] DCA then the universal closure of F is HHT-valid.

The lemma is proved by induction on the derivation of F.

Lifting Lemma. Let I be an HT-interpretation of a propositional signature σ, ψ be a substitution from a first-order signature Σ (possibly containing restrictors) to σ, and J be the Herbrand HT-interpretation defined by the condition: for every world w

[formula]

Then for any closed first-order formula F (possibly with restrictors)

[formula]

The lemma is proved by strong induction on the total number of connectives and quantifiers in F. If F is atomic, then the assertion of the lemma is immediate from the definition of J. Here are two of the other cases.

Case [formula]:

[formula]

for each ground term α, [formula]

for each ground term α, [formula]

[formula]

[formula]

Case [formula]: We need to show that

[formula]

iff

[formula]

Indeed,

[formula]

[formula]

[formula] in every world w'  ≥  w and for each tuple of ground terms [formula] such that [formula]

[formula] in every world w'  ≥  w and for each tuple of ground terms [formula] such that [formula]

[formula] in every world w'  ≥  w and for each tuple of ground terms [formula] such that [formula]

in every world w'  ≥  w, [formula]

The condition above is equivalent to ([\ref=2sho]) by the monotonicity property of the satisfaction relation in the logic of here-and-there.

The main theorem is immediate from the two lemmas stated above.

Conclusion

In this paper we defined when an infinitary propositional formula is an instance of a first-order formula. The provability of first-order formulas in some extensions of intuitionistic logic implies that all instances of these formulas are HT-valid. Theorems of this kind can be used for establishing the strong equivalence of logic programs that use local variables ranging over infinite domains.

If an infinite conjunction is an instance of a first-order formula then it is syntactically uniform, in the sense that all its conjunctive terms are all of the same kind--either each of them is an atom, or each is an implication, and so forth. The same can be said about infinite disjunctions. This fact points to a limitation on the applicability of the method of proving HT-validity described in this paper. For instance, formulas of the form

[formula]

are HT-valid, but they are not instances of any first-order formula provable in the deductive systems discussed above. Indeed, if ([\ref=bad]) is an instance of a first-order formula F then F is either an atom such that its predicate symbol is not a restrictor of F, or such an atom preceded by a universally quantified generalized variable. Such first-order formulas are not provable. But it is clear that ([\ref=bad]) can be tranformed into an instance of a theorem of [formula] by rewriting it as a conjunction of two infinite conjunctions:

[formula]

In this sense, the syntactic uniformity of instances of first-order formulas is not a significant limitation.

Acknowledgements

Many thanks to Yuliya Lierler and the anonymous referees for useful comments and interesting questions. The first two authors were partially supported by the National Science Foundation under Grant IIS-1422455.