cm 0cm cm cm pt cm cm

A note on insensitivity in stochastic networks

Stan Zachary American Mathematical Society 1991 subject classifications. Primary 60K20 Key words and phrases. insensitivity, stochastic network, partial balance

Maxwell Institute for Mathematical Sciences, Heriot-Watt University Edinburgh

Introduction

It is well-known that many stochastic networks--notably queueing and loss networks--have stationary distributions of their level of occupancy which depend on certain input distributions only through the means of the latter. This phenomenon of insensitivity has been studied by various authors over an extended period of time, in varying degrees of generality and abstraction, and using a variety of techniques.

In the present paper we revisit this topic to develop an insight of Pechinkin (1983, 1987) to give a very simple and direct treatment of insensitivity. In particular the approach avoids those based on brute-force calculations, the consideration of phase-type distributions (Schassberger, 1978, Whittle, 1985, Bonald and Proutière, 2002, 2003), or the use of quite complex machinery for handling generalised semi-Markov processes (Burman, 1981, Schassberger, 1986)--although such processes are implicit in the current approach. It further avoids assumptions about, for example, continuity of distributions, necessary for some of the above approaches, and also explicitly identifies the entire stationary distributions of the networks concerned, showing that, where insensitivity obtains, these stationary distributions have a particularly simple and natural form. Pechinkin used his insight, which involves what is in effect a coupling argument together with induction, to give probabilistic proofs of the insensitivity of a number of single-class loss systems with state-dependent arrival rates--results originally proved analytically by Sevastyanov (1957). He also indicated the wider applicability of the approach in the single-class case. In the present paper we give a substantial reformulation of the underlying idea, under more general conditions and showing that its most natural expression is in terms of balance equations. This considerably simplifies its application to single-class systems--notably the quite complex coupling constructions are no longer needed. It further makes possible the extension of the idea to the multi-class networks considered in Section [\ref=sec:multi-class-networks]. The main aim is to provide probabilistic insight, notably for multi-class networks. Indeed it is shown that insensitivity is simply a byproduct, under appropriate conditions, of probabilistic independence.

We study networks in which individuals arrive at various classes at rates which may depend on the state of the entire system, bringing workloads which are independent and identically distributed within classes and which have finite means. Within each class workloads are reduced at rates which may again be state-dependent (when the rate is constant workloads may be identified with lifetimes in classes), and on completion of its workload an individual moves to a different class or leaves the system, with probabilities which may yet again be state-dependent.

In order to obtain insensitivity we typically require that an individual joining a class is immediately served, i.e. has its workload reduced, at a rate which is the same as that of an individual immediately prior to leaving the class (where in each of these cases the number of individuals in each class of the system is the same)--more generally that the service discipline should define a network which is symmetric in the sense of Kelly (1979). The most common example is that of processor-sharing networks, but other possibilities are well-known, for example, "last-in-first-out preemptive resume" networks. We shall concentrate on a very broad class of processor-sharing networks, introduced by Bonald and Proutière (2002) and including, for example, traditional loss networks and processor-sharing Whittle and Jackson networks, as special cases). We shall also indicate the simple modifications required to deal with other possibilities.

For the above class of processor-sharing networks, Bonald and Proutière used phase-type arguments to show that, under conditions which correspond to the satisfaction of the appropriate partial balance equations, the stationary distribution of the number of individuals in each class is insensitive to the workload distributions, subject to the means of the latter being fixed and to the distributions themselves being drawn from the broad class of Cox-type distributions (dense in the class of all distributions on [formula]). In the present paper we formally consider all workload distributions on [formula] with finite means, and identify also the stationary residual workload distributions. However, as stated above our main aim is to give a direct and probabilistically natural treatment. It turns out (and is in many cases well-known) that, when the appropriate partial balance equations are satisfied for such a network, then the stationary distribution of the entire system, including the specification of residual workloads, is such that departures from each class are exactly balanced by arrivals to that class--in a sense again to be made precise below. Indeed, for single-class systems, this is the essence of Pechinkin's insight. What is of interest is that same idea extends to establish insensitivity for the very much more general networks considered here, and indeed appears also to establish insensitivity in more abstract settings such as that considered by Whittle (1985), though we do not formally consider this more abstract environment here.

In order to fix ideas, it is convenient to consider first, in Section [\ref=sec:single-class-networks], single-class networks. Here the extension of previous ideas is not too difficult. Nevertheless it is desirable to give a careful treatment of this case, avoiding notational complexity while preserving rigour, so as both to establish the underlying principle and also to set the scene for the multi-class networks which we consider in Section [\ref=sec:multi-class-networks].

Single-class networks

Consider an open system with a single class of individual (customer, call, or job). Individuals arrive as a Poisson process with state-dependent rate α(n), where n is the number of individuals currently in the system. Arriving individuals have workloads which are independent of each other and of the arrivals process with a common distribution μ on [formula] which we assume to have a finite mean m(μ). While there are n individuals in the system, their total workload is reduced at a rate [formula], where we assume β(n) > 0 if and only if n > 0; an individual departs the system when its workload is reduced to zero. By suitably redefining the rates β(n) if necessary, we may, and do, assume without loss of generality that the mean workload m(μ) = 1.

We consider first the processor-sharing case. Here when there are n > 0 individuals in the system, the workload of each is simultaneously reduced at a rate β(n) / n, and the set-up described above becomes a fairly general description of a single-class processor sharing system. A special case is the simple Erlang loss system, in which, for some α,β > 0, we have α(n) = α(n < C) for some capacity C  ≤    ∞   (where [formula] is the indicator function) and β(n) = nβ for all [formula]. Here individuals are typically referred to as calls, and workloads correspond to call durations (since β(n) / n is independent of n). A further special case is the M / GI / m /   ∞   processor-sharing queue, in which, again for some α,β > 0, we have α(n) = α for all n and β(n) =  min (n,m)β for all n and some fixed m.

We represent the system as a Markov process [formula] by defining its state at any time t to be the number n of individuals then in the system together with their residual workloads at that time. (An alternative is to record, for each individual, the workload completed at time t.) For given n > 0 these workloads form an (unordered) set, and may be regarded as taking values in the quotient space Sn obtained from [formula] by identifying points which may be obtained from each other under permutation of their coordinates. The σ-algebra B(Sn) on Sn is similarly formed in the obvious manner from the Borel σ-algebra on [formula]. The state space S for the process [formula] is then the union of the Sn, [formula], where the set S0 is taken to consist of a single point, and its associated σ-algebra B(S) consists of those sets which are countable unions of sets in the σ-algebras B(Sn). The process [formula] is thus an instance of a piecewise-deterministic Markov process (Davis, 1984, 1993). However, we avoid the need for most of the general machinery for handling such processes.

We define the probability distribution [formula] on [formula] to be the stationary residual life distribution of the renewal process with inter-event distribution μ, that is, if μ has distribution function F then [formula] has distribution function G given by (recall that m(μ) = 1). Note that the "residual life" here should be thought of as a residual workload rather than a time. For each [formula], define also the probability distribution [formula] on Sn to be the product of n copies of the distribution [formula], again with the above identification of points in [formula] (more formally, [formula], A∈B(Sn), where [formula] is the product of n copies of the distribution [formula] and θ is the projection from [formula] into the quotient space Sn). Thus [formula] represents the joint distribution of the residual lives at any time in a set of n independent stationary renewal processes each with inter-event distribution μ; we define also [formula] to be the probability distribution concentrated on the single-point set S0. For each n, we also regard [formula] as a distribution on S, assigning its total mass one to the set Sn. Finally, for any distribution π on [formula], define the distribution [formula] on S by [formula]. Thus [formula] assigns probability π(n) to the event that there are n individuals in the system, and, conditional on this event, assigns the distribution [formula] to their residual workloads.

Suppose that the distribution π on [formula] is the solution of the balance equations

[formula]

and that

[formula]

Then the distribution [formula] on S is stationary for the process [formula], and in particular the distribution π is stationary for the associated number of individuals in the system.

The condition [\eqref=eq:2] ensures that, under stationarity, individuals arrive at the system at a finite rate.

In order to exclude pathological behaviour in the argument below, we make the one additional assumption that the distribution μ has no atom of probability at zero. This is without loss of generality: in the case that μ does have such an atom, the evolution of the system may clearly be equivalently described by redefining α, β and μ so as to remove it, and the result of the theorem is easily obtained via this reparametrisation.

Analogously to the definition of [formula], for each [formula], define the probability distribution [formula] on Sn to be the product of n - 1 copies of the distribution [formula] and a single copy of the distribution μ, yet again with the above identification of points in [formula]. (More formally, [formula], A∈B(Sn), where [formula] and θ is again the projection from [formula] into the quotient space Sn.) We again regard [formula] as a distribution on S, assigning mass one to the set Sn.

Consider now the modified process [formula] on S describing the system in which the workload distribution is again μ and in which, when there are [formula] individuals in the system, individual workloads are again reduced at rate β(n) / n; however, for the modified system, (a) an individual departing on completion of its workload is immediately replaced by another bringing an independent workload with distribution μ, (b) external arrivals to the system are not accepted. Thus, for the modified system, the number of individuals remains constant, and conditional on this being n, the system behaves as a set of n independent renewal processes, each of which has stationary residual workload distribution [formula]. Hence, for any distribution π' on [formula], the distribution [formula] on S is stationary for the process [formula].

Let [formula] and [formula] be the semigroups of transition kernels associated respectively with the processes [formula] and [formula]. For any a > 0, let Da be the class of functions f on S taking values in

[formula]

. It follows from the definition of [formula] that, conditional on the number of individuals initially being n the probability of an external arrival in

[formula]

is β(n)h + o(h) as [formula], and that under the distribution [formula], conditional on such a completion taking place, the residual workload distribution becomes [formula] in the case of the process [formula] and [formula] in the in the case of the process [formula]. Further it follows from the conditions [\eqref=eq:1] and [\eqref=eq:2] that, under the initial distribution [formula], the probability of two or more arrivals or workload completions in

[formula]

, the contribution to the error term in ([\ref=eq:4]) resulting from the neglect of the possibility of two or more arrivals or workload completions in

[formula]

as if it were time h; (recalling that [formula], etc, are probability measures) it follows from [\eqref=eq:3] that the consequent error in each of the above two terms is bounded by 2ah, so that the further contribution to the error term in ([\ref=eq:4]) is O(h2) as [formula], again with uniformity over f∈Da. The relations [\eqref=eq:5], and hence ([\ref=eq:6]), are now immediate from the balance equations [\eqref=eq:1]. Since the distribution [formula] is stationary for the process [formula], it now follows from [\eqref=eq:6] that, again for any a > 0 and h > 0, Further, it is straightforward that if f∈Da, then also Ptf∈Da for any t > 0. Standard manipulations using the semigroup structure of [formula], e.g. the consideration of increasingly refined partitions of the interval

[formula]

Suppose that the equations [\eqref=eq:1] above are multiplied by the signed measure [formula] to give

[formula]

These equations have an obvious interpretation as representing, under the distribution [formula] and for each [formula], a detailed balance of flux between Sn and Sn + 1, not just with regard to the total probability assigned to each of these spaces, but also with regard to the distribution of the residual workload sizes: the intuition underlying the derivation of [\eqref=eq:5] above--which is also that of Pechinkin's coupling approach--is that, under [formula], an arrival finding n individuals in the system transforms the residual workload distribution from [formula] to [formula], while a departure from the system when it contains n + 1 individuals transforms the residual workload distribution from what would have been [formula], if the individual had remained in the system with a renewed workload, to the distribution [formula].

In the case where we do not have processor-sharing, i.e. in which it is no longer the case that at any time all workloads are being reduced at the same rate, it is necessary at any time to distinguish the individuals in the system. Thus each Sn above is replaced by [formula] and the state space S is replaced by [formula]. We consider as an example the case of the single-server queue with "last-in-first-out preemptive resume" discipline, in which at any time all service effort is devoted to the last individual to arrive at the system. If at any time there are n individuals in the system, we may index these by [formula] in the order of their arrival, and no individual changes index during its time in the system; as usual arrivals occur as a Poisson process with rate α(n), and the workload of individual n is now being reduced at rate β(n), while that of the remaining individuals is being reduced at rate 0. As previously, define the probability distribution [formula] on [formula] to be the stationary residual life distribution of the renewal process with inter-event distribution μ, and, for each [formula], let the distribution [formula] on [formula] be now the (ordered) product of n copies of [formula]. For each [formula], let the distribution [formula] on [formula] be the (ordered) product of n - 1 copies of the distribution [formula] and a single copy of the distribution μ, with the latter assigned to the nth coordinate of [formula]. Finally, for any distribution π on [formula], define the distribution [formula] on S by [formula] as before. With these (re)definitions, both Theorem [\ref=thm:single] and its proof remain unchanged as stated. Again the underlying reason is as given in Remark [\ref=rem:balance] above: under the distribution [formula], and relative to the modified process considered in the proof of Theorem [\ref=thm:single], an arrival finding n individuals in the system transforms the residual workload distribution from [formula] to [formula], while a departure from the system when it contains n + 1 individuals transforms the residual workload distribution from [formula] to [formula]. Note that this balance does not obtain in the case of, for example, a "first-in-first-out" discipline, and here, as is again well known, we do not have the above insensitivity.

Multi-class networks

Consider now a multi-class network. We concentrate on the processor-sharing case--adaptations to other disciplines may be made as in the single-class case. Let [formula] denote the set of classes, and let [formula] where ni is the number of individuals in each class i. An individual entering class i acquires a workload which has distribution μi with nonzero finite mean m(μi); we again assume without loss of generality that m(μi) = 1; the workload of each individual in class i is reduced at a state-dependent rate [formula], where [formula] if and only if ni > 0. Individuals arrive at each class i from outside the network as a Poisson process with state-dependent rate [formula]; on completion of its workload in any class i an individual moves to class j with state-dependent probability [formula] or leaves the network with probability [formula], where

[formula]

(there are no problems in allowing the possibility [formula]). The workloads, arrivals processes and routing decisions are all independent.

As in the single-class case, we represent the system as a Markov process [formula] by defining its state at any time to be the vector [formula] introduced above together with the residual workloads at that time of the set of individuals in each class. For given [formula], these workloads take values in the space [formula] which is the ordered product of the spaces Sni, i∈I, where, as previously, each Sni is formed from [formula] by identifying points within the latter space which may be obtained from each other under permutation of their coordinates (and where again the set S0 contains a single point). The state space S for the system is the union of all the possible [formula], and the spaces [formula] and S are endowed with the obvious σ-algebras [formula] and B(S).

Analogously to the single-class case, for each i∈I, define the probability distribution [formula] on [formula] to be the stationary residual life distribution of the renewal process with inter-event distribution μi (as previously the residual life should be interpreted as a residual workload). For each i∈I and for each [formula], define as previously the distribution μ̄ini on Sni to be the product of ni copies of the distribution [formula] (again with the above identification of points in [formula])--representing the joint distribution of the residual lives in a set of ni independent stationary renewal processes each with inter-event distribution μi; define also μ̄i0 to be the probability distribution concentrated on the single-point set S0. For each [formula], define the distribution [formula] on [formula] to be the (ordered) product distribution which, for each i∈I, assigns the distribution μ̄ini to Sni. We again regard the distribution [formula] as a distribution on S, assigning its total mass one to the set [formula]. For any positive distribution π on [formula], we define the distribution [formula] on S by [formula].

It is notationally convenient to expand the set I to [formula], treating 0 as an extra class feeding external arrivals to, and receiving departures from, the network. (However, the components of the state [formula] of the network remain indexed in the original set I.) For completeness we define [formula] for all [formula], and also [formula] for all i∈I, j∈I', and [formula] such that ni = 0 (so that [\eqref=eq:10] above remains valid for such [formula] also). For each i∈I, let [formula] be the N-dimensional vector whose ith component is 1 and whose other components are 0, and let [formula] be the N-dimensional vector all of whose components are 0. For each [formula] and each i,j∈I' define the vector [formula]; define also [formula] and [formula].

Suppose that the distribution π on [formula] satisfies the partial balance equations

[formula]

where, for [formula] and i∈I such that ni = 0 we interpret the right side of [\eqref=eq:11] as zero (recall that when ni = 0 we have [formula] for all j∈I' so that [\eqref=eq:11] is automatically satisfied in this case). Suppose also that

[formula]

Then [formula] is stationary for the process [formula], and in particular π is stationary for the associated numbers of individuals in the system. Conversely, if a distribution π on [formula] is stationary for the numbers of individuals in the system for all [formula] such that m(μi) = 1 for all i∈I, then π satisfies the equations ([\ref=eq:11]).

Suppose first that π satisfies the equations [\eqref=eq:11]. As in the proof of Theorem  [\ref=thm:single], we again assume without loss of generality that each distribution μi has no atom of probability at zero.

For each [formula] and for each i such that [formula], define also the residual workload distribution [formula] on [formula] by [formula] where ini is defined as in the proof of Theorem [\ref=thm:single]. Thus [formula] corresponds to each individual in each class j having independently the stationary residual workload distribution [formula], except only that a single individual in the class i is given the workload distribution μi. For each [formula], define also [formula].

Again as in the proof of Theorem [\ref=thm:single], define the process [formula] on S to be that appropriate to the modified system in which there are no arrivals, departures, or transfers between classes; rather each individual in each class i, on completion of its workload, acquires a new independent workload with distribution μi. Thus the occupancy of the system remains constant; conditional on this being [formula], individual workloads in any class i such that ni > 1 are again reduced at rate [formula] and the system behaves as a set of independent renewal processes. Further, for any distribution π' on [formula], the distribution [formula] on S is stationary for [formula].

Again let [formula] and [formula] be the semigroups of transition kernels associated respectively with the processes [formula] and [formula], and, for any a > 0, let Da be the class of functions f on S taking values in

[formula]

where h is small, a transition from i to j in the original system--where either i or j may be 0--occurs with probability [formula] as [formula], and in this case the distribution of the process [formula] becomes [formula] while that of the process [formula] becomes [formula]; that [\eqref=eq:13] now holds with the required uniformity of convergence follows, using also [\eqref=eq:12], as in the earlier proof; finally the results [\eqref=eq:14], and so also ([\ref=eq:15]), follow from the partial balance equations [\eqref=eq:11]. Since the distribution [formula] is stationary for the process [formula], it now follows from [\eqref=eq:15] that, again for any a > 0 and h > 0, That [formula] is now stationary for [formula] follows as in the proof of Theorem [\ref=thm:single].

Now suppose that a distribution π on [formula] is stationary for the numbers of individuals in the system for all [formula] with m(μi) = 1 for all i∈I. A proof that π then necessarily satisfies the partial balance equations [\eqref=eq:11] is given by Bonald and Proutière (2002, 2003). In summary, consider the case in which in every class the workload distribution is exponential with mean 1, and, for any fixed class i, compare this with the case in which, for some 0 < λ < 1, the workload distribution in class i is replaced by a mixture of two distributions, obtained by choosing with probability λ an exponential distribution with mean λ- 1, and with probability 1 - λ the distribution concentrated on 0. Both these models may be (re)formulated as simple Markov jump processes--in the latter case the transition rates into and out of the class i are reduced by a factor λ. Since π is stationary in both cases, comparison of the (full) balance equations for stationarity yields the partial balance equations [\eqref=eq:11].

Processor-sharing Whittle networks. Suppose that for some [formula], some strictly positive function Φ on [formula], and some stochastic matrix P = (pij,  i∈I',  j∈I') such that p00 = 0, we have, for each [formula], where we again make the convention that [formula] whenever ni = 0. Then it is readily checked that the partial balance equations [\eqref=eq:11] are satisfied by

[formula]

for any a > 0 and positive solution [formula] of the equations

[formula]

Thus in particular the stationary distribution π given by [\eqref=eq:16] for the number of individuals of each type in the system is insensitive to the μi (recall our assumption m(μi) = 1 for all i). For the case where P is irreducible and ν > 0, the above equations for [formula] have a unique solution. Again when P is irreducible and when ν = 0 (corresponding to a closed network) π remains uniquely determined, up to a multiplicative constant, by [\eqref=eq:16]. The case where [formula] for positive constants (λi,  i∈I) characterises processor-sharing Jackson networks. Further discussion of Whittle networks is given by Serfozo (1999) and, for processor-sharing networks, by Bonald and Proutière (2002, 2003).

Networks with no internal transitions. Suppose that [formula] for all i,j∈I and for all [formula], so that no transitions are possible between the classes in I. The partial balance equations [\eqref=eq:11] then reduce to the detailed balance equations

[formula]

(In the case of a single class, these equations further reduce to the equations [\eqref=eq:1].) An example is given by a traditional (uncontrolled) loss network--see, for example, Kelly (1986). This is naturally processor-sharing. Here workloads are identified with call durations and, for some set [formula] such that [formula] implies [formula] for all [formula] and i such that [formula] (A is typically defined by capacity constraints), we have

[formula]

for some vectors (νi,  i∈I) and (σi,  i∈I) of strictly positive parameters. The equations [\eqref=eq:17] are then satisfied by

[formula]

where κi  =  νi  /  σi for each i, and where a is naturally chosen to be a normalising constant. As was originally shown by Burman et al (1984), we therefore again have insensitivity of the occupancy distribution π of the network. The stationary distribution of the residual call durations is as identified by Theorem [\ref=thm:multi].

Other examples of processor-sharing networks with no internal transitions are given by those used to model connections in communications networks with simultaneous resource requirements and variable bandwidth requirements--see, for example, Bonald and Massoulié (2001) and de Veciana et al (2001). Here it is far from automatic that the detailed balance equations [\eqref=eq:17] are satisfied.

Acknowledgements

The author is most grateful to Serguei Foss, Takis Konstantopoulos and Ilze Ziedins for some very helpful discussions, and to the referee for a careful reading of the manuscript and some most helpful suggestions.