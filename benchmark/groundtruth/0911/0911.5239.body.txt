0.0 in 0.9 in 1.0 in -0.10 in 0.10 in 8.5 in 6.6 in

Opinion Dynamics with Decaying Confidence: Application to Community Detection in Graphs

Introduction

The analysis of multi-agent systems received an increasing interest in the past decades. In such systems, a set of agents interact according to simple local rules in order to achieve some global coordinated behavior. The most widely studied problem is certainly the consensus or agreement problem where each agent in the network maintains a value and repetitively averages its value with those of its neighbors, resulting in all the agents in the network reaching asymptotically a common value. It is to be noted that the graph of interaction describing the network of agents is generally not fixed and may vary in time. Conditions ensuring consensus have been established by various authors including [\cite=jadbabaie2003] [\cite=blondel2005] [\cite=moreau2005] [\cite=ren2005] (see [\cite=olfati2007] for a survey). More recently, there have been several works providing estimations of the rate of convergence towards the consensus value [\cite=olshevsky2006] [\cite=angeli2007] [\cite=zhou2009].

In this paper, we adopt a different point of view. We consider a discrete-time multi-agent system where the agents try to reach an agreement with the constraint that the consensus value must be approached no slower than a prescribed convergence rate. Under that constraint, global consensus may not be achieved and the agents may only reach local agreement. We call communities the subsets of agents reaching a consensus. Our model can be interpreted in terms of opinion dynamics. Each agent has an opinion. At each time step, the agent receives the opinions of its neighbors and then updates its opinion by taking a weighted average of its opinion and the opinions of its neighbors that are within some confidence range of its own. The confidence ranges are getting smaller at each time step: an agent gives repetitively confidence only to the neighbors that approach sufficiently fast its own opinion. This can be seen as a model for a negotiation process where an agent expects that its neighbors move significantly towards its opinion at each negotiation round in order to keep negotiating. Our model can be seen as an extension of the opinion dynamics with bounded confidence proposed by Krause in [\cite=krause1997] and studied in [\cite=krause2002] [\cite=blondel2007].

We analyze our opinion dynamics model by first studying the relation between asymptotic agreement of a subset of agents and the fact that they are asymptotically connected. We show that under suitable assumptions, these are actually equivalent (i.e. communities correspond to asymptotically connected component of the network) except for a set of initial opinions of measure 0. We then give an algebraic characterization of communities in terms of eigenvalues of the matrix defining the collective dynamics.

Finally, we apply our opinion dynamics model to address the problem of community detection in graphs. In the usual sense, communities in a graph are groups of vertices such that the concentration of edges inside communities is high with respect to the concentration of edges between communities. Given the increasing need of analysis tools for understanding complex networks in social sciences, biology, engineering or economics, the community detection problem has attracted a lot of attention in the recent years (see the extensive survey [\cite=fortunato2009]). The problem of community detection is however not rigorously defined mathematically. Some formalizations of this problem have been proposed in terms of optimization of quality functions such as modularity [\cite=newman2004] or partition stability [\cite=lambiotte2009]. We propose a new formulation of this problem based on eigenvalues of normalized Laplacian matrix of graphs and show that this problem can be solved using our opinion dynamics model. We consider three examples of networks, and compare the communities that we detect with those obtained by the modularity optimization algorithms presented in [\cite=newman2006] [\cite=blondel2008]. We show that our opinion dynamics model not only provides an appealing approach to community detection but that it is also effective.

Opinion Dynamics with Decaying Confidence

Model Description

We study a discrete-time multi-agent model. We consider a set of n agents, [formula]. A relation E  ⊆  V  ×  V models the interactions between the agents. We assume that the relation is symmetric ((i,j)∈E iff (j,i)∈E) and anti-reflexive ((i,i)∉E). V is the set of vertices and E is the set of edges of an undirected graph G = (V,E), describing the network of agents. Each agent i∈V has an opinion modelled by a real number [formula]. Initially, agent i has an opinion xi(0) = x0i independent from the opinions of the other agents. Then, at every time step, the agents update their opinion by taking a weighted average of its opinion and opinions of other agents:

[formula]

with the coefficients pij(t) satisfying

[formula]

where Ni(t) denotes the confidence neighborhood of agent i at time t:

[formula]

with R > 0 and ρ∈(0,1) model parameters.

It is noteworthy that the confidence neighborhoods Ni(t) and the coefficients pij(t) actually depend also on the opinions [formula]. For the sake of simplicity and in order to reduce the length of the equations we keep the notations pij(t) and Ni(t) pointing out just the variation in time of these quantities.

We make the following additional assumptions:

This model can be interpreted in terms of opinion dynamics. At each time step t, agent i∈V receives the opinions of its neighbors in the graph G. If the opinion of i differs from the opinion of its neighbor j more than a certain threshold Rρt, then i does not give confidence to j and does not take into account the opinion of j when updating its own opinion. The parameter ρ characterizes the confidence decay of the agents. Agent i gives repetitively confidence only to neighbors whose opinion converges sufficiently fast to its own opinion. This model can be interpreted in terms of negotiations where agent i requires that, at each negotiation round, the opinion of agent j moves significantly towards its opinion in order to keep negotiating with j.

This model is somehow related to the one discussed in [\cite=chatterjee1977] [\cite=cohen1986] where agents harden their position by increasing over time the weight assigned to their own opinion. In our model, the agents implicitely increase also the weights assigned to their neighbors whose opinion converges sufficiently fast to their own opinion, by disregarding the opinions of the other agents. As noticed in [\cite=cohen1986], hardening the agents positions may hamper the agents to reach an asymptotic consensus. This will be observed in our model as well. However, the aim in this paper is not to exogenously increase the self-confidence of the agents, but to meet a prescribed convergence speed towards the final opinion profile.

We assume in this paper that ρ∈(0,1). However, let us remark that for ρ = 1 (there is no confidence decay), with a complete graph G (every agent talks with all the other agents), and with coefficients pij(t) given for all [formula] by

[formula]

our model would coincide with Krause model of opinion dynamics with bounded confidence [\cite=krause1997] [\cite=krause2002] [\cite=blondel2007].

Our first result states that the opinion of each agent converges to some limit value:

Under Assumption [\ref=assum1] (Stochasticity), for all i∈V, the sequence [formula] is convergent. We denote x*i its limit. Furthermore, we have for all [formula],

[formula]

Let i∈V, [formula], we have from ([\ref=eq:dynamics]), Assumption [\ref=assum1] and ([\ref=eq:neigh])

[formula]

Then, it follows from equation ([\ref=eq:neigh2]) that

[formula]

Finally, Assumption [\ref=assum1] gives for all [formula]

[formula]

Let [formula], [formula], then

[formula]

Therefore,

[formula]

which shows, since ρ∈(0,1), that the sequence [formula] is a Cauchy sequence in [formula]. Therefore, it is convergent. Equation ([\ref=eq:conv]) is obtained from ([\ref=eq:cauchy]) by letting τ go to +    ∞  .

The convergence of each opinion sequence [formula] could have been proved using a result from [\cite=lorenz2005], even for ρ = 1, with the additional assumption that the non-zero coefficients pij(t) are uniformly bounded below by some strictly positive real number. However, the result in [\cite=lorenz2005] does not provide an estimation of the convergence rate which is essential in our subsequent discussions.

The previous proposition allows us to complete the interpretation of our opinion dynamics model. The agents try to reach an agreement with the constraint that the consensus value must be approached no slower than O(ρt). Under that constraint, global agreement may not be attainable and the agents may only reach local agreements. We refer to the sets of agents that asymptotically agree as communities.

Let i,j∈V, we say that agents i and j asymptotically agree, denoted i  ~  *j, if and only if x*i = x*j.

It is straightforward to verify that ~  * is an equivalence relation over V.

A community C  ⊆  V is an element of the quotient set [formula].

Let us remark that the community structure is dependent on the initial distribution of opinions. In the following, we shall provide some insight on the structure of these communities. But first, we need to introduce some additional notations.

Notations and Preliminaries

We define the set of interactions at time t, E(t)  ⊆  V  ×  V as

[formula]

Let us remark that (i,j)∈E(t) if and only if j∈Ni(t). The interaction graph at time t is then G(t) = (V,E(t)). Let us remark that Remark [\ref=dependence] applies also to E(t) and G(t).

For a set of agents I  ⊆  V, the subset of edges of G connecting the agents in I is [formula]. Let E'  ⊆  EI be a symmetric relation over I, then the graph G' = (I,E') is called a subgraph of G. If I = V, then the graph G' = (V,E') is called a spanning subgraph of G. The set of spanning subgraphs of G is denoted S(G). For all [formula], G(t)∈S(G). Let us remark that the set S(G) is finite: it has 2|E| / 2 elements (because we only consider symmetric relations) where |E| denotes the number of elements in E. Given a partition of the agents [formula], we define the set of edges [formula] and the spanning subgraph of G, GP = (V,EP). Essentially, GP is the spanning subgraph of G obtained by removing all the edges between agents belonging to different elements of the partition P. An interesting such graph is the graph of communities [formula] where:

[formula]

Let G' = (V,E')∈S(G), a path in G' is a finite sequence of edges [formula] such that (ik,ik + 1)∈E' for all [formula]. Two vertices i, j∈V are connected in G' if there exists a path in G' joining i and j (i.e. i1 = i and jp = j). A subset of agents I  ⊆  V is a connected component of G' if for all i, j∈I with i  ≠  j, i and j are connected in G' and for all i∈I, for all [formula], i and j are not connected in G'. The set of connected components of G' is denoted K(G'). Let us remark that K(G') is a partition of V.

We define the vectors of opinions [formula] and of initial opinions [formula]. The dynamics of the vector of opinions is then given by

[formula]

where P(t) is the row stochastic matrix with entries pij(t). For a set of agents I  ⊆  V, with [formula], we define the vector of opinions [formula]. Given a n  ×  n matrix A with entries aij, we define the k  ×  k matrix AI whose entries are the avivj. In particular, PI(t) is the matrix with entries pvivj(t). Let us remark that PI(t) is generally not row stochastic. However, if I  ⊆  V is a subset of agents such that no agent in I is connected to an agent in [formula] in the graph G(t), then it is easy to see that

[formula]

and PI(t) is an aperiodic row stochastic matrix. Moreover, if I is a connected component of G(t) then PI(t) is irreducible.

The following sections are devoted to the analysis of the community structure of the network of agents.

Asymptotic Connectivity and Agreement

In this section, we explore the relation between communities and asymptotically connected components of the network. Let us remark that the set of edges E can be classified into two subsets as follows:

[formula]

and

[formula]

Intuitively, an edge (i,j) is in Ef if the agents i and j stop interacting with each other in finite time. E∞ consists of the interactions between agents that are infinitely recurrent. It is clear that [formula] and [formula]. Also, since E and thus Ef is a finite set, there exists [formula] such that

[formula]

Let us remark that the sets Ef and E∞ and the natural number T generally depend on the vector of initial opinions x0. We define the graph G∞ = (V,E∞).

Let i,j∈V, we say that agents i and j are asymptotically connected if and only if i and j are connected in G∞. We say that they are asymptotically disconnected if they are not asymptotically connected.

Asymptotic Connectivity Implies Asymptotic Agreement

Under Assumption [\ref=assum1] (Stochasticity), if two agents i,j∈V are asymptotically connected then they asymptotically agree.

Suppose (i,j)∈E∞. From the definition of E∞ there exists a strictly increasing sequence of non-negative integers [formula] such that for all [formula], (i,j)∈E(τk). Then, for all [formula], |xi(τk) - xj(τk)|  ≤  Rρτk. Since ρ∈(0,1) and [formula] and one gets [formula]. On the other hand, the sequences xi(t) and xj(t) are convergent, which ensures that

[formula]

The result in the proposition then follows from the transitivity of equality and the definition of asymptotic connectivity.

The notion of asymptotic connectivity has already been considered in several works (including [\cite=jadbabaie2003] [\cite=blondel2005] [\cite=moreau2005]) for proving consensus in multi-agent systems. Actually, the previous proposition could be proved using Theorem 3 in [\cite=moreau2005]. However, for the sake of self-containment, we preferred to provide a simpler proof of the result that uses the specificities of our model.

Asymptotic Agreement Implies Asymptotic Connectivity

The converse result of Proposition [\ref=pro:con] is much more challenging: it is clear that it cannot hold for all initial conditions. Indeed, if all the initial opinions x0i are identical, then it is clear that the agents asymptotically agree even though some of them may be asymptotically disconnected which would be the case if the graph G is not connected. Therefore, we shall prove that the converse result holds for almost all initial conditions. In this paragraph, we will need additional assumptions in order to be able to prove this result. The first one is the following: The first assumption is quite strong and we notice that it is not verified by the original Krause model. However, it can be enforced, for instance, by choosing pii(t)  >  1 / 2 for all i∈V, for all [formula], in that case P(t) is a strictly diagonally dominant matrix and therefore it is invertible. The second assumption states that P(t) only depends on the graph G(t), then we shall write P(t) = P(G(t)) where P(G') is the matrix associated to a graph G'∈S(G). From the first assumption, P(G') must be invertible. Then, we can define for all [formula], the following set of matrices:

[formula]

Let us remark that since S(G) is finite, the set Qt is finite: it has at most 2t  ×  |E| / 2 elements.

We shall now prove the converse result of Proposition [\ref=pro:con] in two different cases.

Average preserving dynamics

We first assume that the opinion dynamics preserves the average of the opinions:

This assumption simply means that the matrix P(t) is doubly stochastic. It is therefore average preserving: the average of x(t) is equal to the average of x(t + 1). Also, if I  ⊆  V is a subset of agents such that no agent in I is connected to an agent in [formula] in the graph G(t), it is easy to show that PI(G(t)) is average preserving.

We now state the main result of the section:

If the matrices P(t) satisfy Assumptions [\ref=assum1] (Stochasticity), [\ref=assum2] (Invertibility and graph to matrix mapping) and [\ref=assum3] (Average preserving dynamics), for almost all vectors of initial opinions x0, two agents i,j∈V asymptotically agree if and only if they are asymptotically connected.

The if part of the theorem is a consequence of Proposition [\ref=pro:con]. To prove the only if part, let us define the following set

[formula]

Since V is a finite set, it is clear that W is finite (it has less than 22n elements). For all (I,J)∈W, let |I| and |J| denote the number of elements of I and J respectively. We define the vector of [formula], cIJ whose coordinates cIJ,k = 1 / |I| if k∈I, cIJ,k =  - 1 / |J| if k∈J, and cIJ,k = 0 otherwise. We define the (n - 1)-dimensional subspace of [formula]:

[formula]

Finally, let us define the subset of [formula]:

[formula]

where Qt is the set of matrices defined in ([\ref=eq:qt]). Since W is a finite set and for all [formula], Qt are finite sets, X0 is a countable union of (n - 1)-dimensional subspaces of [formula]. Therefore X0 has Lebesgue measure 0.

Let [formula] be a vector of initial opinions, let us assume that there exist two agents i,j∈V that asymptotically agree but are asymptotically disconnected. Let us show that necessarily, x0 belongs to the set X0. Let I and J denote the connected components of G∞ containing i and j respectively. Since i and j are asymptotically disconnected, [formula], therefore (I,J)∈W. Let T be defined as in equation ([\ref=eq:T]) (i.e. [formula]), since no agent in I is connected to an agent outside of I in G∞ (and hence in G(t) for t  ≥  T), we have that for all t  ≥  T, xI(t + 1) = PI(G(t))xI(t). Moreover, PI(G(t)) is average preserving. Therefore, for all t  ≥  T, the average of xI(t) is the same as the average of xI(T). From Proposition [\ref=pro:con], all agents in I asymptotically agree, then the limit value is necessarily the average of xI(T). Therefore [formula] where [formula] denote the |I|-dimensional vector with all entries equal to 1. A similar discussion gives that [formula]. Since i and j asymptotically agree, we have [formula]. This means that x(T)∈HIJ and therefore

[formula]

which leads to x0∈X0.

Hence, in the case of average preserving dynamics, asymptotic connectivity is equivalent to asymptotic agreement for almost all vectors of initial opinions. We shall now prove a similar result under different assumptions.

Fast convergence assumption

We now replace the average preserving assumption by another assumption. From Proposition [\ref=pro:conv], we know that the opinion of each agent converges to its limit value no slower than O(ρt). This is an upper bound, numerical experiments show that in practice the convergence to the limit value is often slightly faster than O(ρt). This observation motivates the following assumption.

The previous assumption always holds unless there exists i∈V such that

[formula]

It should be noted that unlike Assumptions [\ref=assum1] (Stochasticity), [\ref=assum2] (Invertibility and graph to matrix mapping) and [\ref=assum3] (Average preserving dynamics), it is generally not possible to check a priori whether Assumption [\ref=assum4] holds. However, numerical experiments tend to show that in practice, it does.

The previous assumption allows us to state the following result:

Under Assumptions [\ref=assum1] (Stochasticity) and [\ref=assum4] (Fast convergence), there exists [formula] such that for all t  ≥  T', G(t) = G∞. Moreover, [formula].

We shall prove the lemma by showing that there exists [formula] such that for all t  ≥  T', [formula]. Firstly, let T1  ≥  T where T is defined as in equation ([\ref=eq:T]), then for all t  ≥  T1, E(t)  ⊆  E∞. Secondly, let (i,j)∈E∞, then agents i and j are asymptotically connected. From Proposition [\ref=pro:con], it follows that i and j asymptotically agree. Therefore, [formula]. Thirdly, let [formula], then x*i = x*j and for all [formula]

[formula]

From Assumption [\ref=assum4], we have for all [formula],

[formula]

Since   <  ρ, there exists [formula], such that for all t  ≥  T2, 2Mt  ≤  Rρt. Then, for all t  ≥  T2, (i,j)∈E(t). Let T' =  max (T1,T2), then for all t  ≥  T', [formula] and thus [formula].

The previous result states that after a finite number of steps, the graph of interactions between agents remains always the same. Then, we can state a result similar to Theorem [\ref=th:co]:

Under Assumptions [\ref=assum1] (Stochasticity), [\ref=assum2] (Invertibility and graph to matrix mapping) and [\ref=assum4] (Fast convergence), for almost all vectors of initial opinions x0, two agents i,j∈V asymptotically agree if and only if they are asymptotically connected.

The if part of the theorem is a consequence of Proposition [\ref=pro:con]. To prove the only if part, let us define the following set associated to a spanning subgraph G'∈S(G):

[formula]

Since V is a finite set, it is clear that W(G') is finite (it has less than 22n elements). Let (I,J)∈W(G'), [formula], [formula]. Since I and J are connected components of G', we have that PI(G') and PJ(G') are aperiodic irreducible row stochastic matrices. Let eI(G') and eJ(G') be the left Perron eigenvectors of PI(G') and PJ(G'), respectively:

[formula]

and

[formula]

We define the vector of [formula], cIJ whose coordinates are given by cIJ,vk = eI,k if vk∈I, cIJ,wk =  - eJ,k if wk∈J and cIJ,k = 0 if [formula]. We define the (n - 1)-dimensional subspace of [formula]:

[formula]

Finally, let us define the subset of [formula]:

[formula]

where Qt is the set of matrices defined in ([\ref=eq:qt]). S(G) is a finite set and for all G'∈S(G), W(G') is a finite set. Moreover for all [formula], Qt is a finite set. Then, X0 is a countable union of (n - 1)-dimensional subspaces of [formula]. Therefore X0 has Lebesgue measure 0.

Let [formula] be a vector of initial opinions, let us assume that there exist two agents i,j∈V that asymptotically agree but are asymptotically disconnected. Let us show that necessarily, x0 belongs to the set X0. Let I and J denote the connected components of G∞ containing i and j respectively. Since i and j are asymptotically disconnected, I  ≠  J, therefore (I,J)∈W(G∞). Since I is a connected component of G∞, it follows from Lemma [\ref=lemma] that for all t  ≥  T', xI(t + 1) = PI(G∞)xI(t). Moreover, PI(G∞) is an aperiodic irreducible row stochastic matrix and from the Perron-Frobenius Theorem (see e.g. [\cite=seneta1981]), it follows that 1 is a simple eigenvalue of PI(G∞) and all other eigenvalues of PI(G∞) have modulus strictly smaller than 1. Therefore,

[formula]

and x*i = eI(G∞)  ·  xI(T'). A similar discussion gives that x*j = eJ(G∞)  ·  xJ(T'). Since i and j asymptotically agree, we have eI(G∞)  ·  xI(T') = eJ(G∞)  ·  xJ(T'). This means that x(T')∈HI,J(G∞) and therefore

[formula]

which leads to x0∈X0.

In this section, we showed that asymptotic connectivity of agents implies asymptotic agreement and that under additional reasonable assumptions these are actually equivalent except for a set of vectors of initial opinions of Lebesgue measure 0. In other words, we can consider almost surely that the communities of agents correspond to the connected components of the graph G∞. Actually, we are confident that a similar result holds even without Assumptions [\ref=assum3] or [\ref=assum4]. However, in this case, the set X0 of initial opinions leading to agreement without connectivity is not necessarily a countable union of (n - 1)-dimensional subspaces, and it can have much more complex geometrical features. Therefore, we leave the generalization of the results presented in this section as future work.

In the following, under Assumptions [\ref=assum1] (Stochasticity), [\ref=assum2] (Invertibility and graph to matrix mapping) and [\ref=assum4] (Fast convergence), we show that an algebraic characterization of communities can be given in terms of eigenvalues of the matrix associated to the graph of communities [formula].

Algebraic Characterization of Communities

Let G'∈S(G), let I  ⊆  V be a subset of agents such that no agent in I is connected to an agent in [formula] in the graph G', then PI(G') is a row stochastic matrix. Let [formula] denote the eigenvalues of PI(G') with λ1(PI(G')) = 1 and

[formula]

Let [formula], then no agent in C is connected to an agent in [formula] in the graph [formula]. The following theorem gives a characterization of the communities in terms of the eigenvalues [formula] for [formula].

Under Assumptions [\ref=assum1] (Stochasticity), [\ref=assum2] (Invertibility and graph to matrix mapping) and [\ref=assum4] (Fast convergence), for almost all vectors of initial opinions x0, for all communities [formula], such that |C|  ≥  2,

[formula]

Let us consider a spanning subgraph G'∈S(G), let [formula], with |I|  ≥  2, be a connected component of G' then PI(G') is an aperiodic irreducible row stochastic matrix. Then, from the Perron-Frobenius Theorem, it follows that 1 is a simple eigenvalue of PI(G'). Therefore, λ2(PI(G'))  ≠  1. Let fI(G') be a left eigenvector of PI(G') associated to eigenvalue λ2(PI(G')). Let us define the vector of [formula], cI(G') whose coordinates are given by cI,vk(G') = fI,k(G') if vk∈I and cI,k(G') = 0 if [formula]. We define the (n - 1)-dimensional subspace of [formula]:

[formula]

Finally, let us define the subset of [formula]:

[formula]

where Qt is the set of matrices defined in ([\ref=eq:qt]). S(G) is a finite set and for all G'∈S(G), K(G') is a finite set. Moreover, for all [formula], Qt is a finite set. Then, Y0 is a countable union of (n - 1)-dimensional subspaces of [formula]. Therefore Y0 has Lebesgue measure 0.

Let X0 be given as in equation ([\ref=eq:X0]), let [formula] be a vector of initial opinions. Let us assume there is a community [formula] with |C|  ≥  2, such that [formula]. Let us show that necessarily, x0 belongs to the set Y0. First, since x0∉X0, we have from the proof of Theorem [\ref=th:co1] that C is a connected component of [formula]. Therefore, from Lemma [\ref=lemma], there exists [formula], such that for all t  ≥  T', [formula] and [formula] is an aperiodic irreducible row stochastic matrix. From the Perron-Frobenius Theorem, it follows that 1 is a simple eigenvalue of [formula] and all other eigenvalues of [formula] have modulus strictly smaller than 1. Let [formula] be the left Perron eigenvector of [formula]:

[formula]

Then

[formula]

Let us remark that for all t  ≥  T',

[formula]

Let [formula] be a left eigenvector of [formula] associated to eigenvalue [formula]:

[formula]

Then, it follows from equation ([\ref=eq:rec]) that for all t  ≥  T',

[formula]

Therefore, by the Cauchy-Schwarz inequality, we have for all t  ≥  T'

[formula]

Since we assumed [formula], we have for all t  ≥  T'

[formula]

Now, let us remark that it follows from Assumption [\ref=assum4] that for all [formula]

[formula]

Inequalities ([\ref=eq:ineq1]) and ([\ref=eq:ineq2]) give for all t  ≥  T'

[formula]

Since   <  ρ, the previous inequality holds for all t  ≥  T' if and only if [formula]. Therefore, [formula] which means that [formula]. Therefore,

[formula]

which leads to x0∈Y0. Therefore, we have proved that for all vectors of initial opinions [formula], for all communities [formula] such that [formula], [formula]. We conclude by remarking that [formula] is a set of Lebesgue measure 0.

In this section, we showed that the community structure [formula] satisfies some properties related to the eigenvalues of the matrix [formula], for [formula]. In the following, we use this result to address the problem of community detection in graphs.

Application: Community Detection in Graphs

In this section, we propose to use a model of opinion dynamics with decaying confidence to address the problem of community detection in graphs.

The Community Detection Problem

In the usual sense, communities in a graph are groups of vertices such that the concentration of edges inside one community is high and the concentration of edges between communities is comparatively low. Because of the increasing need of analysis tools for understanding complex networks in social sciences, biology, engineering or economics, the community detection problem has attracted a lot of attention in the recent years. The problem of community detection is however not rigorously defined mathematically. One reason is that community structures may appear at different scales in the graph: there can be communities inside communities. Another reason is that communities are not necessarily disjoint and can overlap. We refer the reader to the excellent survey [\cite=fortunato2009] and the references therein for more details. Some formalizations of the community detection problem have been proposed in terms of optimization of quality functions such as modularity [\cite=newman2004] or partition stability [\cite=lambiotte2009].

Quality functions

Modularity has been introduced in [\cite=newman2004], the modularity of a partition measures how well the partition reflects the community structure of a graph. More precisely, let G = (V,E) be an undirected graph with E symmetric and anti-reflexive. For a vertex i∈V the degree di of i is the number of neighbors of i in G. Let P be a partition of V. Essentially, the modularity [formula] of the partition P is the proportion of edges within the classes of the partition minus the expected proportion of such edges, where the expected number of edges between vertex i and j is assumed to be didj / |E|:

[formula]

where aij are the coefficients of the adjacency matrix of G (aij = 1 if (i,j)∈E, aij = 0 otherwise). The higher the modularity, the better the partition reflects the community structure of the graph. Thus, it is reasonable to formulate the community detection problem as modularity maximization. However, it has been shown that this optimization problem is NP-complete [\cite=brandes2008]. Therefore, approaches for community detection rely mostly on heuristic methods. In [\cite=newman2006], a modularity optimization algorithm is proposed based on spectral relaxations. Using the eigenvectors of the modularity matrix, it is possible to determine a good initial guess of the community structure of the graph. Then, the obtained partition is refined using local combinatorial optimization. In  [\cite=blondel2008], a hierarchical combinatorial approach for modularity optimization is presented. This algorithm which can be used for very large networks, is currently the one that obtains the partitions with highest modularity.

However, modularity has the drawback that it fails to capture communities at different scales. The notion of partition stability [\cite=lambiotte2009] makes it possible to overcome this limitation. Let us consider a continuous-time process associated with a random walk over the graph G where transitions are triggered by a homogeneous Poisson process. Assume that the initial distribution is the stationary distribution. Then, the stability at time [formula] of the partition P is defined as

[formula]

where p(I,t) is the probability for a walker to be in the class I initially and at time t. Stability measures the quality of a partition by giving a positive contribution to communities from which a random walker is unlikely to escape within the given time scale t. For small values of t, this gives more weights to small communities whereas for larger values of t, larger communities are favored. Thus, by searching the partitions maximizing the stability for several values of t, one can detect communities at several scales.

Eigenvalues of the normalized Laplacian matrix

We give an alternative formulation of the community detection problem using a measure of connectivity of graphs given by the eigenvalues of their normalized Laplacian matrix. Let G = (V,E) be an undirected graph with [formula], with n  ≥  2. For a vertex i∈V, the degree di(G) of i is the number of neighbors of i in G. The normalized Laplacian of the graph G is the matrix L(G) given by

[formula]

Let us review some of the properties of the normalized Laplacian matrix (see e.g. [\cite=chung1997]). μ1(L(G)) = 0 is always an eigenvalue of L(G), it is simple if and only if G is connected. All other eigenvalues are real and belong to the interval

[formula]

μ(P) = min μ(L(G)).

[formula]

Opinion Dynamics for Community Detection

Let α∈(0,1 / 2), we consider the opinion dynamics with decaying confidence model given by:

[formula]

where Ni(t) is given by equation ([\ref=eq:neigh2]). It is straightforward to check that this model is a particular case of the model given by equations ([\ref=eq:dynamics]) and ([\ref=eq:neigh]) and that Assumption [\ref=assum1] (Stochasticity) holds. Moreover, since α∈(0,1 / 2) it follows that for all i∈V, [formula], pii(t) > 1 / 2. Therefore the matrix P(t) is strictly diagonally dominant and hence it is invertible. Also, P(t) = P(G(t)), where for a subgraph G', P(G') = Id  -  αQ(G') where Id is the identity matrix and

[formula]

where di(G') denotes the degree of i in the graph G'. Therefore, Assumption [\ref=assum2] (Invertibility and graph to matrix mapping) holds as well. Let us remark that the matrix P(t) is generally not average preserving and therefore Assumption [\ref=assum3] does not hold.

Before stating the main result of this section, we need to prove the following lemma :

Let P be a partition of V, I∈P such that |I|  ≥  2. Then, λ is an eigenvalue of PI(GP) if and only if μ = (1 - λ) / α is an eigenvalue of L(GI).

First, let us remark that PI(GP) = Id - αQ(GI) where Q(GI) is defined as in equation ([\ref=eq:Q]). Then, let us introduce the matrices R(GI) and D(GI) defined by

[formula]

and

[formula]

Let us remark that L(GI) = D(GI)R(GI) and Q(GI) = R(GI)D(GI). It follows that L(GI) and Q(GI) have the same eigenvalues. The stated result is then obtained from the fact that the matrix Q(GI) = (Id - PI(GP)) / α.

We now state the main result of the section which is a direct consequence of Theorem [\ref=th:alg] and Lemma [\ref=lem:eig]:

Let ρ = 1 - αδ, under Assumption [\ref=assum4] (Fast convergence), for almost all vectors of initial opinions x0, the set of communities [formula] obtained by the opinion dynamics model ([\ref=eq:model2]) is a solution to Problem [\ref=prob].

Examples

In this section, we propose to evaluate experimentally the validity of our approach on three benchmarks taken from [\cite=newman2006].

Zachary karate club

We propose to evaluate our approach on a standard benchmark for community detection: the karate club network initially studied by Zachary in [\cite=zachary1977]. This is a social network with 34 agents shown on the top left part of Figure [\ref=fig]. The original study shows the existence of two communities represented on the figure by squares and triangles.

We propose to use our opinion dynamics model ([\ref=eq:model2]) to uncover the community structure of this network. We chose 4 different values for δ and 2 different values for parameters R and α. The parameter ρ was chosen according to Corollary [\ref=corol]: ρ = 1 - αδ. For each combination of parameter value, the model was simulated for 1000 different vectors of initial opinions chosen randomly in 34. Simulations were performed as long as enabled by floating point arithmetics.

The experimental results are reported in Table [\ref=tab1]. For each combination of parameter value, we indicate the partitions in communities that are the most frequently obtained after running the opinion dynamics model. For each partition [formula], we give the number of communities in the partition, the measure [formula], this value being greater than δ indicates that Problem [\ref=prob] has been solved. We computed the modularity [formula] in order to evaluate the quality of the obtained partition. We also indicate the number of times that each partition occurred over the 1000 simulations of the opinion dynamics model.

We can check in Table [\ref=tab1] that all the partitions are solutions of Problem [\ref=prob]. Let us remark that in general the computed partition depends on the initial vector of opinions, this is the case for δ = 0.3 and δ = 0.4. Also, changing the parameters R and α seems to have some effect on the probability of obtaining a given partition. For instance, for δ = 0.3, the probabilities of obtaining one partition are significantly different for R = 1 and R = 10. Also, for δ = 0.4, the probabilities are slightly different for α = 0.1 and α = 0.2.

However, it is interesting to note that the partitions that are obtained for the same value of parameter δ have modularities of the same order of magnitude which seems to show that these are of comparable quality. The partition with maximal modularity is obtained for δ = 0.4, it is a partition in 4 communities with modularity 0.417. As a comparison, algorithms [\cite=newman2006] [\cite=blondel2008] obtain a partition in 4 communities with modularity 0.419. This shows that our approach not only allows to solve Problem [\ref=prob] but also furnishes partitions with a good modularity which might seem surprising given the fact that our approach, contrarily to [\cite=newman2006] [\cite=blondel2008] does not try to maximize modularity.

In Figure [\ref=fig], we represented the graphs of communities [formula] that are the most frequently obtained for R = 1, α = 0.1 and the different values of δ. It is interesting to remark that for δ = 0.2 we almost obtained the communities that were reported in the original study [\cite=zachary1977]. Only one agent has been classified differently. One may argue that this agent has originally 4 neighbors in each community so it could be classified in one or the other. It is also interesting to see that our approach allows us to search for communities at different scales of the graph. When δ increases, the communities become smaller but more densely connected. This is corroborated by computing the stability of these partitions (see Figure [\ref=fig1a]). We can see that the partition with maximal stability changes according to time-scale t: for small values of t the partition in 4 communities is better, for intermediate values of t the partition in 3 communities has the largest stability, for large values of t the partition in 2 communities maximizes the stability.

Books on American Politics

We propose to use our approach on an example consisting of a network of 105 books on politics [\cite=newman2006], initially compiled by V. Krebs (unpublished, see +www.orgnet.com+). In this network, each vertex represents a book on American politics bought from Amazon.com. An edge between two vertices means that these books are frequently purchased by the same buyer. The network is presented on the top left part of Figure [\ref=fig2] where the shape of the vertices represent the political alignement of the book (liberal, conservative, centrist).

We used our opinion dynamics model ([\ref=eq:model2]) to uncover the community structure of this network. We chose 3 different values for δ and 2 different values for parameters R and α. The parameter ρ was chosen according to Corollary [\ref=corol]: ρ = 1 - αδ. For each combination of parameter value, the model was simulated for 1000 different vectors of initial opinions chosen randomly in 105. Simulations were performed as long as enabled by floating point arithmetics. The experimental results are reported in Table [\ref=tab2].

Let us remark that the computed partitions are solutions to the Problem [\ref=prob]. Also, for the same value of parameter δ, the modularity is very similar for all partitions. Actually, all the partitions obtained for the same value of δ are almost the same. As in the previous example, we can see that the choice of parameters R and α affects the probability of obtaining a given partition. The partition with maximal modularity is obtained for δ = 0.2, it is a partition in 4 communities with modularity 0.523. As a comparison, algorithms [\cite=newman2006] and [\cite=blondel2008] obtain partitions in 4 communities with modularity 0.526 and 0.527, respectively. As we can see, our partition has a modularity that is quite close from those obtained by these algorithms.

In Figure [\ref=fig2], we represented the graphs of communities [formula] that are the most frequently obtained for the different values of δ. Let us remark that even though the information on the political alignment of the books is not used by the algorithm, our approach allows to uncover this information. Indeed, for δ = 0.1, we obtain 2 communities that are essentially liberal and conservative. For δ = 0.2, we then obtain 4 communities: liberal, conservative, centrist-liberal, centrist-conservative.

In Figure [\ref=fig2a], we represented the stability of the partitions shown in Figure [\ref=fig2]. As in the previous example, we can see that the partition with maximal stability changes according to time-scale t which shows that our approach makes it possible to detect community at several scales using different values of parameter δ.

Political blogs

The last example we consider consists of a significantly larger network of 1222 political blogs [\cite=adamic2005]. In this network, an edge between two vertices means that one of the corresponding blogs contained a hyperlink to the other on its front page. We also have the information about the political alignment of each blog based on content: 636 are conservative, 586 are liberal.

The two previous examples show that the modularity of the obtained partitions does not depend much on the parameters R and α or on the vector of initial opinions. For this reason, we decided to apply our opinion dynamics model with parameters R = 1 and α = 0.1. We used 17 values of δ between 0.05 and 0.75. The parameter ρ was chosen according to Corollary [\ref=corol]: ρ = 1 - αδ. For each value of δ, the model was simulated only once for a vector of initial opinion chosen randomly in 1222. Simulations were performed as long as enabled by floating point arithmetics.

The partition with maximal modularity was obtained for δ = 0.4. It is a partition in 12 communities with modularity 0.426. There are 2 main communities: one with 653 blogs, from which 94% are conservative, and one with 541 blogs, from which 98% are liberal. The 28 remaining blogs are distributed in 10 tiny communities. When we progressively increase δ, we can see that the size of the two large communities reduces moderately but progressively until δ = 0.65 where the conservative community splits into several smaller communities, the largest one containing 40 blogs. The liberal community remains until δ = 0.725 where it splits into smaller communities, the largest one containing 54 blogs.

As a comparison, algorithm [\cite=newman2006] obtains a partition in 2 communities with modularity 0.426 whereas algorithm [\cite=blondel2008] obtains a partition in 9 communities with modularity 0.427. As we can see, the partition we obtain is very acceptable in terms of modularity.

In Table [\ref=tabsum], we give a comparative summary of the modularity of the partition obtained for the three examples by our approach and by the algorithms presented in [\cite=newman2006] [\cite=blondel2008]. Though slightly smaller, the modularity of the partition we obtain is comparable to that of other partitions which is actually surprising since our approach, contrarily to [\cite=newman2006] [\cite=blondel2008] does not try to maximize modularity.

Conclusion and Future Work

In this paper, we introduced and analyzed a model of opinion dynamics with decaying confidence where agents may only reach local agreements organizing themselves in communities. Under suitable assumptions, we have shown that these communities correspond to asymptotically connected components of the network. We have also provided an algebraic characterization of communities in terms of eigenvalues of the matrix defining the collective dynamics. To complete the analysis of our model, future work should focus on relaxing Assumption [\ref=assum4] by studying the model behavior when there is an agent i∈V that approaches its limit value at a rate exactly ρ:

[formula]

In the last part of the paper, we have applied our opinion dynamics model to address the problem of community detection in graphs. We believe that this new approach offers an appealing interpretation of community detection: communities are sets of agents that succeed to reach an agreement under some convergence rate constraint. We have shown on three examples that this approach is not only appealing but is also effective. In the future, we shall work on a distributed implementation of our approach. Let us remark that this should be feasible since our approach is by nature based on distributed computations. Then, we shall use our approach to analyze a number of networks including large scale networks.