Lemma Proposition Definition Corollary

Groups and Cantor sets

Semimetrics

Let X be a set. A nonnegative real-valued function d(x,y) on X  ×  X is said to be a semimetric on X, or equivalently a pseudometric on X, if d(x,x)  =  0 for every x∈X,

[formula]

for every x,y∈X, and

[formula]

for every x,y,z∈X. If in addition d(x,y)  =  0 only when x  =  y, then d(x,y) is a metric on X. The open ball in X centered at a point x∈X with radius r  >  0 corresponding to a semimetric d(  ·  ,  ·  ) on X is defined as usual by

[formula]

Similarly, the closed ball in X centered at x∈X with radius r  ≥  0 corresponding to d(  ·  ,  ·  ) is defined by

[formula]

Suppose that V is a vector space over the real or complex numbers. A nonnegative real-valued function N(v) on V is said to be a seminorm on V if

[formula]

for every v∈V and [formula] or [formula], as appropriate, and

[formula]

for every v,w∈V. Here |t| denotes the absolute value of t in the real case, and the modulus of t in the complex case. If N(v)  >  0 when v  ≠  0, then N(v) is a norm on V. Thus

[formula]

is a semimetric on V when V is a seminorm on V, and is a metric on V when N(v) is a norm on V.

If d(x,y) is a metric on a set X, then there is a standard Hausdorff topology on X associated to d(x,y), in which the open balls in X with respect to d(x,y) are open sets, and the collection of all such open balls forms a base for the topoology on X. In the same way, a semimetric on X defines a topology on X that may not be Hausdorff, which is generated by the corresponding collection of open balls. Suppose now that I is a nonempty set, and that dj(x,y) is a semimetric on X for each j∈I. Let

[formula]

be the open ball in X centered at x∈X with radius r  >  0 corresponding to dj(  ·  ,  ·  ) for each j∈I. One can define a topology on X by saying that a set U  ⊆  X is an open set if for each x∈U there are finitely many elements [formula] of I and positive real numbers [formula] such that

[formula]

It is easy to see that this is a topology on X, and that the open balls associated to dj(x,y) are open sets in this topology for each j∈I. In order for this topology on X to be Hausdorff, it suffices that for each x,y∈X with x  ≠  y there be a j∈I such that dj(x,y)  >  0.

If d(x,y) is a semimetric on a set X and t is a positive real number, then

[formula]

is also a semimetric on X. Of course, this is a metric on X when d(x,y) is a metric on X. Let B(x,r) be the open ball in X centered at x∈X with radius r  >  0 associated to d(  ·  ,  ·  ), as in ([\ref=B(x] [\ref=r)_=_{y_in_X_:_d(x] [\ref=y)_<_r}]), and let

[formula]

be the open ball corresponding to d'(  ·  ,  ·  ). By construction,

[formula]

for every x∈X and r  >  0 such that r  ≤  t, while

[formula]

for every x∈X when r  >  t. It follows that the topology on X determined by d'(x,y) is the same as the topology determined by d(x,y).

Similarly, let I be a nonempty set, and let dj(x,y) be a semimetric on X for each j∈I. If tj is a positive real number for each j∈I, then

[formula]

is a semimetric on X for each j∈I, as before. The topology on X determined by the semimetrics dj(x,y), j∈I, is the same as the topology determined by the semimetrics dj'(x,y), j∈I. One can also multiply semimetrics by positive real numbers, without affecting the resulting topologies.

Suppose that I is a nonempty finite set, and let dj(x,y) be a semimetric on a set X for each j∈I. Under these conditions,

[formula]

is a semimetric on X, and the topology on X associated to d(x,y) is the same as the topology determined by the collection of semimetrics dj(x,y), j∈I. More precisely, if B(x,r) and Bj(x,r) are as in ([\ref=B(x] [\ref=r)_=_{y_in_X_:_d(x] [\ref=y)_<_r}]) and ([\ref=B_j(x] [\ref=r)_=_{y_in_X_:_d_j(x] [\ref=y)_<_r}]), respectively, then

[formula]

for each x∈X and r  >  0. Note that d(x,y) is a metric on X when for each x,y∈X with x  ≠  y there is a j∈I such that dj(x,y)  >  0.

Now let [formula] be an infinite sequence of semimetrics on a set X. Also let [formula] be a sequence of positive real numbers that converges to 0, and let dj'(x,y) be the semimetric on X given in ([\ref=d_j'(x] [\ref=y)_=_min(d_j(x] [\ref=y)] [\ref=t_j)]) for each positive integer j. Put

[formula]

for each x,y∈X, which is equal to 0 when dj'(x,y)  =  0 for each j, or equivalently when dj(x,y)  =  0 for each j. Otherwise, if dl'(x,y)  >  0 for some l, then

[formula]

for all sufficiently large j, which implies that the maximum in ([\ref=d(x] [\ref=y)_=_max_{j_ge_1}_d_j'(x] [\ref=y)]) is attained. It is easy to see that ([\ref=d(x] [\ref=y)_=_max_{j_ge_1}_d_j'(x] [\ref=y)]) is a semimetric on X, which is a metric on X when for each x,y∈X with x  ≠  y there is a j  ≥  1 such that dj'(x,y)  >  0.

Let B(x,r) be the open ball in X with center x∈X and radius r  >  0 associated to ([\ref=d(x] [\ref=y)_=_max_{j_ge_1}_d_j'(x] [\ref=y)]), as in ([\ref=B(x] [\ref=r)_=_{y_in_X_:_d(x] [\ref=y)_<_r}]), and let

[formula]

be the open ball corresponding to dj'(  ·  ,  ·  ) for each j  ≥  1. By construction,

[formula]

for each x∈X and r  >  0, and Bj'(x,r)  =  X when tj  <  r. It follows that

[formula]

when n is sufficiently large so that tj  <  r for each j  >  n. Using this, one can check that the topology on X determined by ([\ref=d(x] [\ref=y)_=_max_{j_ge_1}_d_j'(x] [\ref=y)]) is the same as the topology determined by the sequence of semimetrics dj'(x,y), which is the same as the topology on X determined by the original sequence of semimetrics dj(x,y).

Let I be a nonempty set again, and let dj(  ·  ,  ·  ) be a semimetric on a set Xj for each j∈I. Also let [formula] be the Cartesian product of the Xj's, j∈I. An element of X may be denoted x  =  {xj}j∈I, where xj∈Xj for each j∈I. Put

[formula]

for each x,y∈X and j∈I, which defines a semimetric on X for each j∈I. The topology on X determined by the collection of semimetrics [formula], j∈I, is the same as the product topology on X that corresponds to the topologies on the Xj's associated to the semimetrics dj(  ·  ,  ·  ).

Let a, b be nonnegative real numbers, and let α be a positive real number less than or equal to 1. Observe that

[formula]

and hence that

[formula]

This implies that

[formula]

If d(x,y) is a semimetric on a set X, then it follows that d(x,y)α is also a semimetric on X when 0  <  α  ≤  1, which is a metric on X when d(x,y) is a metric on X. Note that d(x,y)α determines the same topology on X as d(x,y), and there is an analogous statement for collections of semimetrics.

Ultrametrics

A metric d(x,y) on a set X is said to be an ultrametric if

[formula]

for every x,y,z∈X, which automatically implies the usual version ([\ref=d(x] [\ref=z)_le_d(x] [\ref=y)_+_d(y] [\ref=z)]) of the triangle inequality. Similarly, a semimetric d(x,y) may be called a semi-ultrametric if it satisfies ([\ref=d(x] [\ref=z)_le_max(d(x] [\ref=y)] [\ref=d(y] [\ref=z))]) for every x,y,z∈X. The discrete metric on any set X is an ultrametric, which is defined as usual by putting d(x,y)  =  1 when x  ≠  y and d(x,x)  =  0. If d(x,y) is any semi-ultrametric on a set X and t  >  0, then ([\ref=d'(x] [\ref=y)_=_min(d(x] [\ref=y)] [\ref=t)]) is a semi-ultrametric on X, as is t  d(x,y). It is easy to see that d(x,y)α is also a semi-ultrametric on X for every α  >  0, which is a bit simpler than the situation for ordinary semimetrics.

Let I be a nonempty set, and suppose that dj(x,y) is an semi-ultrametric on a set X for each j∈I. If I has only finitely many elements, then the maximum ([\ref=d(x] [\ref=y)_=_max_{j_in_I}_d_j(x] [\ref=y)]) of dj(x,y) over j∈I is a semi-ultrametric on X too. Suppose instead that I is the set [formula] of positive integers, and that [formula] is a sequence of positive real numbers that converges to 0. In this case, ([\ref=d(x] [\ref=y)_=_max_{j_ge_1}_d_j'(x] [\ref=y)]) is a semi-ultrametric on X as well. In particular, this can be applied to the Cartesian product of a sequence of sets, each of which is equipped with the discrete metric, and using the corresponding sequence of semi-ultrametrics on the product, as in ([\ref=widetilde{d}_j(x] [\ref=y)_=_d_j(x_j] [\ref=y_j)]).

Let d(x,y) be a semimetric on a set X, and suppose that x,z∈X, r  >  0, and d(x,y)  <  r. Thus t  =  r  -  d(x,y)  >  0, and it is easy to see that

[formula]

by the triangle inequality. However, if d(  ·  ,  ·  ) is a semi-ultrametric on X, then ([\ref=B(z] [\ref=t)_subseteq_B(x] [\ref=r)]) holds with t  =  r. Using this, one can check that B(x,r) contains all of its limit points in X, so that B(x,r) is both open and closed with respect to the topology on X determined by d(  ·  ,  ·  ). Similarly,

[formula]

for every x,z∈X and r  ≥  0 such that d(x,z)  ≤  r when d(  ·  ,  ·  ) is a semi-ultrametric on X. This implies that [formula] is also both open and closed in X, with respect to the topology determined by d(  ·  ,  ·  ). If d(  ·  ,  ·  ) is an ultrametric on X, then it follows that X is totally disconnected with respect to the topology determined by d(  ·  ,  ·  ), in the sense that there are no connected subsets of X with more than one element.

Let X be a set, and let Δ be the diagonal subset of X  ×  X, consisting of all ordered pairs (x,x) with x∈X. If A, B are any subsets of X  ×  X, then put

[formula]

and

[formula]

Suppose that d(x,y) is a semimetric on X, and put

[formula]

for each r  >  0. It is easy to see that

[formula]

for each r  >  0,

[formula]

when 0  <  r  ≤  t, and that

[formula]

for every r,t  >  0, by the triangle inequality. If d(x,y) is a semi-ultrametric on X, then we have that

[formula]

for every r  >  0.

As in [\cite=jk], a uniformity on a set X is a nonempty collection U of subsets of X  ×  X with the following properties. First, if U,V∈U, then

[formula]

Second, for each U∈U there should be a V∈U such that

[formula]

Note that this implies that V  ⊆  U, because Δ  ⊆  V, as in ([\ref=Delta_subseteq_U] [\ref=widetilde{U}_in_mathcal{U}] [\ref=and_U_cap_V_in_mathcal{U}]). Third, if U∈U and U  ⊆  W  ⊆  X  ×  X, then W∈U. Thus X  ×  X∈U, because [formula]. A set X with a uniformity U is said to be a uniform space. Roughly speaking, each element of U determines a neighborhood around each point in X, which can be used to define a topology on X in particular.

Let d(x,y) be a semimetric on a set X, and let Ur be as in ([\ref=U_r_=_{(x] [\ref=y)_in_X_times_X_:_d(x] [\ref=y)_<_r}]) for each r  >  0. It is easy to see that the collection U of subsets U of X  ×  X such that Ur  ⊆  U for some r  >  0 is a uniformity on X. Similarly, let I be a nonempty set, and suppose that dj(x,y) is a semimetric on X for each j∈I. Put

[formula]

for each j∈I and r  >  0, as in ([\ref=U_r_=_{(x] [\ref=y)_in_X_times_X_:_d(x] [\ref=y)_<_r}]). To get a uniformity on X, one can take the collection of all subsets U of X  ×  X for which there are finitely many elements [formula] of I and finitely many positive real numbers [formula] such that

[formula]

In both cases, the topology on X associated to the uniformity is the same as the one determined by the initial semimetric or collection of semimetrices on X. Conversely, it is well known that any uniformity on X corresponds to a collection of semimetrics on X in this way.

A subset B of a uniformity U on a set X is said to be a base for U if each element of U contains an element of B as a subset. If U is the uniformity determined by a semimetric d(x,y) on X as before, then the collection of subsets Ur of X  ×  X with r  >  0 is a base for U. Similarly, the collection of subsets Ur of X  ×  X with r  =  1 / n for some positive integer n is also a base for this uniformity. Conversely, if there is a base B for a uniformity U on X such that B has only finitely or countably many elements, then it is well known that there is a semimetric on X for which U is the corresponding uniformity.

If U is a subset of X  ×  X for some set X and Δ  ⊆  U, then

[formula]

In particular, if U  ⊆  X  ×  X satisfies

[formula]

then [formula]. If U,V  ⊆  X  ×  X both satisfy ([\ref=Delta_subseteq_U_and_U_circ_U_subseteq_U]), then it is easy to see that [formula] and [formula] satisfy ([\ref=Delta_subseteq_U_and_U_circ_U_subseteq_U]) too. It follows that [formula] satisfies ([\ref=Delta_subseteq_U_and_U_circ_U_subseteq_U]) when U satisfies ([\ref=Delta_subseteq_U_and_U_circ_U_subseteq_U]), and [formula] automatically. Note that U  ⊆  X  ×  X satisfies

[formula]

exactly when U corresponds to an equivalence relation on X. In this case,

[formula]

defines a semi-ultrametric on X. Of course, if d(x,y) is any semi-ultrametric on X, then the set Ur in ([\ref=U_r_=_{(x] [\ref=y)_in_X_times_X_:_d(x] [\ref=y)_<_r}]) satisfies ([\ref=Delta_subseteq_U] [\ref=widetilde{U}_=_U] [\ref=and_U_circ_U_subseteq_U]) for each r  >  0, by ([\ref=Delta_subseteq_U_r_=_widetilde{U_r}]) and ([\ref=U_r_circ_U_r_subseteq_U_r]).

Let U be a uniformity on X, and let B be a base for U. Thus Δ  ⊆  U for every U∈B  ⊆  U, by definition of a uniformity. If we also have that [formula] and [formula] for each U∈B, then U is the same as the uniformity corresponding to the collection of semi-ultrametrics dU(x,y) as in ([\ref=d_U(x] [\ref=y)_=_0_when_(x] [\ref=y)_in_U] [\ref=...]) with U∈B. It follows that U is the uniformity corresponding to a single semi-ultrametric d(x,y) when U satisfies this condition and has only finitely or countably many elements, by the usual arguments. If B is any base for U, then

[formula]

is also a base for B, and [formula] for every W∈B1. If B is a base for U such that [formula] for every U∈B, then [formula] and [formula] for every W∈B1, by the remarks in the preceding paragraph. Hence the previous observations about semi-ultrametrics can be applied to B1 instead of B.

p-Adic numbers

Let p be a prime number, and let |x|p be the p-adic absolute value on the field [formula] of rational numbers. Thus |x|p  =  0 when x  =  0, and otherwise x can be expressed as pj  a  /  b for some integers a, b, and j, where a and b are nonzero and not integer multiples of p. In this case,

[formula]

It is well known and easy to see that

[formula]

and

[formula]

for every [formula]. The p-adic metric is defined on [formula] by

[formula]

and this is an ultrametric on [formula], because of ([\ref=|x_+_y|_p_le_max(|x|_p] [\ref=|y|_p)]).

The field [formula] of p-adic numbers can be obtained by completing [formula] as a metric space with respect to the p-adic metric, in essentially the same way that the field [formula] of real numbers can be obtained by completing [formula] with respect to the standard metric. In particular, the p-adic absolute value and metric have natural extensions to [formula] with the same properties as before, and the field operations on [formula] are continuous with respect to the p-adic metric. It follows that

[formula]

is a closed sub-ring of [formula], known as the ring of p-adic integers. This contains the usual ring [formula] of integers by definition of the p-adic absolute value, and one can show that [formula] is the same as the closure of [formula] in [formula]. Note that |x|p is an integer power of p for every [formula] with x  ≠  0.

If [formula], then put

[formula]

This is a closed subgroup of [formula] as a commutative group with respect to addition for each [formula], and an ideal in [formula] when j  ≥  0. If j  ≥  0, then the inclusions [formula] and [formula] lead to a ring homomorphism from [formula] into [formula], and one can check that this homomorphism is an isomorphism. In particular, [formula] has exactly pj elements for each nonnegative integer j, so that [formula] is the union of pj pairwise-disjoint translates of [formula]. This implies that [formula] is totally bounded in [formula], and hence that [formula] is compact, since [formula] is also a closed set in [formula] and [formula] is compact. It follows that [formula] is a compact set in [formula] for every [formula], and that closed and bounded sets in [formula] are compact. If H is Haar measure on [formula] normalized so that [formula], then

[formula]

for each [formula].

Ultranorms

Let p be a prime number, and let V be a vector space over the p-adic numbers [formula]. A nonnegative real-valued function N(v) on V is said to be an ultranorm on V if N(v)  >  0 when v  ≠  0,

[formula]

for every v∈V and [formula], and

[formula]

for every v,w∈V. In this case, it is easy to see that

[formula]

is an ultrametric on V, and that addition and scalar multiplication on V are continuous with respect to the topology determined by ([\ref=d(v] [\ref=w)_=_N(v_-_w)] [\ref=2]).

Let n be a positive integer, and let [formula] be the space of n-tuples of p-adic numbers, which is a vector space over [formula] with respect to coordinatewise addition and scalar multiplication. Put

[formula]

for each [formula], which clearly defines an ultranorm on [formula]. Note that the topology on [formula] determined by N is the same as the product topology corresponding to the topology on [formula] determined by the p-adic metric.

Similarly, let [formula] be the space of n  ×  n matrices with entries in [formula], which is a vector space over [formula] with respect to entry-wise addition and scalar multiplication. Put

[formula]

for each [formula], which defines an ultranorm on [formula]. Of course, we can identify [formula] with [formula] in an obvious way, so that ([\ref=||A||_=_max_{1_le_j] [\ref=k_le_n}_|a_{j] [\ref=k}|_p]) corresponds to the standard ultranorm defined in the previous paragraph. If A  =  {aj,k}nj,k  =  1 and B  =  {bj,k}nj,k  =  1 are elements of [formula], then their product A  B  =  C  =  {cj,l}nj,l  =  1 can be defined as usual by

[formula]

Observe that

[formula]

for each [formula], which implies that

[formula]

Let Â be the linear mapping from [formula] into itself corresponding to [formula], so that the jth component of Â(v) is equal to

[formula]

for each [formula] and [formula]. If B  =  {bj,k}nj,k  =  1 is another element of [formula], then

[formula]

for every [formula], so that matrix multiplication corresponds to composition of linear mappings in the usual way. It follows from ([\ref=(widehat{A}(v))_j_=_sum_{k_=_1}^n_a_{j] [\ref=k}_v_k]) that

[formula]

for each [formula] and [formula], which implies that

[formula]

for every [formula], where N(v) is as in ([\ref=N(v)_=_max(|v_1|_p] [\ref=ldots] [\ref=|v_n|_p)]). It is easy to see that [formula] is the smallest nonnegative real number with this property, by considering the case where v is a standard basis vector for [formula], with one component equal to 1 and the rest equal to 0. Thus [formula] is the same as the operator norm of Â with respect to the standard ultranorm N(v) on [formula].

Topological groups

Let G be a topological group, so that G is both a group and a topological space, and the group operations are continuous. It is customary to ask also that the set consisting of the identity element e in G be a closed set, which implies that G is Hausdorff as a topological space. Using multiplicative notation for the group operations, a semimetric d(x,y) on G is said to be invariant under left translations on G if

[formula]

for every a,x,y∈G. Similarly, d(x,y) is invariant under right translations on G if

[formula]

for every b,x,y∈G. Note that d(x,y) is invariant under left translations if and only if d(x- 1,y- 1) is invariant under right translations, and that the discrete metric on G is invariant under both left and right translations.

It is well known that there is a collection of left-invariant semimetrics on G that determines the same topology for G. If there is a local base for the topology of G at e with only finitely or countably many elements, then there is a left-invariant metric on G that determines the same topology. More precisely, if there is a local base for the topology of G at e with only finitely many elements, then {e} is an open set in G, so that G is equipped with the discrete topology, and one can simply use the discrete metric on G. One can define a left-invariant uniformity on G more directly which is compatible with the given topology, and with any collection of left-invariant semimetrics on G that determines the same topology. There are analogous statements for right-invariant semimetrics, which can be derived from the previous statements for left-invariant semimetrics using the mapping x  ↦  x- 1.

Let d(x,y) be a left-invariant semimetric on a group G, and put

[formula]

for each x∈G. Thus r(x) is a nonnegative real-valued function on G, r(e)  =  0, and we can use the symmetry and left-invariance of d(x,y) to get that

[formula]

for each x∈G. Similarly,

[formula]

for every x,y∈G, using the triangle inequality and left-invariance. If d(x,y) is a left-invariant semi-ultrametric on G, then

[formula]

for every x,y∈G.

Conversely, suppose that r(x) is a nonnegative real-valued function on G such that r(e)  =  0,

[formula]

for every x∈G, and

[formula]

for every x,y∈G. Under these conditions, one can check that

[formula]

defines a left-invariant semimetric on G. If r(x) also satisfies

[formula]

for every x,y∈G, then ([\ref=d(x] [\ref=y)_=_r(y^{-1}_x)]) defines a semi-ultrametric on G. Of course, if r(x) is as in ([\ref=r(x)_=_d(x] [\ref=e)]) for some left-invariant semimetric d(x,y) on G, then ([\ref=d(x] [\ref=y)_=_r(y^{-1}_x)]) holds for every x,y∈G.

If d(x,y) is instead a right-invariant semimetric on G, then ([\ref=r(x)_=_d(x] [\ref=e)]) still satisfies r(e)  =  0, ([\ref=r(x)_=_r(x^{-1})]), and ([\ref=r(x_y)_le_r(x)_+_r(y)]). This can be verified in the same way as before, or using the fact that d(x- 1,y- 1) is a left-invariant semimetric. If d(x,y) is a right-invariant semi-ultrametric on G, then ([\ref=r(x_y)_le_max(r(x)] [\ref=r(y))]) holds as well. Conversely, if r(x) is a nonnegative real-valued function on G that satisfies r(e)  =  0, ([\ref=r(x)_=_r(x^{-1})]), and ([\ref=r(x_y)_le_r(x)_+_r(y)]), then

[formula]

defines a right-invariant semimetric on G. If r(x) also satisfies ([\ref=r(x_y)_le_max(r(x)] [\ref=r(y))]), then ([\ref=d(x] [\ref=y)_=_r(x_y^{-1})]) is a semi-ultrametric on G. As before, if r(x) is as in ([\ref=r(x)_=_d(x] [\ref=e)]) for some right-invariant semimetric d(x,y) on G, then ([\ref=d(x] [\ref=y)_=_r(x_y^{-1})]) holds for every x,y∈G. Note that ([\ref=d(x] [\ref=y)_=_r(y^{-1}_x)]) and ([\ref=d(x] [\ref=y)_=_r(x_y^{-1})]) correspond to each other under the mapping x  ↦  x- 1, because of ([\ref=r(x)_=_r(x^{-1})]).

If d(x,y) is a semimetric on G that is invariant under both left and right translations, then ([\ref=r(x)_=_d(x] [\ref=e)]) has the additional property that

[formula]

for every a,x∈G. This is equivalent to the condition that

[formula]

for every x,y∈G. Conversely, if r(x) is a nonnegative real-valued function on G that satisfies r(e)  =  0, ([\ref=r(x)_=_r(x^{-1})]), ([\ref=r(x_y)_le_r(x)_+_r(y)]), and ([\ref=r(x_y)_=_r(y_x)]), then ([\ref=d(x] [\ref=y)_=_r(y^{-1}_x)]) and ([\ref=d(x] [\ref=y)_=_r(x_y^{-1})]) are equal to each other, and hence define a semimetric on G that is invariant under both left and right translations.

Let us say that a semimetric d(x,y) on a topological group G is compatible with the topology on G if every open ball in G with respect to d(x,y) is an open set in G. This is equivalent to asking that each open ball in G with respect to d(x,y) contain an open set in G that contains the center of the ball. If d(x,y) is invariant under left or right translations on G, then it suffices to check this condition for balls centered at e. Alternatively, this means that every open set in G with respect to the topology determined by d(x,y) is also an open set with respect to the given topology on G. In particular, if the topology on G is determined by a collection of semimetrics, then each of the semimetrics in the collection is compatible with the topology on G in this sense.

Small open subgroups

Let G be a group, and let d(x,y) be a semi-ultrametric on G that is invariant under left or right translations. Also let r(x) be as in ([\ref=r(x)_=_d(x] [\ref=e)]), so that r(x) is a nonnegative real-valued function on G that satisfies r(e)  =  0, ([\ref=r(x)_=_r(x^{-1})]), and ([\ref=r(x_y)_le_max(r(x)] [\ref=r(y))]). If t is a positive real number, then it follows that

[formula]

is a subgroup of G. This is the same as the open ball in G centered at e with radius t with respect to d(x,y), which is an open set in G when G is a topological group and d(x,y) is compatible with the topology on G. If d(x,y) is invariant under both left and right translations on G, then r(x) satisfies ([\ref=r(a_x_a^{-1})_=_r(x)]), and hence ([\ref=U_t_=_{x_in_G_:_r(x)_<_t}]) is a normal subgroup in G for each t  >  0.

Suppose that U is a subgroup of G, and let rU(x) be the indicator function associated to U on G, which is equal to 0 when x∈U and to 1 when x∈G is not in U. Thus rU(x) satisfies rU(e)  =  0, ([\ref=r(x)_=_r(x^{-1})]), and ([\ref=r(x_y)_le_max(r(x)] [\ref=r(y))]), which implies that ([\ref=d(x] [\ref=y)_=_r(y^{-1}_x)]) and ([\ref=d(x] [\ref=y)_=_r(x_y^{-1})]) are semi-ultrametrics on G that are invariant under left and right translations, respectively. If G is a topological group and U is an open subgroup of G, then these semi-ultrametrics are compatible with the topology on U. If U is a normal subgroup of G, then ([\ref=d(x] [\ref=y)_=_r(y^{-1}_x)]) and ([\ref=d(x] [\ref=y)_=_r(x_y^{-1})]) are equal to each other, and hence define a semi-ultrametric on G that is invariant under both left and right translations.

Let us say that a topological group G has small open subgroups if there is a local base for the topology of G at e consisting of open subgroups of G. This happens if and only if there is a collection of semi-ultrametrics on G that are invariant under left or right translations and which determine the same topology on G, by the remarks in the previous paragraphs. If there is a countable local base for the topology of G consisting of open subgroups, then there is an ultrametric on G that determines the same topology on G and which is invariant under left translations, or under right translations. If G has small open subgroups, then G is totally disconnected, and in fact has topological dimension 0. Conversely, if G is locally compact and totally disconnected, then it is well known that G has small open subgroups.

Similarly, let us say that G has small open normal subgroups if there is a local base for the topology of G consisting of open normal subgroups of G. As before, this happens if and only if there is a collection of semi-ultrametrics on G that are invariant under both left and right translations and which determine the same topology on G, by the remarks at the beginning of the section. If there is a countable local base for the topology of G consisting of open normal subgroups of G, then there is an ultrametric on G that is invariant under both left and right translations and which determines the same topology on G.

If G is any group equipped with the discrete topology, then {e} is an open normal subgroup of G, so that G has small open subgroups in particular. If G is a product of discrete groups with the product topology, then G has small open normal subgroups, and the discrete metrics on the factors lead to semimetrics on G, as in ([\ref=widetilde{d}_j(x] [\ref=y)_=_d_j(x_j] [\ref=y_j)]). Each of these semimetrics is invariant under both left and right translations on G, and the collection of these semimetrics determines the product topology on G, as before. Of course, the product of finitely many discrete groups is also discrete. If G is the product of countably many nontrivial discrete groups, then there is a countable local base for the topology of G at e consisting open normal subgroups of G, and there is an ultrametric on G that is invariant under both left and right translations and which determines the product topology on G.

Let p be a prime number, and consider [formula] as a commutative topological group with respect to addition. Clearly [formula] has small open subgroups, because [formula] is an open subgroup of [formula] for each integer j. The p-adic metric on [formula] is a traslation-invariant ultrametric on [formula].

The group [formula] of nonzero p-adic numbers with respect to multiplication is also a commutative topological group, and

[formula]

is an open subgroup of [formula]. Similarly,

[formula]

is an open subgroup of [formula] for each positive integer j, so that [formula] has small open subgroups too.

Observe that the p-adic metric ([\ref=d_p(x] [\ref=y)_=_|x_-_y|_p]) satisfies

[formula]

for every [formula] with |a|p  =  1. In particular, the restriction of dp(x,y) to [formula] with |x|p  =  |y|p  =  1 is a translation-invariant ultrametric on ([\ref={x_in_{bf_Q}_p_:_|x|_p_=_1}]) as a compact commutative topological group with respect to multiplication.

Put

[formula]

for each [formula], so that rp(1 / x)  =  rp(x) by construction. Equivalently,

[formula]

when |x|p  =  1, and otherwise

[formula]

when |x|p  ≠  1. If [formula] satisfy |x|p  =  |y|p  =  1, then

[formula]

Note that rp(1)  =  0, and that rp(x)  >  0 when x  ≠  1.

Let t be a real number such that 1  ≤  t  ≤  p, and put

[formula]

for each [formula]. Thus

[formula]

when |x|p  =  1, and

[formula]

when |x|p  ≠  1. Let us check that

[formula]

for every [formula]. If |x|p  =  |y|p  =  1, then this reduces to ([\ref=r_p(x_y)_=_|x_y_-_1|_p_le_..._=_max(r_p(x)] [\ref=r_p(y))]), by ([\ref=r_p'(x)_=_r_p(x)]). Otherwise, if |x|p  ≠  1 or |y|p  ≠  1, then the right side of ([\ref=r_p'(x_y)_le_max(r_p'(x)] [\ref=r_p'(y))]) is equal to t, so that ([\ref=r_p'(x_y)_le_max(r_p'(x)] [\ref=r_p'(y))]) holds trivially. Of course, rp'(1 / x)  =  rp'(x) for each [formula], because of the analogous property for rp(x). Similarly, rp'(1)  =  0, and rp'(x)  >  0 for each [formula] with x  ≠  1.

It follows that

[formula]

defines a translation-invariant ultrametric on [formula], as a commutative group with respect to multiplication. If |x|p  =  |y|p, then |x  /  y|p  =  1, and hence

[formula]

Otheriwse, if |x|p  ≠  |y|p, then dp'(x,y)  =  t, by ([\ref=r_p'(x)_=_t]). Note that |x|p  =  |y|p when |x  -  y|p  <   max (|x|p,|y|p), because of the ultrametric version of the triangle inequality. This shows that the topology on [formula] determined by dp'(x,y) is the same as the topology induced by the usual one on [formula].

Large compact subgroups

Let us say that a topological group G has large compact subgroups if every compact set in G is contained in a compact subgroup of G. Similarly, G has large compact open subgroups if every compact set in G is contained in a compact open subgroup of G. If a subgroup H of G contains a nonempty open set, then H is an open set as well. In particular, if a locally compact topological group G has large compact subgroups, then it automatically has large compact open subgroups. Of course, there are analogous conditions using compact normal subgroups, and compact topological groups have all of these properties trivially.

Observe that [formula] has large compact subgroups as a commutative topological group with respect to addition for each prime number p. More precisely, [formula] is a compact open subgroup of [formula] for each integer j, and every compact set in [formula] is contained in [formula] for some j. However, the multiplicative group [formula] of nonzero complex numbers does not have large compact subgroups. Indeed, if [formula] and |x|p  ≠  1, then there is no compact subgroup of [formula] that contains x. The additive group [formula] of integers does not have large compact subgroups with respect to the discrete topology, since {0} is the only compact subgroup of [formula].

Let G be a topological group, and let d(x,y) be a semimetric on G which is compatible with the topology on G. Note that

[formula]

for every x,y,z∈G, because of the triangle inequality. This implies that for each x∈G, d(x,y) is a continuous function of y on G, when d(x,y) is compatible with the topology on G. It follows that for each y∈G, d(x,y) is a continuous function of x on G, and one can also check that d(x,y) is continuous as a function of x and y on G  ×  G. In particular, compact subsets of G are bounded with respect to d(x,y) under these conditions.

Let us say that d(x,y) is proper on G if closed subsets of G that are bounded with respect to d(x,y) are compact with respect to the topology on G. Of course, closed balls with respect to d(x,y) are closed sets in G when d(x,y) is compatible with the topology on G, and hence they are compact when d(x,y) is proper, since they are automatically bounded with respect to d(x,y). Conversely, if closed balls with respect to d(x,y) are compact in G, then d(x,y) is proper on G, because closed subsets of compact sets are compact.

Suppose that d(x,y) is a semi-ultrametric on a topological group G which is compatible with the topology on G, proper, and invariant under left or right translations. This implies that open and closed balls in G with respect to d(x,y) centered at e are subgroups of G, as before. Remember that open and closed balls with respect to d(x,y) are each both open and closed with respect to the topology defined by d(x,y), because d(x,y) is a semi-ultrametric. Thus open and closed balls with respect to d(x,y) are each both open and closed with respect to the topology on G, since d(x,y) is compatible with the topology on G. It follows that open and closed balls with respect to d(x,y) are compact subsets of G, because d(x,y) is also proper. Every compact set in G is contained in a ball with respect to d(x,y) centered at e, and so G has large compact open subgroups under these conditions. Similarly, if d(x,y) is invariant under both left and right translations, then G has large compact open normal subgroups.

Suppose now that G is a topological group, and that [formula] is a sequence of compact open subgroups of G such that Uj  ⊆  Uj  +  1 for each [formula] and [formula]. This implies that each compact set K  ⊆  G is contained in the union of finitely many Uj's, and hence that K  ⊆  Uj for some j, so that G has large compact open subgroups. If Uj is also a normal subgroup of G for each j, then it follows that G has large compact open normal subgroups. If d(x,y) is a semi-ultrametric on G which is compatible with the topology on G, proper, and invariant under left or right translations, as in the previous paragraph, then one can take a sequence of balls centered at e with respect to d(x,y) with increasing radii tending to infinity.

Let rj(x)  =  rUj(x) be the indicator function on G associated to Uj, which is equal to 0 when x∈Uj and to 1 when x∈G is not in Uj. Also let [formula] be a monotone increasing sequence of nonnegative real numbers tending to infinity, and put

[formula]

for each x∈G. By hypothesis, each x∈G is contained in Uj for all but finitely many j, so that rj(x)  =  0 for all but finitely many j, and hence the maximum in ([\ref=r(x)_=_max_{j_ge_1}_t_j_r_j(x)]) exists. Clearly r(x) satisfies r(e)  =  0, ([\ref=r(x)_=_r(x^{-1})]), and ([\ref=r(x_y)_le_max(r(x)] [\ref=r(y))]), because of the analogous properties of rj(x) for each j. If Uj is a normal subgroup for each j, then rj(x) satisfies ([\ref=r(a_x_a^{-1})_=_r(x)]) for each j, and hence r(x) satisfies ([\ref=r(a_x_a^{-1})_=_r(x)]) too.

Thus r(y- 1  x) defines a left-invariant semi-ultrametric on G under these conditions, and r(x  y- 1) defines a right-invariant semi-ultrametric on G. By construction, these semi-ultrametrics are compatible with the topology on G. These semi-ultrametrics are also proper, because Uj is compact for each j by hypothesis, and tj  →    +    ∞   as j  →    ∞  . If Uj is a normal subgroup of G for each j, then these two semi-ultrametrics are the same, and hence invariant under both left and right translations.

Suppose that G is a topological group with large compact open subgroups which is also σ-compact, so that there is a sequence [formula] of compact subsets of G such that [formula]. Let U1 be a compact open subgroup of G with K1  ⊆  U1, and for each j  ≥  2, let Uj be a compact open subgroup of G such that Kj  ⊆  Uj and Uj  -  1  ⊆  Uj. This implies that [formula], so that we are in the same situation as before. If G has large compact open normal subgroups, then we can choose Uj to be a normal subgroup of G for each j too.

Let p be a prime number, and put

[formula]

for every [formula], where log pt is the logarithm base p of a positive real number t. It is easy to see that this defines a translation-invariant semimetric on [formula] with respect to multiplication, because log p|x|p is a homomorphism from [formula] onto the additive group [formula] of integers. One can also check that ([\ref=d_p''(x] [\ref=y)_=_|log_p_|x|_p_-_log_p_|y|_p|]) is compatible with the usual topology on [formula] and proper. However, ([\ref=d_p''(x] [\ref=y)_=_|log_p_|x|_p_-_log_p_|y|_p|]) is not a semi-ultrametric on [formula], and indeed there is no semi-ultrametric on [formula] with these properties, because [formula] does not have large compact subgroups. Note that [formula] is isomorphic as a topological group with respect to multiplication to the product of the additive group [formula] of integers and the multiplicative group of [formula] with |x|p  =  1.

General linear groups

Let R be a commutative ring, and let n be a positive integer. Also let Mn(R) be the ring of n  ×  n matrices with entries in R, with respect to entry-wise addition and matrix multiplication. Of course, Mn(R) can be identified with Rn2 in the usual way. The determinant det A∈R of A∈Mn(R) can be defined in the standard way, and satisfies det (A  B)  =  ( det A)  ( det B) for every A,B∈Mn(R).

Suppose that R is a commutative topological ring. This means that R is a commutative ring equipped with a topology which makes it a topological group with respect to addition, and for which multiplication is continuous as a mapping from R  ×  R into R, using the appropriate product topology on R  ×  R. This implies that Mn(R) is a topological ring as well, with respect to the topology that corresponds to the product topology on Rn2. Note that the determinant is automatically continuous as a mapping from Mn(R) into R, since det A is a polynomial in the entries of A.

If R has a nonzero multiplicative identity element e, then the identity matrix I with diagonal entries equal to e and off-diagonal entries equal to 0 is the multiplicative identity element for Mn(R), and det I  =  e. An element A of Mn(R) is said to be invertible if it has a multiplicative inverse in Mn(R), in which case det A is invertible as an element of R. Conversely, if A∈Mn(R) and det A is invertible in R, then A is invertible in Mn(R), as in Cramer's rule. The group of invertible elements of Mn(R) is denoted GL(n,R).

If R is a field, then GL(n,R) consists of the A∈Mn(R) such that det A  ≠  0. Suppose that R is a topological field, so that R is a topological ring, and x  ↦  1 / x is continuous on the set of x∈R such that x  ≠  0. This implies that GL(n,R) is an open set in Mn(R), and that the mapping from A∈GL(n,R) to A- 1 is continuous, because of the expression for A- 1 in terms of determinants. It follows that GL(n,R) is a topological group with respect to the topology induced by the usual one on Mn(R), since matrix multiplication is continuous. This includes the cases where [formula] or [formula].

Let p be a prime number, so that the previous remarks can also be applied to [formula]. Note that [formula] is a compact open subring of [formula], and hence that [formula] is a compact open subring of [formula]. An element x of [formula] has a multiplicative inverse in [formula] if and only if |x|p  =  1, and the set of such x is a compact open subset of [formula]. It follows that

[formula]

is a compact open subgroup of [formula], since the determinant is continuous as a mapping from [formula] into [formula], as before.

Remember that [formula] is a compact open subring of [formula] and hence [formula] for each positive integer j, so that [formula] is a compact open subring of [formula] and thus [formula]. Put

[formula]

for each [formula]. If [formula], then it is easy to see that

[formula]

because det I  =  1, and the determinant of A is a sum of monomials in the entries of A with coefficients ±  1. In particular, this implies that | det A|p  =  1, so that [formula]. One can also check that

[formula]

under these conditions, which means that [formula]. The product of two elements of [formula] is in [formula] as well, so that [formula] is a subgroup of [formula]. More precisely, [formula] is a compact open subgroup of [formula] for each [formula], which implies that [formula] and hence [formula] has small compact open subgroups. In fact, [formula] is a normal subgroup of [formula] for each j, so that [formula] has small compact open normal subgroups.

Equivalently,

[formula]

where [formula] is the ultranorm on [formula] defined in ([\ref=||A||_=_max_{1_le_j] [\ref=k_le_n}_|a_{j] [\ref=k}|_p]), and

[formula]

Alternatively,

[formula]

because

[formula]

for every [formula], by ([\ref=||A_B||_le_||A||_||B||]). Observe that

[formula]

for every [formula] and [formula], using ([\ref=||A_B||_le_||A||_||B||]) again. Thus

[formula]

for every [formula] and [formula], which implies in particular that the ultrametric [formula] is invariant under both left and right translations on [formula]. Of course,

[formula]

for each [formula].

Put

[formula]

for every [formula]. If [formula], then

[formula]

Otherwise, if [formula] is not in [formula], then either [formula] or [formula], and hence

[formula]

because [formula] is an ultranorm on [formula]. If [formula], then

[formula]

using ([\ref=||(A_-_B)_C||_=_||C_(A_-_B)||_=_||A_-_B||]) in the third step. Note that r(A- 1)  =  r(A) for each [formula], r(I)  =  0, and that r(A)  >  0 when A  ≠  I.

Let t be a real number such that 1  ≤  t  ≤  p, and put

[formula]

for every [formula]. Thus r'(A)  =  r(A) when [formula], and r'(A)  =  t otherwise. It is easy to see that

[formula]

for every [formula], using ([\ref=r(A_B)_=_||A_B_-_I||_le_..._max(||A_-_I||] [\ref=||B_-_I||)_=_max(r(A)] [\ref=r(B))]) when [formula]. As before, r'(A- 1)  =  r(A) for every [formula], r'(I)  =  0, and r'(A)  >  0 when A  ≠  I.

As in Section [\ref=topological_groups], r'(B- 1  A) defines a left-invariant ultrametric on [formula], and r'(A  B- 1) defines a right-invariant ultrametric on [formula]. If [formula], then

[formula]

and similarly for r'(A  B- 1). One can check that the topologies on [formula] determined by these metrics are the same as the standard topology, using translation-invariance and direct comparisons around the identity matrix I.

Put

[formula]

for each [formula]. Note that [formula] is an integer power of p for every [formula] with A  ≠  0, so that [formula]. If [formula], then [formula] or [formula], by ([\ref=1_=_||I||_le_||A||_||A^{-1}||]), which implies that r''(A)  ≥  0. By construction, r''(A- 1)  =  r''(A) for every [formula], and r''(A)  =  0 if and only if [formula]. It is easy to see that

[formula]

for every [formula], using ([\ref=||A_B||_le_||A||_||B||]). Thus r''(B- 1  A) defines a left-invariant semimetric on [formula], and r''(A  B- 1) defines a right-invariant semimetric on [formula], as in Section [\ref=topological_groups]. One can also check that these semimetrics are compatible with the standard topology on [formula], and that they are proper. Of course, [formula] does not have large compact subgroups, even when n  =  1.

Heisenberg groups

Let R be a commutative ring, let n be a positive integer, and put

[formula]

initially as a set. If (x,y,t),(x',y',t')∈Hn(R), so that x,y,x',y'∈Rn and t,t'∈R, then put

[formula]

If (x'',y'',t'')∈Hn(R) too, then

[formula]

Similarly,

[formula]

Thus ([\ref=((x] [\ref=y] [\ref=t)_diamond_(x'] [\ref=y'] [\ref=t'))_diamond_(x''] [\ref=y''] [\ref=t'')_=_...]) and ([\ref=(x] [\ref=y] [\ref=t)_diamond_((x'] [\ref=y'] [\ref=t')_diamond_(x''] [\ref=y''] [\ref=t''))]) are equal to each other, which implies that [formula] is associative on Hn(R). Observe that

[formula]

for every (x,y,t)∈Hn(R), so that (0,0,0) is the identity element in Hn(R) with respect to [formula]. If we put

[formula]

for every (x,y,t)∈Hn(R), then it is easy to see that

[formula]

so that Hn(R) is a group with respect to [formula]. If R is a commutative topological ring, then Hn(R) is a topological group, with respect to the corresponding product topology.

If r∈R and (x,y,t)∈Hn(R), then put

[formula]

Thus

[formula]

for every (x,y,t),(x',y',t')∈Hn(R) and r∈R, so that δr defines a group homomorphism from Hn(R) into itself. This implies that δr((0,0,0))  =  (0,0,0) for every r∈R, and that

[formula]

for every (x,y,t)∈Hn(R) and r∈R, which can also be verified directly. Note that

[formula]

for every r,r'∈R, and that δr((x,y,t))  =  (0,0,0) for every (x,y,t)∈Hn(R) when r  =  0. If R has a multiplicative identity element e, then δe is the identity mapping on Hn(R). In this case, if r∈R has a multiplicative inverse, then δr is an invertible mapping on Hn(R), with inverse equal to δr- 1. In particular, if R is a field, then δr is a one-to-one mapping from Hn(R) onto itself for every r∈R with r  ≠  0. If R is a commutative topological ring, then δr is a continuous mapping from Hn(R) into itself for each r∈R, and indeed δr((x,y,t)) is continuous as a function of r∈R and (x,y,t)∈Hn(R). It follows that δr is a homeomorphism from Hn(R) onto itself when r∈R has a multiplicative inverse in R.

Let p be a prime number, and let us apply the previous discussion to [formula]. We can also apply the previous discussion to [formula], to get a group [formula] which is a compact open subgroup of [formula]. Similarly, if k, l are integers such that 2  k  ≥  l, then it is easy to see that

[formula]

is a compact open subgroup of [formula]. It follows that [formula] has large and small compact open subgroups.

If R is any commutative ring and (x,y,t),(x',y',t')∈Hn(R), then

[formula]

Observe that

[formula]

is a normal subgroup of Hn(R), and that every element of ([\ref={0}_times_{0}_times_R]) commutes with every element of Hn(R). Suppose that R is a field, and that K is a normal subgroup of Hn(R). If (x',y',t')∈K and x'  ≠  0 or y'  ≠  0, then it follows from ([\ref=((x] [\ref=y] [\ref=t)_diamond_(x'] [\ref=y'] [\ref=t'))_diamond_(x] [\ref=y] [\ref=t)^{-1}_=_...]) that (x',y',t'')∈K for every t''∈R. This implies that ([\ref={0}_times_{0}_times_R]) is contained in K, by multiplying by (x',y',t')- 1.

Applying this to [formula] again, we get that [formula] has no nontrivial compact normal subgroups, and that [formula] does not have small open normal subgroups. However,

[formula]

is a compact open normal subgroup of [formula] for each nonnegative integer k, by ([\ref=((x] [\ref=y] [\ref=t)_diamond_(x'] [\ref=y'] [\ref=t'))_diamond_(x] [\ref=y] [\ref=t)^{-1}_=_...]). In particular, [formula] has small compact open normal subgroups. Note that [formula] is an ideal in [formula] and a sub-ring of [formula] when k  ≥  0, and that ([\ref=H_n(p^k_{bf_Z}_p)_=_...]) is the same as ([\ref=(p^k_{bf_Z}_p)^n_times_(p^k_{bf_Z}_p)^n_times_(p^l_{bf_Z}_p)]) with l  =  k, which satisfies 2  k  ≥  l when k  ≥  0.

Put

[formula]

for each [formula]. One can check that

[formula]

for every [formula], using the simple fact that

[formula]

for any two nonnegative real numbers a, b. Similarly,

[formula]

for every [formula]. By construction,

[formula]

for every [formula] and [formula]. It follows that

[formula]

defines a left-invariant unltrametric on [formula], and that

[formula]

defines a right-invariant ultrametric on [formula], as in Section [\ref=topological_groups]. Of course, the topologies on [formula] determined by these ultrametrics are the same as the product topology associated to the standard topology on [formula]. These ultrametrics also transform in a nice way under the dilations δr for each [formula], by ([\ref=N(delta_r((x] [\ref=y] [\ref=t)))_=_|r|_p_N((x] [\ref=y] [\ref=t))]). Observe that

[formula]

for each [formula], which is the same as ([\ref=(p^k_{bf_Z}_p)^n_times_(p^k_{bf_Z}_p)^n_times_(p^l_{bf_Z}_p)]) with l  =  2  k.

Alternatively, put

[formula]

for every [formula]. As before,

[formula]

for every [formula], and

[formula]

for every [formula]. One can also check that

[formula]

for every [formula], using ([\ref=((x] [\ref=y] [\ref=t)_diamond_(x'] [\ref=y'] [\ref=t'))_diamond_(x] [\ref=y] [\ref=t)^{-1}_=_...]). This implies that

[formula]

defines an ultrametric on [formula] which is invariant under both left and right translations, as in Section [\ref=topological_groups]. As usual, the topology on [formula] determined by this ultrametric is the same as the product topology corresponding to the standard topology on [formula]. Note that

[formula]

for each nonngative integer k, which is the same as ([\ref=H_n(p^k_{bf_Z}_p)_=_...]). Observe also that

[formula]

for every [formula], which reflects the fact that the ultrametrics ([\ref=N((x'] [\ref=y'] [\ref=t')^{-1}_diamond_(x] [\ref=y] [\ref=t))]), ([\ref=N((x] [\ref=y] [\ref=t)_diamond_(x'] [\ref=y'] [\ref=t')^{-1})]), and ([\ref=widetilde{N}((x'] [\ref=y'] [\ref=t')^{-1}_diamond_(x] [\ref=y] [\ref=t))_=_...]) determine the same topology on [formula].

Upper-triangular matrices

Let R be a commutative ring, let n be a positive integer, and let Mn(R) be the ring of n  ×  n matrices A  =  {aj,k}nj,k  =  1 with entries in R, as usual. More precisely, the index j indicates the row in the matrix, and the index k indicates the column in the matrix, so that A looks as follows.

[formula]

Let Tn(R) be the collection of upper-triangular matrices A, which means that aj,k  =  0 when j  >  k, as below.

[formula]

It is well known and easy to see that Tn(A) is a subring of Mn(R), and that the determinant of ([\ref=matrix_in_T_n(R)]) is equal to the product of its diagonal entries.

Let l be a nonnegative integer, and put

[formula]

Thus T0n(R) consists of diagonal matrices, Tln(R)  =  {0} when l  ≥  n, and Tln(R) is a subgroup of Tn(R) as a commutative group with respect to addition for each l. In fact, Tn(R) is the direct sum of Tln(R) for [formula] as a commutative group with respect to addition. If A∈Tln(R) and A'∈Tl'n(R) for some nonnegative integers l, l', then

[formula]

and in particular A  A'  =  0 when l  +  l'  ≥  n.

Let r∈R and A  =  {aj,k}nj,k  =  1∈Tn(R) be given, and let δr(A) be the element of Tn(R) whose (j,k)th entry is equal to

[formula]

when j  <  k, and to aj,j when j  =  k. Of course, the (j,k)th entry of δr(A) is 0 when j  >  k. If r  =  0, then δr(A) is the diagonal matrix whose diagonal entries are the same as the diagonal entries of A. If R has a nonzero multiplicative identity element and r has a multiplicative inverse, then δr(A) can be obtained by conjugating A by a diagonal matrix whose entries are given by successive powers of r. Of course,

[formula]

for every A,A'∈Tn(R) and r∈R.

Equivalently, if r is any element of R and A∈Tln(R) for some nonnegative integer l, then

[formula]

when l  >  0, and δr(A)  =  A when l  =  0. Using this, it is easy to see that

[formula]

for every A,A'∈Tn(R), by reducing to the case where A∈Tln(R), A'∈Tl'n(R) for some l,l'  ≥  0. Alternatively, if R has a multiplicative identity element and r has a multiplicative inverse in R, then ([\ref=delta_r(A_A')_=_delta_r(A)_delta_r(A')]) follows by expressing δr in terms of conjugation, as in the previous paragraph. At any rate, δr is a ring homomorphism from Tn(R) into itself for each r∈R.

Clearly

[formula]

for every r,r'∈R. If R has a nonzero multiplicative identity element e, then δe is the identity mapping on Tn(R). In this case, if r∈R has a multiplicative inverse in R, then δr is an invertible mapping on Tn(R), with inverse δr- 1.

If R is a topological ring, then Tn(R) is a closed set in Mn(R), with respect to the usual topology on Mn(R). Of course, we can identify Tn(R) with the Cartesian product of n(n  +  1)  /  2 copies of R, and the topology on Tn(R) induced by the usual topology on Mn(R) is the same as the product topology on this Cartesian product associated to the given topology on R. In this case, δr is a continuous mapping from Tn(A) into itself for each r∈R, and in fact δr(A) is continuous as a function of r∈R and A∈Tn(A). In particular, δr is a homeomorphism from Tn(A) onto itself when R has a multiplicative identity element and r∈R has a multiplicative inverse in R.

Let T+n(R) be the collection of matrices A  =  {aj,k}nj,k  =  1∈Mn(R) which are strictly upper-triangular, in the sense that aj,k  =  0 when j  ≥  k. This is is a subring of Tn(R), which is the same as the direct sum of Tln(R) for [formula] as a commutative group with respect to addition. Note that δ0(A)  =  0 and An  =  0 for every A∈T+n(R). If R is a topological ring, then T+n(R) is also a closed set in Mn(R), which can be identified with the Cartesian product of n(n  -  1)  /  2 copies of R with the corresponding product topology.

Now let p be a prime number, and let us apply the previous remarks to [formula]. Put

[formula]

for each [formula], so that N(A)  =  0 if and only if [formula]. It is easy to see that

[formula]

for every [formula], because of the ultrametric version of the triangle inequality for the p-adic absolute value. By construction,

[formula]

for every [formula] and [formula].

Suppose that [formula] have their diagonal entries in [formula], and let us check that

[formula]

It suffices to show that

[formula]

when 1  ≤  j  <  l  ≤  n and j  ≤  k  ≤  l, by the definition of matrix multiplication, and the ultrametric version of the triangle inequality for the p-adic absolute value. If j  =  k, then

[formula]

as desired, because [formula] by hypothesis. Similarly, if k  =  l, then

[formula]

as desired, because [formula] by hypothesis. Otherwise, if j  <  k  <  l, then

[formula]

which implies ([\ref=|a_{j] [\ref=k}_a'_{k] [\ref=l}|_p^{1/(l_-_j)}_le_max(N(A)] [\ref=N(A'))]) also in this case.

Upper-triangular matrices, 2

Let R be a commutative ring with nonzero multiplicative identity element e, and let n be a positive integer. Also let Mn(R) be the ring of n  ×  n matrices A  =  {aj,k}nj,k  =  1 with entries in R, and let Tn(R) and T+n(R) be the sub-rings of Mn(R) consisting of upper-triangular and strictly upper-triangular matrices, respectively, as in the previous section. Consider the collection T+(n,R) of A  =  {aj,k}nj,k  =  1∈Tn(R) whose diagonal entries are equal to e, so that A has the following form.

[formula]

Equivalently, aj,j  =  e for [formula] and aj,k  =  0 when j  >  k, which is the same as saying that A  -  I∈T+n(R). Thus det A  =  e for every A∈T+(n,R), and it is well known that T+(n,R) is a subgroup of GL(n,R). If R is a topological ring, then T+(n,R) is a closed set in Mn(R), with respect to the usual topology on Mn(R). In particular, T+(n,R) is a relatively closed subgroup of GL(n,R), with respect to the topology induced by the usual topology on Mn(R).

Of course, T+(1,R) is the trivial group, consisting of the 1  ×  1 matrix whose only entry is equal to e. Every element of T+(2,R) is of the form

[formula]

for some a∈R, and

[formula]

for every a,b∈R. Thus the mapping from a∈R to ([\ref=R_into_T^+(2] [\ref=R)]) defines a group isomorphism from R as a commutative group with respect to addition onto T+(2,R) as a group with respect to matrix multiplication. Similarly, every element of T+(3,R) can be expressed as

[formula]

for some x,y,t∈R, and

[formula]

for every x,x',y,y',t,t'∈R. This implies that the mapping from (x,y,t)∈R3 to ([\ref=H_1(R)_into_T^+(3] [\ref=R)]) defines a group isomorphism from the first Heisenberg group H1(R) onto T+(3,R). There is also a natural embedding of Hn(R) into T+(n  +  2,R) for every positive integer n, which sends (x,y,t)∈Hn(R) to the following matrix A  =  {aj,k}n  +  2j,k  =  1.

[formula]

More precisely, aj,k  =  0 when j  >  k, aj,j  =  e for each j, a1,k  +  1  =  xk for [formula], a1,n  +  2  =  t, aj  +  1,n  +  2  =  yj for [formula], and aj,k  =  0 when 2  ≤  j  <  k  ≤  n  +  1.

Let us restrict our attention to n  ≥  2, since T+(1,R) is trivial. If B is any element of Mn(R), then

[formula]

where Bl  =  I when l  =  0. If B∈T+n(R), then Bn  =  0, and it follows that I  -  B is invertible in Mn(R), with

[formula]

which is contained in T+(n,R). This gives a convenient expression for the inverse of elements of T+(n,R), since every element of T+(n,R) is of the form I  -  B for some B∈T+n(R).

Let r∈R be given, and let δr be the corresponding ring homomorphism from Tn(R) into itself discussed in the previous section. Note that

[formula]

for every A∈T+(n,R), so that δr defines a group homomorphism from T+(n,R) into itself. If n  =  2, then δr corresponds to the standard dilation on R given by multiplication by r, using the isomorphism between R as a commutative group with respect to addition and T+(2,R) indicated by ([\ref=R_into_T^+(2] [\ref=R)]). If n  =  3, then δr corresponds to ([\ref=delta_r((x] [\ref=y] [\ref=t))_=_(r_x] [\ref=r_y] [\ref=r^2_t)]) on H1(R), using the isomorphism between H1(R) and T+(3,R) indicated by ([\ref=H_1(R)_into_T^+(3] [\ref=R)]). However, this does not work when n  ≥  4, using the embedding of Hn  -  2(R) into T+(n,R) indicated by ([\ref=H_n(R)_into_T^+(n_+_2] [\ref=R)]).

Now let p be a prime number, so that the previous remarks can be applied to [formula] and [formula]. Observe that

[formula]

is a compact subgroup of [formula] which is relatively open in [formula] as well. Similarly, for each [formula],

[formula]

is a compact relatively open subgroup of [formula], and hence of [formula], consisting of [formula] such that [formula] when j  <  k. Thus [formula] has small compact open subgroups, which are inherited from the corresponding subgroups of [formula]. Because [formula] is a normal subgroup of [formula] for each l, ([\ref=GL_l(n] [\ref={bf_Z}_p)_cap_T^+(n] [\ref={bf_Z}_p)]) is a normal subgroup of [formula] for each [formula], so that [formula] has small compact open normal subgroups.

Let N(A) be as in ([\ref=N(A)_=_max_{1_le_j_<_k_le_n}_|a_{j] [\ref=k}|_p^{1/(k_-_j)}]), where [formula]. If we restrict our attention to [formula], then N(A)  =  0 if and only if A  =  I. If [formula], then ([\ref=N(A_A')_le_max(N(A)] [\ref=N(A'))]) holds, since the diagonal entries of A and A' are equal to 1, which is an element of [formula]. Let us check that

[formula]

for every [formula], which implies that

[formula]

for every [formula], by applying ([\ref=N(A^{-1})_le_N(A)]) to A- 1. As before, we may as well take A  =  I  -  B, where [formula], so that A- 1 is given by ([\ref=(I_-_B)^{-1}_=_sum_{l_=_0}^{n_-_1}_B^l]). Thus

[formula]

by ([\ref=N(A_+_A')_le_max(N(A)] [\ref=N(A'))]). Clearly N(A)  =  N(B), by the definition ([\ref=N(A)_=_max_{1_le_j_<_k_le_n}_|a_{j] [\ref=k}|_p^{1/(k_-_j)}]) of N(A), and

[formula]

for each l  ≥  1, by repeated application of ([\ref=N(A_A')_le_max(N(A)] [\ref=N(A'))]). This implies ([\ref=N(A^{-1})_le_N(A)]), as desired.

It follows that

[formula]

defines a left-invariant ultrametric on [formula], and that

[formula]

defines a right-invariant ultrametric on [formula], as in Section [\ref=topological_groups]. It is easy to see that the topologies on [formula] determined by these ultrametrics are the same as the one induced by the usual topology on [formula]. These ultrametrics also behave well with respect to the dilations δr on [formula], by ([\ref=N(delta_r(A))_=_|r|_p_N(A)]).

Note that Haar measure on [formula] corresponds to the product of Haar measure on n(n  -  1)  /  2 copies of [formula]. If [formula] is a Borel set and [formula], then δr(E) is a Borel set in [formula] too, and the Haar measure of δr(E) is equal to

[formula]

times the Haar measure of E, where

[formula]

This uses the analogous property of Haar measure on [formula], and it implies that Haar measure on [formula] is Ahlfors regular of dimension d(n) with respect to ([\ref=N((A')^{-1}_A)]) or ([\ref=N(A_(A')^{-1})]).

If l is any integer, then

[formula]

is a compact open subgroup of [formula], so that [formula] has large compact open subgroups in particular. Similarly, if [formula] are integers such that

[formula]

for every α,β  ≥  1 with α  +  β  ≤  n  -  1, then one can check that

[formula]

is a compact open subgroup of [formula]. More precisely,

[formula]

is a compact open sub-ring of [formula], and ([\ref={A_in_T^+(n] [\ref={bf_Q}_p)_:_a_{j] [\ref=k}_in_p^{l_{k_-_j}}_{bf_Z}_p_when_j_<_k}]) is the same as the collection of [formula] such that A  -  I is in ([\ref={B_in_T_n^+({bf_Q}_p)_:_b_{j] [\ref=k}_in_p^{l_{k_-_j}}_{bf_Z}_p_when_j_<_k}]).

Upper-triangular matrices, 3

Let R be a commutative ring with nonzero multiplicative identity element e, and let R* be the multiplicative group of invertible elements in R. Also let n be a positive integer, and let Mn(R), Tn(R), T+n(R), and T+(n,R) be as in the previous sections. Consider the collection T(n,R) of A  =  {aj,k}nj,k  =  1 in Tn(R) whose diagonal entries are invertible in R, so that aj,j∈R* for each [formula]. Thus

[formula]

is invertible in R when A∈T(n,R). Conversely, if A∈Tn(R) and det A is invertible in R, then aj,j∈R* for each [formula], so that A∈T(n,R).

Equivalently,

[formula]

In particular, if A,A'∈T(n,R), then their product A  A' is in T(n,R), because of the analogous statements for Tn(R) and GL(n,R). Alternatively, the diagonal entries of A  A' are equal to the products of the corresponding diagonal entries of A and A', and hence are invertible in R when the diagonal entries of A and A' are invertible in R. If A∈T(n,R), then it is well known that A- 1∈T(n,R), so that T(n,R) is a subgroup of GL(n,R). One way to see this is to express A as the product of a diagonal matrix with the same diagonal entries as A and an element of T+(n,R), and then invert the two factors.

Note that the collection of diagonal n  ×  n matrices with entries in R is a sub-ring of Tn(R) and hence Mn(R), and that the mapping from A∈Tn(R) to the diagonal matrix with the same diagonal entries as A is a ring homomorphism. The restriction of this mapping to T(n,R) defines a group homomorphism from T(n,R) onto the group of diagonal matrices with diagonal entries in R*, and T+(n,R) is the kernel of this homomorphism. In particular, T+(n,R) is a normal subgroup of T(n,R).

Now let p be a prime number, so that the previous remarks can be applied to [formula] and [formula]. Thus [formula] is a relatively open set in [formula] with respect to the topology induced by the usual one on [formula], and a relatively closed subgroup of [formula]. By definition,

[formula]

since [formula] is invertible in [formula] if and only if |x|p  =  1. Equivalently,

[formula]

More precisely, if [formula], then |aj,j|p  =  1 for [formula], and hence | det A|p  =  1, by ([\ref=det_A_=_prod_{j_=_1}^n_a_{j] [\ref=j}]). Similarly, if A∈Tn(A), then [formula] for [formula], and [formula]. In this case, if we also have that | det A|p  =  1, then it follows that |aj,j|p  =  1 for each j, so that [formula].

Of course, [formula] is a compact subgroup of [formula], and [formula] is relatively open in [formula]. Similarly,

[formula]

is a compact relatively open normal subgroup of [formula] for each positive integer l, and hence a compact relatively open subgroup of [formula]. This shows that [formula] has small compact open normal subgroups, and that [formula] has small compact open subgroups. However, [formula] does not have large compact subgroups, for essentially the same reasons as for [formula].

As a variant of this, consider

[formula]

which is a relatively open normal subgroup of [formula] that contains [formula] as a relatively open compact subgroup. Thus [formula] also contains ([\ref=GL_l(n] [\ref={bf_Z}_p)_cap_T(n] [\ref={bf_Z}_p)]) as a compact relatively open subgroup for each [formula], so that [formula] has small compact open subgroups as well. By construction, [formula] is a relatively closed normal subgroup of [formula], and every element of [formula] can be expressed as the product of a diagonal matrix whose diagonal entries have p-adic absolute value equal to 1 and an element of [formula].

Let N(A) be as in ([\ref=N(A)_=_max_{1_le_j_<_k_le_n}_|a_{j] [\ref=k}|_p^{1/(k_-_j)}]) for each [formula], and for [formula] in particular. Thus N(A)  =  0 exactly when A is a diagonal matrix. Note that ([\ref=N(A_A')_le_max(N(A)] [\ref=N(A'))]) holds when [formula], since the diagonal entries of A and A' are in [formula]. We have already seen that ([\ref=N(A^{-1})_le_N(A)]) and hence ([\ref=N(A^{-1})_=_N(A)]) hold for every [formula], and this can be extended to [formula] by expressing A as the product of a diagonal matrix and an element of [formula]. It follows that ([\ref=N((A')^{-1}_A)]) defines a left-invariant semi-ultrametric on [formula], and that ([\ref=N(A_(A')^{-1})]) defines a right-invariant semi-ultrametric on [formula]. It is easy to see that these semi-ultrametrics are compatible with the topology on [formula] induced by the standard topology on [formula], and that they are proper. This implies that [formula] has large compact open subgroups, as before.

Of course,

[formula]

is also a semi-ultrametric on [formula], which is equal to 0 exactly when A and A' have the same diagonal entries. This semi-ultrametric is invariant under both left and right translations on [formula] as a group with respect to matrix multiplication, because A  ↦  aj,j is a homomorphism from [formula] onto the multiplicative group of p-adic numbers with p-adic absolute value equal to 1 for each j. The maximum of ([\ref=N((A')^{-1}_A)]) and ([\ref=D(A] [\ref=A')_=_max_{1_le_j_le_n}_|a_{j] [\ref=j}_-_a'_{j] [\ref=j}|_p]) is a left-invariant ultrametric on [formula] that determines the usual topology on [formula], and the maximum of ([\ref=N(A_(A')^{-1})]) and ([\ref=D(A] [\ref=A')_=_max_{1_le_j_le_n}_|a_{j] [\ref=j}_-_a'_{j] [\ref=j}|_p]) is a right-invariant ultrametric on [formula] that determines the same topology on [formula].

a  x  +  b Groups

Let R be a commutative ring with a nonzero multiplicative identity element e again, and let A(R) be the collection of "affine" mappings on R, which is to say mappings from R into itself of the form

[formula]

for some a,b∈R. If

[formula]

is another element of A(R) for some c,d∈R, then the composition

[formula]

of f and g is also in A(R). It follows that A(R) is a semigroup with respect to composition, and the identity mapping on R is the identity element in A(R). If f∈A(R) is of the form ([\ref=f(x)_=_a_x_+_b]), then a,b∈R are uniquely determined by f as a mapping from R into itself, because

[formula]

Thus we can identify A(R) as a set with R  ×  R.

Let R* be the multiplicative group of invertible elements of R, and let A*(R) be the collection of f∈A(R) of the form ([\ref=f(x)_=_a_x_+_b]) with a∈R*. If f∈A*(R), then it is easy to see that f is an invertible mapping from R onto itself, with

[formula]

where a,b∈R are as in ([\ref=f(x)_=_a_x_+_b]) again. Conversely, if f∈A(R) maps R onto itself, then there is an x∈R such that f(x)  =  e  +  b, which implies that a∈R*. Thus A*(R) is the same as the collection of f∈A(R) such that f is an invertible mapping from R onto itself, in which case f- 1∈A*(R) too. The composition of two elements of A*(R) is also an element of A*(R), so that A*(R) is a group with respect to composition of mappings.

Let U be a subset of R, and let A(U,R) be the collection of f∈A(R) of the form ([\ref=f(x)_=_a_x_+_b]) with a∈U. If U is a sub-semigroup of R with respect to multiplication, then A(U,R) is a sub-semigroup of A(R) with respect to composition of mappings. Similarly, if U is a subgroup of R*, then A(U,R) is a subgroup of A*(R)  =  A(R*,R). In both cases, there is a natural homomorphism from A(U,R) onto U, which sends f∈A(U,R) as in ([\ref=f(x)_=_a_x_+_b]) to a∈U. If e∈U, which is automatic when U is a subgroup of R*, then the kernel of this homomorphism is equal to A({e},R), which consists of the translation mappings f(x)  =  x  +  b with b∈R.

If R1 is a subring of R that contains e, then we can identify A(R1) with a sub-semigroup of A(R), consisting of the f∈A(R) as in ([\ref=f(x)_=_a_x_+_b]) with a,b∈R1. Equivalently, this happens exactly when f(R1)  ⊆  R1, because of ([\ref=a_=_f(e)_-_f(0)_and_b_=_f(0)]). In this case, R*1 is a subgroup of R*, and A*(R1) can be identified with a subgroup of A*(R). However, an element of R1 may be invertible as an element of R, without its inverse being in R1. This means that an element of A(R1) may correspond to an element of A*(R), without being in A*(R1).

If R is a topological ring, then we can get a topology on A(R) by identifying A(R) with R  ×  R as before, and using the product topology on R  ×  R. It is easy to see that the mapping from f,g∈A(R) to [formula] is continuous as a mapping from A(R)  ×  A(R) into A(R) with respect to the product topology on A(R), so that A(R) becomes a topological semigroup under these conditions. If R is a topological field, then [formula] is an open set in R, and hence A*(R) is an open set in A(R). In this case, the mapping from f∈A*(R) to f- 1 is also continuous, so that A*(R) is a topological group.

Note that the mapping

[formula]

defines an isomorphism from R as a commutative group with respect to addition onto A({e},R). Similarly,

[formula]

defines an isomorphism from R as a semigroup with respect to multiplication onto a sub-semigroup of A(R). The restriction of ([\ref=a_in_R_mapsto_f(x)_=_a_x_in_A(R)]) to a∈R* defines an isomorphism from R* onto a subgroup of A*(R). If R is a topological ring, then these mappings are homeomorphisms onto their images in A(R), with respect to the induced topology.

We can also think of A(R) as a module over R, with respect to pointwise addition and scalar multiplication of affine functions on R. If we identify A(R) as a set with R  ×  R as before, then this corresponds exactly to coordinatewise addition and scalar multiplication on R  ×  R. In particular, if R is a field, then A(R) may be considered as a 2-dimensional vector space over R. If R is a topological ring or field, then A(R) is a topological module or vector space over R, as appropriate, in the sense that addition and scalar multiplication are continuous.

There is an obvious identification between f∈A(R) as in ([\ref=f(x)_=_a_x_+_b]) and the 2  ×  2 matrix

[formula]

In particular, the identity mapping f(x)  =  x corresponds to the identity matrix [formula], and

[formula]

for every a,b,c,d∈R, as in ([\ref=(f_circ_g)(x)_=_f(g(x))_=_a_c_x_+_a_d_+_b]). If a∈R* and b∈R, then ([\ref=(_a_b_/_0_e_)]) is invertible as a 2  ×  2 matrix with entries in R, and its inverse is the matrix of the same form corresponding to ([\ref=f^{-1}(x)_=_a^{-1}_x_-_a^{-1}_b]). Thus A(R) corresponds to a sub-semigroup of T2(R) as in Section [\ref=upper-triangular_matrices] with respect to matrix multiplication, A({e},R) corresponds to T+(2,R) as in Section [\ref=upper-triangular_matrices] [\ref=2], and A*(R) corresponds to a subgroup of T(2,R) as in Section [\ref=upper-triangular_matrices] [\ref=3], with respect to this identification.

Now let p be a prime number, so that the previous remarks can be applied to [formula]. In particular, [formula] may be considered as a 2-dimensional vector space over [formula], with respect to pointwise addition and scalar multiplication of affine functions on [formula]. If [formula] is as in ([\ref=f(x)_=_a_x_+_b]), then put

[formula]

which defines an ultranorm on [formula] as a vector space over [formula]. If we identify [formula] with [formula] as a two-dimensional vector space over [formula] in the usual way, then [formula] is the same as the standard ultranorm on [formula]. Of course, the topology on [formula] determined by the corresponding ultrametric

[formula]

is the same as the one that we get from the product topology on [formula].

The space [formula] of 2  ×  2 matrices with entries in [formula] is a four-dimensional vector space over [formula] in the usual way, and the matrices of the form ([\ref=(_a_b_/_0_e_)]) span a two-dimensional affine subspace of [formula]. As in Section [\ref=ultranorms], the standard ultranorm of an element of [formula] is defined by taking the maximum of the p-adic absolute values of its entries. If [formula] and [formula] is as in ([\ref=f(x)_=_a_x_+_b]), then the norm of the corresponding matrix ([\ref=(_a_b_/_0_e_)]) is equal to

[formula]

However, if [formula] is as in ([\ref=g(x)_=_c_x_+_d]), then the difference between the matrices corresponding to f and g is equal to

[formula]

and the norm of ([\ref={a_b_/_0_e}_-_{c_d_/_0_e}_=_...]) is equal to ([\ref=||f_-_g||_{A({bf_Q}_p)}]).

Let Up be the multiplicative group of [formula] with |x|p  =  1, which is the same as the group of invertible elements in [formula]. This is a compact open subgroup of [formula], and [formula] is an open normal subgroup of [formula]. Note that the elements of [formula] are isometries on [formula] with respect to the p-adic metric. If [formula], then

[formula]

because [formula] for every [formula], and

[formula]

by ([\ref=a_=_f(e)_-_f(0)_and_b_=_f(0)]). If [formula], then it follows that

[formula]

for every [formula]. Of course, this can also be verified using ([\ref=||f||_{A({bf_Q}_p)}_=_max(|a|_p] [\ref=|b|_p)]). In particular, the restriction of ([\ref=||f_-_g||_{A({bf_Q}_p)}]) to f, g in [formula] is invariant under left translations on [formula], as a group with respect to composition of mappings. If [formula] as in ([\ref=f(x)_=_a_x_+_b]) is identified with the 2  ×  2 matrix ([\ref=(_a_b_/_0_e_)]), then [formula] corresponds to a closed subgroup of [formula] as in Section [\ref=upper-triangular_matrices] [\ref=3].

As before, we can identify [formula] with the set of [formula] with coefficients in [formula], which is a compact open sub-semigroup of [formula]. Similarly, [formula] corresponds to a compact open subgroup of [formula]. Using ([\ref=||f||_{A({bf_Q}_p)}_=_max_{|f(x)|_p_:_x_in_{bf_Z}_p}]), we get that

[formula]

for every [formula] and [formula], because [formula]. This implies that the restriction of ([\ref=||f_-_g||_{A({bf_Q}_p)}]) to [formula] is invariant under both left and right translations. Of course, one can also look at this in terms of matrices, since [formula] corresponds to a subgroup of [formula], which is contained in [formula].

If [formula] is as in ([\ref=f(x)_=_a_x_+_b]), then one can check that

[formula]

satisfies

[formula]

using ([\ref=f^{-1}(x)_=_a^{-1}_x_-_a^{-1}_b]) or ([\ref=||alpha_circ_f_-_alpha_circ_g||_{A({bf_Q}_p)}_=_||f_-_g||_{A({bf_Q}_p)}]). Similarly, if [formula], then

[formula]

by ([\ref=||alpha_circ_f_-_alpha_circ_g||_{A({bf_Q}_p)}_=_||f_-_g||_{A({bf_Q}_p)}]). Let t be a real number with t  ≥  1, and put

[formula]

when [formula], and

[formula]

when [formula] is not in [formula]. Thus

[formula]

for every [formula], and

[formula]

for every [formula], by the previous statements for L. It follows that

[formula]

defines an ultrametric on [formula] that is invariant under left translations on [formula], as a group with respect to composition of mappings. If [formula], then ([\ref=L'(g^{-1}_circ_f)]) is equal to [formula], which is the same as ([\ref=||f_-_g||_{A({bf_Q}_p)}]), by ([\ref=||alpha_circ_f_-_alpha_circ_g||_{A({bf_Q}_p)}_=_||f_-_g||_{A({bf_Q}_p)}]). This implies that the topology on [formula] determined by ([\ref=L'(g^{-1}_circ_f)]) is the same as the usual topology on [formula] discussed earlier, since [formula] is an open subgroup of [formula]. Note that [formula] has small compact open subgroups, and that [formula] has small open normal subgroups. Similarly, [formula] has large compact open subgroups, and the restriction of the ultrametric ([\ref=||f_-_g||_{A({bf_Q}_p)}]) to [formula] is proper. However, [formula] does not have large compact subgroups, basically because [formula] does not have large compact subgroups.

Cells in [formula]

Let p be a prime number, and let [formula] be as in the previous section. By a cell in [formula] we mean a subset of [formula] of the form [formula] for some [formula]. Equivalently, [formula] is a cell if C is a closed ball in [formula] of positive radius with respect to the p-adic metric. Let [formula] be the collection of all cells in [formula].

Let us say that a cell [formula] is the child of a cell [formula] if C  ⊆  C' and the diameter of C is equal to 1 / p times the diameter of C'. Each cell in [formula] has exactly p children in [formula], and is the child of exactly one cell in [formula]. This leads to a natural graph whose vertices are cells in [formula], and for which two cells are adjacent when one is a child of the other. It is easy to see that this graph is connected, because any two cells in [formula] are contained in another cell. In fact, this graph is a tree.

If [formula] and C is a cell in [formula], then f(C) is a cell in [formula] too, and

[formula]

defines a one-to-one mapping from [formula] onto itself. This mapping actually leads to an automorphism on the tree associated to [formula], because it sends the children of a cell C to the children of f(C). Thus we get a homomorphism from [formula] into the automorphism group of this tree. If f and g are distinct elements of [formula], then one can check that there is a cell C in [formula] such that f(C)  ≠  g(C), so that this homomorphism is an embedding.

Let ρ(C,C') be the path metric on [formula], which is the length of the shortest path between two cells C, C' in the corresponding graph, where the length of each edge is equal to 1. If C  ⊆  C', then this path consists of the sequence of cells containing C and contained in C'. Otherwise, if C'' is the smallest cell that contains both C and C', then the shortest path from C to C' can be obtained by combining the minimal paths between C and C' to C''. Note that

[formula]

for every [formula] and [formula], since the mapping ([\ref=C_mapsto_f(C)]) determines an automorphism of the graph corresponding to [formula].

As before, [formula] may be identified with a compact open subgroup of [formula], consisting of the [formula] such that [formula]. Although [formula] is not a normal subgroup of [formula], one can still consider the quotient space [formula] as a set, with the natural action of [formula] on the left. The mapping from [formula] to [formula] leads to a one-to-one mapping from [formula] onto [formula]. By construction, the natural action of [formula] on [formula] on the left corresponds exactly to the action of [formula] on [formula] already defined.

Observe that

[formula]

defines a semimetric on [formula] that is invariant under left translations on [formula], as a group with respect to composition of mappings. This semimetric is equal to 0 when [formula], which is to say that [formula]. It is easy to see that this semimetric is compatible with the usual topology on [formula], because [formula] is an open subgroup of [formula]. Let us check that ([\ref=rho(f({bf_Z}_p)] [\ref=g({bf_Z}_p))]) is also proper on [formula].

A set [formula] is bounded with respect to ρ(C,C') if and only if the cells in E are contained in a single cell in [formula], and the diameters of the cells in E with respect to the p-adic metric on [formula] have a positive lower bound. Of course, the first condition implies that the diameters of the cells in E also have a finite upper bound. A set [formula] is bounded with respect to ([\ref=rho(f({bf_Z}_p)] [\ref=g({bf_Z}_p))]) if anf only if the set E of cells of the form [formula] with f∈E is bounded in [formula]. If [formula] has this property and f∈E is as in ([\ref=f(x)_=_a_x_+_b]), then the coefficients [formula] and [formula] corresponding to f are bounded in [formula], and there is a positive lower bound for |a|p. If E is also a closed set with respect to the usual topology on [formula], then it follows that E is compact, as desired.