Corollary Avertissement Proposition Lemma Lemma

Fact Porism Conjecture Question Observation Fact Definition Exemple Exercise Remark Notation Proposition-Construction Lemma

Groups with f-generics in NTP2 and PRC fields

Introduction

A field is PRC if every absolutely irreducible variety which has zeros in every real closed extension has a zero in the field. Hence PRC fields generalize both the notions of real closed fields and of pseudo algebraically closed fields (PAC). It was shown in [\cite=Mon] that bounded PRC fields are NTP2, a notion which generalizes the more studied concepts of dependent theories and simple theories. Since bounded PAC fields have been a very inspirational example of a simple unstable field, and real closed fields are one of the most well studied dependent fields, bounded PRC fields appear to be examples of NTP2 fields, the study of which can be very telling about which properties one can and cannot expect of an NTP2 theory.

In this paper we try to understand definable groups in a bounded PRC field, assuming in addition existence of f-generic types (a slightly weaker assumption than definable amenability). We prove that such a group is isogeneous with a finite index subgroup of a quantifier-free definable groups (Theorem [\ref=th_main]). In fact, that latter group admits a definable covering by multicells on which the group operation is algebraic. This generalizes similar results proved in [\cite=HrPi] by Hrushovski and Pillay for (not necessarily f-generic) groups definable in both pseudofinite fields and real closed fields. Our theorem applies in particular to all solvable groups.

In order to prove this result we need to develop various tools. In Section [\ref=SStabilizer] we prove two new versions of Hrushovski's Stabilizer Theorem from [\cite=Hru12]. In particular, we manage to give a slightly simpler proof at the cost of losing some optimality in the hypothesis. In Section [\ref=SGroups] we prove some results about groups definable in an NTP2 theory admitting f-generic types. We generalize some basic statements proved in [\cite=CS] for definably amenable NIP groups. In Section [\ref=SPRC] we recall some results on PRC fields and prove that the expansion of a bounded PRC field obtained by adding all quantifier-free externally definable sets has elimination of quantifiers.

The sketch of the proof of the main theorem is as follows: After an initial reduction to groups of finite index, we use the same ideas of the first sections of [\cite=HrPi] to show that given a group G with f-generics definable in a bounded PRC field, there is an algebraic group H and a (relatively) definable isomorphism between type definable subgroups G00M of G and K of H. The isomorphism is achieved from the maximum type definable over M subgroup G00M of G, a fact uses very strongly that G has f-generics and the Stabilizer Theorem. In Section [\ref=SAlgebraic] we show that for any such K (a type definable subgroup of and algebraic group), if [formula] denotes the topological closure of K, then [formula] is profinite. The proof then continues adapting the proofs in [\cite=HrPi] for the pseudofinite case and for the real closed case to complete the proof of the bounded PRC case.

Stabilizer theorems

Let M be a model and let G be an M-definable group. Let μ be an M-invariant ideal of subsets of G which is invariant by left translations by elements of G. We say that a type p(x) in G is μ-wide if it is not contained in a set D∈μ. A key concept we will need is Hrushovski's definition of an S1 ideal.

The following results all appear in [\cite=Hru12].

Finally, the following is Lemma 2.3 in [\cite=Hru12].

We consider a second ideal λ of subsets of G with the property that μ is S1 on any set in λ. This ideal will only be truly used in Theorem [\ref=th_stabilizer]; everywhere else, one may take λ to be the ideal of all definable sets on which μ is S1. We assume that λ is also invariant under left translations by elements of G. A type which is not λ-wide will be called medium, and we will refer to μ-wide types by "wide". Note that if p is medium, then μ is S1 on p, and if [formula] and [formula] is wide, then [formula] does not fork over M.

If q and r are wide types, then we define [formula] is wide}. If p is wide, we will refer to St(p,p) by St(p) and [formula] is wide}. Hence g∈St(p) if and only if there is some [formula], [formula] wide and [formula] (then also [formula] is wide by G-invariance of μ). Observe that St(p) is stable under inversion. Finally, Stab(p) is the subgroup generated by St(p).

If p and q are two types, we let [formula] does not fork over M}.

We recall one version of Hrushovski's stabilizer theorem from [\cite=Hru12].

Let μ be an M-invariant ideal on G stable under left and right multiplication. Let X  ⊆  G be a symmetric M-definable set such that μ is S1 on X3. Let q be a wide type over M concentrating on X. Assume

Then there is a wide type-definable subgroup S of G. We have S = (q- 1q)2 and qq- 1q is a coset of S. Moreover S is normal in the group generated by X and [formula] is included in a union of non-wide M-definable sets.

We will not actually use this theorem, but some modified versions of it, which we prove in this section. Theorem [\ref=th_babystab] below is very close to Fact [\ref=fact_stab]. The proof is of course very much inspired, at times literally copied, from that of Hrushovski. The main difference is that we assume the ideal to be S1 on up to four products of the type and its inverse (instead of three), and this allows us to simplify slightly the arguments. Furthermore, we drop assumption (F) and under assumption (B1), we forgo right-invariance.

The proof in [\cite=Hru12] operates by acting on the right on q, we decide to act on the left, which explains some differences in the statements.

We will need a stronger version of Fact [\ref=HrStable], where we restrict the requirement that μ has the S1 property in all sets.

Note that by invariance of μ, every translate of p and q is medium. Let [formula] be an indiscernible sequence and assume that R(gi,hj) holds if and only if i  ≤  j.

Case 1: [formula] is wide.

We then have that for all i > 0, [formula] is wide by indiscernibility. Also for i < j, we have [formula] is not wide as already [formula] is not wide. Therefore the sequence [formula] contradicts the S1 property inside g0p.

Case 2: [formula] is not wide.

We know that for all i < 2, [formula] is wide. Hence the sequence [formula] contradicts the S1 property inside h2q.

Take (a,b)∈p  ×  nfp. Since St(q) is stable under inverses, it suffices to show that [formula] is wide, which is equivalent to [formula] is wide. As q is medium, by stability it is enough to prove this for one pair (a,b)∈p  ×  nfp. Take (ai:i < ω) an indiscernible sequence in p such that [formula] is non-forking over M. Then [formula] is wide for all i, as p∈St(q,r). As r is medium, it follows that [formula] is wide. In particular [formula] is wide, as required.

The first part follows from the previous lemma by taking q,r there to be p here. The second part of the statement is proved in the same way by multiplying on the right.

We will also show the following.

We need to show that [formula] is wide. Let (ai)i < ω be an indiscernible sequence of realizations of p such that [formula] is wide for all n (and hence non-forking over M as p is medium). By stability, it is enough to show that [formula] is wide. The type-definable sets (a- 1ir)i < ω are wide and included in p- 1r which is medium by hypothesis, so by the S1 property [formula] is wide as required.

Let μ be an M-invariant ideal on G stable under left multiplication. Let p∈SG(M) be wide. Assume either (B1) or (B2), where:

Then Stab(p) = St(p)2  =  (pp- 1)2 is a connected, wide type-definable group on which μ is S1. Furthermore [formula] is included in a union of non-wide M-definable sets.

Here we take for λ the ideal of all definable sets on which μ is S1, so a type is medium if μ is S1 on it. In particular, under either of (B1) or (B2), we have that both p and p- 1p are medium.

The proof will proceed by a series of steps. Only in the beginning will there be differences depending on whether (B1) or (B2) is assumed.

Claim 1: Let (a,b)∈p  ×  nfp, then ba- 1∈St(p).

Proof: This follows immediately from Lemma [\ref=repeatedClaim].

Claim 1': If (B1) holds, then for any (a,b)∈p  ×  nfp we have a- 1b∈St(p).

Proof: By symmetry of X, we have that p2 is medium, so the result follows from Lemma [\ref=repeatedClaim] with p = p- 1 and r = p.

Take now (a,b)∈p  ×  nfp, [formula] wide. We define [formula] under assumption (B1) and [formula] under assumption (B2). Then in both cases q∈St(p), q is wide (using right-invariance in the (B2) case) and medium. Notice that under either assumption p- 1q is medium: under (B1) p- 1q  ⊆  X3 and under (B2) p- 1q  ⊆  p- 1pp- 1.

So Lemma [\ref=repeatedClaim] implies

Claim 2: Let (a,b)∈p  ×  nfp, then ba- 1∈St(q).

Claim 3: Let (b,c)∈Stab(q)  ×  nfq, then bc∈St(p).

Proof: As St(q) is stable under inverse, we can write [formula], with each bi∈St(q). We show the result by induction on n. For n = 0, it follows from the fact that q∈St(p).

Assume we know it for n - 1 and take [formula]. We have to show that [formula] is wide. As bn∈St(q), there is [formula], [formula] wide such that [formula]. We may also assume that [formula] is wide. Then by translation invariance, [formula] is wide. By induction, [formula] is wide, then so is [formula] and we conclude by stability.

Claim 4: Let [formula], then ab- 1∈St(q)2.

Proof: Take [formula] such that [formula] is non-forking over M. Write ab- 1  =  (ac- 1)(cb- 1). By Claim 2 and the fact that St(q) is closed under inverses, both ac- 1 and cb- 1 are in St(q) and the claim follows.

Claim 5: Stab(p) = Stab(q) = (pp- 1)2 is wide and medium.

Proof: By Claim 3, we have Stab(q)  ⊆  St(p)2  ⊆  (pp- 1)2. By Claim 4, pp- 1  ⊆  Stab(q) so also (pp- 1)2  ⊆  Stab(q), hence (pp- 1)2  =  St(p)2 = Stab(q). Finally, since Stab(q) is a subgroup, we have Stab(p) = St(p)2 = Stab(q). By hypothesis (pp- 1)2 is medium, and it is wide since it contains q.

So we just need to prove that Stab(p) has no type-definable over M proper subgroup of bounded index, and that any wide type in Stab(p) lies in St(p).

Let T  ≤  Stab(p) be a type-definable over M subgroup of bounded index. We have pp- 1  ⊆  Stab(p), hence for [formula], p  ⊆  Stab(p)a. So p lies in a right coset Sp of Stab(p). This coset is M-invariant and hence type-definable over M. All right cosets of T in Sp are type-definable over M and as p is a complete type over M, it must lie entirely within one of them. Therefore pp- 1  ⊆  T and T = Stab(p).

Now, let s be a wide type in Stab(p) = Stab(q). By Claim 3, for any b∈Stab(q) and [formula] with [formula] wide, [formula] is wide. By stability, the same holds assuming instead that [formula] is wide. Let [formula] and [formula] such that [formula] is wide. Then by left invariance, [formula] is wide. But we also have cb∈Stab(q), hence [formula] is wide. From which it follows that [formula] is wide, so s lies in St(p), as required.

Under assumption (B1), Stab(p) is normal and of bounded index in the group generated by X and Xn is medium for all n.

Write S = Stab(p). Let r be a type over M of elements of X. Then the image of r in G / S is bounded. Indeed, assume not, then we can find an indiscernible sequence (ai:i < ω) of realizations of r such that the cosets aiS are pairwise disjoint. Hence so are the types aipp- 1 (as pp- 1  ⊆  S), but this contradicts S1 inside X3. As r is a complete type over M it must be included in one left coset of S. Applying the same reasoning to r- 1, we see that r is also included in a unique right coset of S. Thus X / S is bounded and if [formula], then cSc- 1  =  c'Sc'- 1 = :Sr is type-definable over M.

We now claim that p- 1 has bounded image in G / Sr: for if not, we would have an Mc-indiscernible sequence (ai:i < ω) of realizations of p with a- 1icSc- 1 pairwise disjoint and again a- 1icpp- 1 would be pairwise disjoint contradicting S1 in X4. Hence p- 1 lies entirely within one left coset of Sr and pp- 1  ⊆  Sr. Therefore S  ≤  Sr. We also have S  ≤  Sr- 1 and then S = Sr.

We have shown that S is normalized by X and has bounded index in it. It follows that S has bounded index in any Xn, thus Xn is medium.

If we assume that both conditions (B1) and (B2) (equivalently (B1) and right-invariance) hold, then pp- 1p is a coset of Stab(p).

Let [formula]. By the previous proposition Stab(p) is normal in the group generated by X. Since pp- 1  ⊆  Stab(p), p lies entirely within one coset of Stab(p) and hence pp- 1p  ⊆  Stab(p)c. Conversely, take any a∈Stab(p)c and let [formula] such that [formula] is wide. Then ba- 1∈Stab(p) and [formula] is wide by right-invariance. By Theorem [\ref=th_babystab] any wide type in Stab(p) is in St(p), so ba- 1∈St(p)  ⊆  pp- 1. So a = ab- 1b∈pp- 1p.

We now wish to relax the hypothesis that μ is S1 on (pp- 1)2 and assume only that μ is S1 on generic products in p- 1p (see condition (B) below). We will need however to make extra technical hypothesis (A) and (F).

Let μ and λ be M-invariant ideals on G as above, stable under left and right multiplication, and such that μ is S1 in any X∈λ.

Assume we are given a wide and medium type p in G and the following conditions are satisfied:

Then Stab(p) = St(p)2  =  (pp- 1)2 is a connected type-definable, wide and medium group. Also [formula] is contained in a union of non-wide M-definable sets.

Condition (A) implies that if q is a medium type, then both St(q) and Str(q) are medium.

Claim 1: If (a,b)∈p  ×  nfp, then ba- 1∈St(p).

Proof: By Lemma [\ref=repeatedClaim].

Claim 1': If (a,b)∈p  ×  nfp, then a- 1b∈Str(p).

Proof: By Claim 1, we have that if (a,b)∈p  ×  nfp, then ba- 1∈St(p), in particular [formula] is medium. We can then repeat the argument of Lemma [\ref=repeatedClaim] by multiplying on the right to show Claim 1'.

Let μ' be the ideal defined by [formula]. Then μ' is M-invariant, invariant under left and right multiplication and is S1 on any inverse of a medium type. We will write St', Stab' for the stabilizers with respect to μ'.

Let [formula], [formula] wide (hence non-forking over M) and [formula]. Then q is μ'-wide and is in St(p), as St(p) is closed under inverses, and thus q and q- 1 are medium. Also if [formula], then [formula] by Lemma [\ref=lem1]. In particular [formula] is medium.

Claim 2: If (b,c)∈Stab'(q)  ×  nfq, then bc∈St(p).

Proof: As St'(q) is stable under inverse, we can write [formula], with each bi∈St'(q). We show the result by induction on n. For n = 0, it is clear.

Assume we know it for n - 1 and take [formula]. We have to show that [formula] is wide. As bn∈St'(q), there is [formula], [formula] μ'-wide such that [formula]. We may also assume that [formula] is μ'-wide. Then by translation invariance, [formula] is μ'-wide. By induction, [formula] is wide. We conclude by stability.

Claim 3: There is [formula], [formula] μ'-wide, such that [formula] and its inverse are medium.

Proof: By (F) there is (c,d)∈p  ×  nfp such that also [formula] does not fork over M. Let [formula]. Let [formula] and choose b0 such that [formula]. Then [formula] and [formula] does not fork over M. Now choose [formula] such that [formula] is wide and [formula]. We can furthermore assume that [formula] is wide. By translation invariance, [formula] is μ'-wide. Now pick b2 such that [formula] is non-forking over M and [formula] so that [formula]. By transitivity of non-forking, we have [formula] is non-forking over M. Hence [formula].

By Claim 1' and the since Str(p) is stable under inversion, r∈Str(p) and by Lemma [\ref=lem1], a- 1b0b- 11b2 is also in Str(p). It follows that [formula] and its inverse are medium. By hypothesis (A), [formula] and its inverse are medium.

Claim 4: If [formula], then ab- 1∈St'(q).

The proof is similar to that of Lemma [\ref=repeatedClaim]. As there, we can take (ai:i < ω) an indiscernible sequence in p with [formula] wide and it is enough to show that [formula] is μ'-wide. By Claim 3, there is [formula] with [formula] μ'-wide, (ai)i < ω indiscernible over Mb and [formula] and its inverse are medium. Also [formula]. By translation invariance, [formula] is μ'-wide, hence [formula] is wide. By indiscernibility, [formula] is μ'-wide for all i. As r- 1 is medium, it follows that [formula] is μ'-wide.

Now we can conclude: we have by Claim 2, Stab'(q)  ⊆  St(p)2  ⊆  (pp- 1)2. Let [formula] and choose [formula] such that [formula] and [formula] do not fork over M (using (F)). We can furthermore assume that [formula] does not fork over M. Then [formula] and [formula] and ab- 1  =  (ac- 1)(cb- 1). By Claim 4, both ac- 1 and cb- 1 are in St'(q), therefore ab- 1∈Stab'(q). We thus have pp- 1  ⊆  Stab'(q). Therefore Stab'(q) = St(p)2 = (pp- 1)2 and as Stab'(q) is a subgroup, Stab'(q) = Stab(p). Type-definability of Stab(p) is clear, so is wideness. The fact that Stab(p) = Stab'(q) is medium follows from Claim 2 and property (A).

Connectedness is proved as in Claim 6 of Theorem [\ref=th_babystab]. Finally, the fact that any wide type in Stab(p) lies in St(p) is proved as Claim 7 in Theorem [\ref=th_babystab] replacing Stab(q) there by Stab'(q).

The following lemma will be useful later to check that the hypothesis of the theorem are satisfied.

We show that a- 1b∈St(q), i.e., that [formula] is wide. As q is medium, by stability, it is enough to show this for some pair (a,b)∈p  ×  nfp. Take (ai:i < ω) an indiscernible sequence in p with [formula] wide and it is enough to show that [formula] is wide. By assumption [formula] is wide. As r is medium, by the S1 property, [formula] is wide, hence [formula] is wide as required.

Groups with f-generics in NTP2

In this section we will use Theorem [\ref=th_babystab] to prove Theorem [\ref=th_stab], which is a stabilizer theorem for strong f-generic types in a group G definable in an NTP2 theory (see Definition [\ref=strong_f_generics]).

We work here with a complete theory T and let U denote a monster model of T.

We recall the definition of NTP2.

We will assume throughout this section that T is NTP2. Let G be a [formula]-definable group. Recall that an extension base is a set A such that no p∈S(A) forks over A. We will use the following results (the first three are from [\cite=ChKa] and the fourth one from [\cite=BYC]).

Let T be an NTP2 theory and A an extension base.

For any b, there is an A-indiscernible sequence (bi:i < ω) such that for any formula φ(x;b) which divides over A, the partial type {φ(x;bi):i < ω} is inconsistent.

A formula forks over A if and only if it divides over A.

Condition (F) is satisfied: given any type p over A, there are [formula] such that [formula] and [formula] are non-forking over A.

The ideal of formulas which do not fork over A is has the S1 property.

It is proved in [\cite=NIP2] that a definable group in an NIP theory is definably amenable (that is, admits a definable G-invariant measure on definable sets) if and only if it admits a strong f-generic type over some model. The theory of definably amenable NIP groups was studied in [\cite=NIP1], [\cite=NIP2] and [\cite=CS] (amongst other papers). In particular, the paper [\cite=CS] characterizes in various ways formulas which extend to strong f-generic types. We generalize here those results to the NTP2 context, assuming that G admits a strong f-generic type. The proofs are very similar to those in [\cite=CS].

First, we generalize Proposition 5.11 (i) of [\cite=NIP2], with essentially the same proof.

We expand the structure by adding a new sort S which, as a set, is a copy of the group G and we put all G-invariant relations on it. So S becomes a homogeneous space for G and any point of S gives rise to a definable bijection between S and G. This expanded structure is NTP2 , and is conservative: it does not add any definable sets to the main sort. For A  ⊆  U, there is a strongly f-generic type over A if and only if the formula xS  =  xS in the expanded structure does not fork over A. (See [\cite=NIP2] or [\cite=NIPbook].)

Now assume that xS  =  xS does not fork over some M  ⊆  U and let A  ⊆  U be an extension base. Let Ñ be an |M|+-saturated model of the expanded theory containing A.

In this expansion, the type [formula] does not fork over A.

There is therefore [formula] such that [formula] does not fork over A. By assumption, there is some d∈S such that [formula] does not fork over M'. Then by transitivity of non-forking, [formula] does not fork over A as required.

Let g,h∈G(N). Then [formula] does not fork over A and neither does [formula]. By transitivity of non-forking, [formula] does not fork over A. Hence [formula] does not fork over A. Since g,h were arbitrary in G(N), this shows that [formula] is strongly bi-f-generic over A.

Since N is |A|+-saturated, [formula] extends to a global type strongly bi-f-generic over A. (This is a closed condition and any finite part of it can be dragged down into N.)

We will say that the group G has strong f-generics if it has a strongly f-generic type over some/any extension base. By Lemma [\ref=lem_biexist] it would then also have a strong bi-f-generic type over any extension base.

If for some g∈G, φ(g- 1x) forks over A, then it divides over A and there is an A-indiscernible sequence (gi:i < ω) such that {φ(g- 1ix):i < ω} is inconsistent. This shows that φ(x) G-divides over A. Conversely, if φ(x) G-divides over A as witnessed by (gi:i < ω), then φ(g- 10x) divides over A.

Let A  ⊆  B be two extension bases over which φ(x;a) is defined, then φ(x;a) G-divides over A if and only if it G-divides over B so the same is true for f-generic. From now on, we drop the "over A" when talking about f-generic formulas.

Assume that φ(gx;b) does not fork over A and let [formula] with [formula]. Then [formula]. We also have [formula] by hypothesis. By transitivity, [formula]. Since [formula], we get that φ(x;b) does not fork over A.

Let A be an extension base, A  ⊆  B and φ(x)∈L(B). Let q be a global type strongly f-generic over A and [formula]. Then φ(x) extends to a global type strongly f-generic over A if and only if g- 1  ·  φ(x) does not fork over A.

Assume that φ(x) does not extend to a global type strongly f-generic over A. Then there are elements gi, i < n in G(U) and formulas φi(x;b)∈L(U) each forking over A such that [formula]. We can assume that g realizes q over Bb{gi}i < n. We have then that [formula]. Now, [formula] does not fork over A for each i < n. By Lemma [\ref=lem_genfork], this implies that φi(gigx;b) forks over A. Hence φ(gx) = g- 1  ·  φ(x) forks over A.

Conversely, if φ(x) extends to some global type strongly f-generic over A, then no translate of φ(x) forks over A and in particular g- 1φ(x) does not fork over A.

The previous results combine into the following equivalences.

Let A be an extension base and assume that there is a global type q strongly f-generic over A. Let φ(x)∈L(A) and let g realize q over A. The following are equivalent:

1. φ(x) is f-generic;

2. φ(x) does not G-divide over A;

4. g- 1  ·  φ(x) does not fork over A;

5. φ(x) extends to a global type strongly f-generic over A.

As usual, we extend definitions from definable sets to types: we define a type to be f-generic if it contains only f-generic formulas.

Let A be an extension base and assume that there is a global f-generic type q. Let φ(x)∈L(A) and let g realize q over A. Then φ(x) is f-generic if and only if g- 1  ·  φ(x) does not fork over A.

If φ(x) is f-generic, then g- 1  ·  φ(x) does not fork over A by definition.

Conversely, assume that φ(x) does G-divide and let (gi:i < ω) be an A-indiscernible sequence witnessing it. Let   =  q|A.

The partial type [formula] is consistent.

Let h realize [formula], so [formula] for each i. Notice that {h- 1g- 1i  ·  φ(x):i < ω} is still k-inconsistent for some k, and g- 1  ·  φ(x) divides over A as required.

Assume that there is a global f-generic type, then the family μ of non-f-generic formulas is an ideal.

Let q be a global f-generic type. Let φ(x) and ψ(x) be non-f-generic and take M a model over which both are defined. Let [formula] as in the previous proposition. Then g- 1  ·  φ(x) and g- 1  ·  ψ(x) both fork over M, hence so does [formula]--as forking equals dividing over M--which implies that [formula] is not f-generic.

Assume that there is a global f-generic type, then is there a strongly f-generic type?

Notice that the ideal μ of non-f-generic formulas is [formula]-invariant and invariant by translations on the left and on the right. It is however not S1 in general. For this we have to work with μA.

Assume that G has a strong f-generic type over A. Let μA be the ideal of formulas φ(x)∈L(U) which do not extend to a global type strongly f-generic over A. Then μA is A-invariant, left-G-invariant over A. By Proposition [\ref=prop_fund], μ and μA agree on L(A).

Assume that (ai:i < ω) is an A-indiscernible sequence such that φ(x;ai) extends to a type strongly f-generic over A. Let q be strongly f-generic over A and let g realize q over Aa<  ω such that (ai)i < ω is indiscernible over Ag. Then g- 1  ·  φ(x;ai) is non-forking over A for all i. As the non-forking ideal is S1 in NTP2  theories, also [formula] is non-forking over A. By Proposition [\ref=prop_fund], [formula] is μA-wide.

Stabilizers of strong f-generic types

We will need the following definitions.

Let (ai:i < n) be a maximal sequence such that the sets (aiX:i < n) are disjoint, which must exist by f-genericity of X. Take any b∈G. Then for some i < n, [formula]. Hence b∈aiXX- 1 and [formula].

Let X be a definable set containing H. Then there is a definable set Y containing H such that YY- 1  ⊆  X. By hypothesis, Y is f-generic and the previous lemma implies that YY- 1 is generic and therefore X is generic.

In the following statement, μM is the ideal of formulas which do not extend to a global type, strongly f-generic over M.

Assume that G has strong f-generics. Let p∈SG(M) be f-generic.

Then G00M = G∞M = StμM(p)2 = (pp- 1)2 and [formula] is contained in a union of non-wide M-definable sets.

The ideal μM is G-invariant (by left multiplication), M-invariant and S1 on G by Lemma [\ref=lem_s1]. We can apply Theorem [\ref=th_babystab] with hypothesis (B1) to deduce that S = (pp- 1)2 is a wide subgroup. As p knows in which G∞M coset it lies, we must have S  ≤  G∞M. On the other hand, by Lemma [\ref=lem_bddindex], S has bounded index, hence G00M  ≤  S. It follows that those three subgroups are equal. The last statement also follows from Theorem [\ref=th_babystab].

Definably amenable groups

A definable group G is definably amenable if for some (equiv. any) model M, there is a left-invariant Keisler measure on M-definable subsets of G. (See e.g. [\cite=NIPbook].)

Let G be a definably amenable NTP2  group, then G has strong f-generics.

Fix a model M and μ a G-invariant measure on M-definable sets. Let [formula] and assume that μ does not extend to a measure over N which is both G-invariant and non-forking over M. By compactness, there are ε > 0 and finitely many formulas φi(x;d), i < n, each forking over M such that any G-invariant extension [formula] of μ satisfies [formula]. Take (dj:j < ω) an indiscernible sequence in [formula] which witnesses dividing as given by Fact [\ref=fact_ntp], (1). The condition that [formula] extends μ and is G-invariant is invariant under Aut(N / M), therefore for every j, we also have [formula]. So up to taking a subsequence, for some i < n, we have [formula]. But this contradicts Fact [\ref=fact_meas] and the property of (dj)j < ω.

Any solvable or pseudofinite NTP2 group has strong f-generics.

PRC fields

A field M of characteristic zero is pseudo real closed (PRC) if M is existentially closed (relative to the language of rings) in every totally real regular extension N of M. Equivalently, if given any absolutely irreducible variety V defined over M, if V has a simple [formula]rational point for every real closure [formula] of M, then V has an M-rational point.

Prestel showed in Theorem 4.1 of [\cite=Pre] that the class of PRC fields is axiomatizable in the language of fields. We have the following properties of PRC fields.

Let M be a PRC field.

[\cite=Pre] If <   is an order on M, then M is dense in [formula], the real closure of M respect to the order <  .

[\cite=Pre] If <  i and <  j are different orders on M, then <  i and <  j induce different topologies.

In this section we are interested in the class of bounded PRC fields. A field M is bounded if for any integer n, M has finitely many extensions of degree n. This implies in particular that all the orders which make M into an ordered field are definable ([\cite=Mon]), and that there are finitely many of those.

Preliminaries on bounded PRC fields

We fix a bounded PRC field K which is not algebraically closed and a countable elementary substructure K0 of K. So there is [formula] such that K has exactly n distinct orders which are moreover definable (see Remark 3.2 of [\cite=Mon]). Let [formula] be the orders on K. If n = 0, then K is a PAC field, so we suppose from now on that [formula].

We will work over K0, thus we denote by [formula] the language of rings with constant symbols for the elements of K0, [formula] and [formula]. We let [formula]. By Corollary 3.6 of [\cite=Mon], Tprc is model complete. If M is a model of Tprc, we denote by M(i) the real closure of M with respect to <  i.

The following is a direct consequence of the "Approximation Theorem for V-topologies" ([\cite=PreZie]), and of the Fact [formula].

Let [formula] be a model of Tprc. Let A be a subset of M and for every order <  i let p(i) be a quantifier-free [formula]-type in M(i) (so a consistent set of polynomial <  i-inequalities). Then [formula] is a consistent type in L.

Notice that the quantifier free L-types all have the same form as the conclusion of Fact [\ref=SpTh]. We have the following amalgamation theorems for types:

Let [formula] be a model of Tprc. Let [formula]. Let a1,a2,c1,c2 be tuples of M such that [formula] and [formula]. Assume that there is c ACF-independent of {a1,a2} over E realizing [formula]. Then [formula] is consistent.

We now recall some other model theoretic properties of Tprc.

The theory Tprc is NTP2.

In Tprc, all sets are extensions bases and forking equals dividing.

The multi-topology

We extend the definition of [formula]-cells for real closed fields (see Definition 2.3 of [\cite=Van2]) to find a definition of multi-cells in the bounded PRC-field context.

Observe that the (1)-multi-cells are multi-intervals and any multi-box is a [formula]-multi-cell.

Notice also that the open multi-cells in Mr (or cells which are open subsets of Mr) are precisely the [formula]-multi-cells.

Let [formula] and let [formula] and [formula] be two different sequences of zeros and ones of length m. Let Ci∈M(i) be a [formula]-cell and let Cj∈M(j) be a [formula]-cell. Then [formula].

Let ri  =   dim (Ci) and rj  =   dim (Cj). Suppose that there is [formula] such that ā is a generic point of Ci and Cj. Let Xi  =  {ak:ik = 0}, Xj  =  {ak:jk = 0}. Then ri  =  m  -  |Xi| and rj  =  m  -  |Xj|. Observe that if [formula], then [formula]. It follows that [formula]. Since [formula], [formula]. Thus [formula].

It follows that for an intersection of two r-dimensional cells to have dimension r, one needs that both cells have the same sequences of 0's and 1's.

Let [formula] be a model of Tprc; let A  ⊆  M, and [formula]. Let D  ⊆  Mr be an L(A)-definable set in M. Then there are [formula], and [formula] with [formula] a multi-cell in Mr such that:

[formula];

[formula] is τr-dense in Cj, for all 1  ≤  j  ≤  m;

for all 1  ≤  i  ≤  n and 1  ≤  j  ≤  m, Cij is quantifier-free [formula]-definable in M(i);

for all 1  ≤  i  ≤  n and 1  ≤  j  ≤  m, the set [formula] is [formula]-definable in M.

The proof is by induction on the dimension of D. The case dim (D) = 1 follows from [\cite=Mon]. Suppose that dim (D)  =  d. As in Theorem 3.13 [\cite=Mon] using model completeness of Tprc we can suppose that there is an absolutely irreducible variety W defined over [formula] such that:

[formula]

where Wsim(M)  =  {x̄∈W(M):x̄    W}.

Let d  =  ||, for each [formula] we define:

[formula]

So Ai is [formula]-definable and D  ⊆  Ai. By cell decomposition in M(i), there are [formula], <  i-cells [formula] and X such that:

the sets [formula] are quantifier free [formula]-definable in M(i);

dim (Cj) = d, for all [formula];

dim (Xi) < d,

[formula].

Let [formula] and let

[formula]

For all σ∈J, let [formula], so [formula]. We are interested in Cσ of maximal dimension d, so let

[formula]

Let σ∈J'. By Lemma [\ref=DimCells] all the cells Ciσ(i) must have the same sequences of 0's and 1's and therefore Cσ is a multi-cell in Mr.

For all σ∈J', [formula] is τr-dense in Cσ.

Let [formula], so Y is an L(A)-definable set and dim (Y) < d.

Then [formula] and each Cσ satisfy (2),(3) and (4) of the theorem. Since dim (Y) < d, by induction hypothesis we can apply the statement of the theorem to Y instead of D, which completes the proof.

If X  ⊆  Mr is a definable set and [formula] are the multi-cells obtained by Theorem [\ref=Cell-decom], then [formula]. This implies the following corollary.

Let [formula] be a model of Tprc, let A  ⊆  M, and [formula]. Let D  ⊆  Mr be an L(A)-definable set in M. Then there are [formula], and [formula] with [formula] a multi-cell in Mr such that: [formula] and such that for all 1  ≤  i  ≤  n, Cij is quantifier-free [formula]-definable in M(i), for all 1  ≤  j  ≤  m.

The set [formula] is L(A)-definable (so was D) and by Theorem [\ref=Cell-decom] there are [formula] multi-cells in Mr such that [formula]. So [formula].

The theory Tprc is algebraically bounded.

Directly from Theorem [\ref=Cell-decom].

Notation. Let M be a structure and let D  ⊆  Mr be a definable set. Let k  <  r. We define [formula].

For ∈πMk(D), define [formula] Define [formula]. We omit M when the structure is clear.

Expansion by externally definable multi-cells

Here we will show that expanding a bounded PRC field with certain externally definable sets has elimination of quantifiers, analogous to results in [\cite=BaPo] and [\cite=Sh783].

Baisalov and Poizat prove in [\cite=BaPo] that the theory resulting in expanding the language of any o-minimal structure with externally definable sets has elimination of quantifiers. This was generalized by Shelah to all NIP theories in [\cite=Sh783].

Let R be a model of RCF in the ring language Lring and consider the expansion RSh of R obtained by naming all externally definable sets. Then any definable subset of RSh can be written as a finite union of sets of the form [formula], where U is an open externally definable subset and D is Lring-definable.

By [\cite=BaPo] the structure RSh is weakly o-minimal, so it makes sense to consider dimensions of definable sets. Let X  ⊆  Rn be definable in RSh. We prove the result by induction on the dimension of X. If X has dimension 0, then it is finite, and the result follows.

For the inductive case, we can write X as the union of an open set and a set of lower dimension, so we can assume that X has dimension d < n. Let π:Rn  →  Rd be a coordinate projection such that π(X) has non-empty interior (see Theorem 4.11 of [\cite=MMS]). Then again writing π(X) as the union of an open set and a set of smaller dimension, we may assume that π(X) is open. For each ā∈π(X), the fiber Xā is finite. By decomposing X further, we may assume that it has always exactly one element. So X is the graph of a function from U: = π(X) to Rn - d.

Let [formula] be a sufficiently saturated elementary extension. Then by honest definitions ([\cite=NIPbook]), there is an Lring(R')-definable set X'  ⊆  R' such that X'(R')  ⊆  X(R') and X'(R)  =  X(R). Hence X' is also the graph of a function from some R'-definable set V to Rn - d, with V(R) = U(R). As we are working in RCF, up to decomposing V in finitely many R'-definable sets, we may assume that f' is the function sending a point ā∈V to the k-th solution of P(,ā,), where P(,,) is a polynomial with coordinates ∈R'. Since by hypothesis, P(,,) has a solution in R for each ā in the open set U, P is definable over R. This implies that X coincides on U with the graph Γ of an R-definable function. Then [formula] has the required form.

We now aim to show that the expansion of a bounded PRC field in L by externally definable multi-cells has elimination of quantifiers and is NTP2.

Let [formula] be a model of Tprc. Let A  ⊆  M and let D  ⊆  Mr be L(A)-definable. Then there are [formula] and [formula] multi-cells in Mr, L(A)-definable such that [formula] and such that for every [formula] the fiber Dx̄ is τ-dense in (Cj)x̄.

Notice that if [formula] and the theorem is known for D1 and D2, then it follows for D by taking a common refinement of the two cell decompositions obtained for D1 and D2.

Let D be a definable set. By Theorem [\ref=Cell-decom] for any x̄∈πr - 1(D) there are kx̄, [formula] multi-intervals in M and a finite set Bx̄ such that [formula], and such that Dx̄ is τ-dense in Ux̄,j, for all [formula]. By definition of multi-intervals [formula], where Uix̄,j is a <  i-interval in M(i).

For all [formula], let Am1,m2: = {x̄∈πr - 1(D):kx̄  =  m1    |Bx̄| = m2}. By compactness there are only finitely many (m1,m2) for which Am1,m2 is non empty.

Then Am1,m2 is definable with the same parameters as D, and [formula] (a finite union). Since [formula], it is enough to show that each π- 1r - 1(Am1,m2) can be decomposed according to the conclusion of the theorem, so assume that D = π- 1r - 1(Am1,m2) for some (m1,m2).

Let [formula]. For s∈{1,2,3}, let fis,j(x):Am1,m2  ↦  M(i) such that:

fi1,j(x̄)  =  y if and only if y is the "<  i-smallest extremity in M(i)" of the <  i-interval Uix̄,j.

fi2,j(x̄)  =  y if and only if y is the "<  i-largest extremity in M(i)" of the <  i-interval Uix̄,j.

fi3,j(x̄)  =  y if and only if y is the j-th point in Bx̄ in the order <  i.

As the structure is algebraically bounded (see Corollary [\ref=PRCAlgBound]), there is a definable partition of the base [formula] such that on each Xt, each of the functions fis,j coincides with a <  i-semi-algebraic function. Decreasing D further, we may assume that p = 1 and that all the functions fis,j are semi-algebraic.

Now, let

[formula]

and

[formula]

Then [formula] and this decomposition has the required properties.

The structure MN admits elimination of quantifiers.

Let C be an externally L(N)-definable multi-cell and D an L(M)-definable set, both inside some Mr. Let π be the projection to the first r - 1 coordinates. It is enough to show that [formula] is quantifier-free definable in MN.

First, write [formula], where each Ci is an externally definable multi-cell in (M(i))r. By Proposition [\ref=prop_extrcf], we can write each Ci as a finite union of sets of the form [formula], where Ui is an externally definable open subset of (M(i))r and Di is definable in M(i). Then the trace of Ui on Mr is also open by density of Mr in (M(i))r and the trace of Di on Mr is definable in M. The result we want to prove is stable under taking finite unions, so we may assume that [formula] and then by integrating Di into D, we may assume that [formula] is open in Mr.

By Proposition [\ref=UniformDecom], we may assume that D is τ-dense in some multi-cell C* which contains it and such that if x̄∈π(D), then Dx̄ is τ-dense in the fiber (C*)x̄. As C is τ-open, for any x̄∈π(D), if the fiber [formula] is non-empty, then it is open in Cx̄ and thus also [formula] is non-empty. Therefore [formula] is quantifier-free definable in MN.

The structure MN is NTP2.

This follows from Theorem [\ref=th_shelahexp] proved in appendix.

Type-definable subgroups of algebraic groups

In the following proposition, by a definable ideal, we mean an ideal μ such that for any φ(x;y), the set {b:φ(x;b)∈μ} is definable.

Let G be a definable group equipped with a definable (left-) G-invariant S1 ideal μ. Let H  ≤  G be a type-definable subgroup of G which is μ-wide, then H is the intersection of definable subgroups of G.

The proof follows that of Lemma 6.1 in [\cite=HrPi], but since the contexts are not exactly the same we include it for completeness.

Write [formula], where each Hn is definable, stable under inverse and Hn + 1  ·  Hn + 1  ⊆  Hn. Let [formula]. Then δn is a definable, stable (as μ is S1), G-invariant relation. Let Sδn,H be the set of global δn-types (in variable x) which are consistent with H. By stability, all δn-types are definable. Recall that an element of Sδn,H is generic if every set in it covers G in finitely many translates. By Lemma 5.16 in [\cite=HrPi], there are finitely many generic types in Sδn,H.

Let Qn be the definable set {b∈H0:δn(x;b) is in all generic types of Sδn,H}.

[formula].

HQn  ⊆  Qn.

Finally, let [formula]. Then Gn is a subgroup and H  ⊆  Gn  ⊆  Hn, so [formula].

As in [\cite=NIP1], we identify a small neighborhood of e in G with a neighborhood of zero in Rn. If we let ε be infinitesimal with respect to R, then we have

[formula]

for some C∈R and all |x|,|y|  ≤  ε. Let U be the convex set of infinitesimals with respect to R. Then H  =  {x̄,xi∈U for all i} is a subgroup of G.

The set U is definable using parameters in R*, so U is defined by a predicate Ũ in Rext and therefore H is also defined by a predicate H̃.

Let ṽ denote the set of elements x in R such that x  ≥  1 / n for some 0 < n < ω, which by compactness and saturation is also the trace in R of an R*-definable set, so it is definable in RSh.

Let [formula] be the type in H̃ saying that x1 is as large as possible in Ũ, and for all k > 1, xk / xk - 1 is infinitely small in ṽ. Using weak o-minimality of Rext we know that p determines a (definable) complete type.

We will show that p is H̃-invariant, so that H̃(R) and p satisfy the statement of the lemma. Let [formula] and let [formula] realize p over R*. We have to show that [formula] realizes p over R*.

All coordinates of ā and all b2k, are infinitesimal with respect to each bk, so [formula], where ||  ≤  C  ·  b21. Now y1  =  b1  +  a1  +  ε1, a1∈R*, b1 as as large as possible in U and |ε1|  ≤  b21 which is much less than b1, so [formula] satisfies [formula].

In the same way, we have

[formula]

hence

[formula]

from which it follows that yk / yk - 1 realizes over R the type of an infinitesimally small element in ṽ. So [formula] realizes p, as required.

Let M be a model of Tprc. Let H be an algebraic group definable in M, let K  ≤  H be a type definable subgroup and [formula]. Then K has bounded index in L, and L / K with the logic topology is profinite.

Let [formula] be the Zariski closure of K. Then [formula] is an algebraic subgroup of H, [formula] is type-definable and [formula].

So replacing H by [formula] we can suppose that dim (H)  =   dim (K): = m. Observe that K has bounded index in L.

Let [formula] be |M|+  -  saturated. We now work in the structure MN defined in Definition [\ref=ShelahExpPRC]. It is NTP2 by Corollary [\ref=ShelahExpNTP]. Suppose we have n-definable orders. For each i, we will define, in the ordered <  i-ring language L(i) (using externally definable sets) a definable set Vi, and a type pi in N(i) as follows.

For each [formula], let Vi be the Lext-definable subgroup of H, and let pi be the invariant Lext-definable type given by Lemma [\ref=RCFInvType]. So Vi is the trace of an N(i)-definable set in M(i).

Let [formula], and let [formula]. By Fact [\ref=SpTh], [formula] and p is finitely consistent in M.

We have that V is an externally definable set in M, and each pi is definable in (N(i))ext, so p is a definable partial type in MN. In a similar way we also obtain that p is V-invariant.

So V is a τ-open definable subgroup of L, and since K is τ-dense in L, all the cosets intersect K and we obtain that [formula].

We define an ideal μ over V by X∈μ if [formula]. This ideal is definable and V-invariant.

μ is S1 over V.

Now, [formula] so that [formula] is μ-wide. It follows by Theorem [\ref=TdefGps] that [formula] is an intersection of definable groups. Hence [formula] with the L*-logic topology (see Definition [\ref=ShelahExpPRC]) is profinite, and then so is L / K which is isomorphic to it.

The L-logic topology on L / K is compact and Hausdorff and is weaker than the L*-logic topology which is also compact and Hausdorff. It follows that both topologies coincide. In particular L / K with the L-logic topology is profinite so that [formula] where Hi is L-definable and [formula] is a subgroup of L.

Definable groups with f-generics in PRC

Let M be a model of Tprc and let [formula], M is |M0|+-saturated. Let G be a definable group in M and let p be a global type in G strongly f-generic over M0. Let [formula], [formula], and c = ab. Then [formula] if strongly f-generic over M0 and there is an M-definable algebraic group H and dimension-generic elements a',b',c'∈H(U) such that a'  ·  b'  =  c' and [formula], [formula] and [formula].

This is precisely Proposition 3.1 of [\cite=HrPi]. We modified the statement to additionally require that we can choose a,b,c and the set A to be inside M, but the reader can verify that this conditions can be met by the construction done in the proof.

Let [formula] be ω-saturated. Let G be an M-definable group with strong f-generics. Then there is a finite index M-definable subgroup G1  ≤  G, a finite K  ≤  G1 central in G1, a multi-semialgebraic group H defined over M such that G1 / K is definably isomorphic to a finite index subgroup of H(M).

Let μM be the ideal of formulas which do not extend to a strongly bi-f-generic type over M. So μM is M-invariant, S1 and invariant under both left and right translations by elements of G. Let q∈S(M) be μM-wide. By Theorem [\ref=th_stab], Stab(q)  =  G00M and μM-almost all elements of G00M are in St(q).

Let a∈G00M be such that [formula] is μM-wide. Let [formula] such that [formula] is μM-wide and [formula].

By Proposition [\ref=prop_groupconf] there is an M-definable algebraic group (H,  ·  H) and a',b',c'∈H such that c' = a'  ·  Hb', [formula] and [formula].

We define an ideal μ on G  ×  H, by saying that D∈μ if and only if π1(D)∈μM. Then μ is M-invariant and invariant under left and right translations. We will refer to μ-wide as "wide".

We define the ideal λ (that will define "medium" in Section [\ref=SStabilizer]) as the set of subsets X of G  ×  H for which the projections to G and H each have finite fibers. Note that μ is S1 on medium types. Define [formula]. Then [formula] is wide and medium. We will show that Theorem [\ref=th_stabilizer] can be applied to the type [formula].

Condition (A) holds: If p,q are two types in G  ×  H and we have [formula] such that either [formula] or [formula] is medium, then p is medium.

By Lemma [\ref=lem_stqr], condition (B) holds. As Tprc is NTP2, condition (F) holds. We can then apply Theorem [\ref=th_stabilizer], which gives us a connected, medium, wide type-definable group K  ≤  G  ×  H. As K is medium, its projections to G and H have finite fibers. As K is wide, π1(K) is μM-wide and hence by connectedness π1(K) = G00M.

We may assume that π1 and π2 are injective on K.

Now choose a symmetric definable X0 such that K  ⊆  X0  ⊆  G  ×  H, and such that π1 and π2 are injective on X40. Replacing G by a subgroup of finite index, we can assume that π1(X0) generates G. By Proposition [\ref=prop_normal], K is normal in the group generated by X0 and Xn0 is medium for any n. Observe that π1(X0)  ⊆  G is definably isomorphic to π2(X0)  ⊆  H. In π2(X0), the multi-topology τ is definable and the operations in H are continuous.

Since working with projections becomes quite messy, we will abuse notation in the following way:

Any element of X0 will be written as (x*,x) where x*∈G and x∈H. So x*  =  π1(π- 12(x)) for any element x in π2(X0)  ⊆  H. We will also do this for sets, so that A*  =  π1(π- 12(A)) for any A  ⊂  π2(X0).

All non *-elements will be assumed to belong to H. We will use Greek letters for elements in G which may not be in π1(X0).

We will identify K with π2(K).

We will mostly be working inside H, so we will drop the index in ·  H.

In H we have that [formula] is generic in [formula] and by Proposition [\ref=PRCProfinite], [formula] is profinite, so there is a L-definable set X  ⊆  π2(X0) such that [formula] is a subgroup of finite index of [formula], and K*1 is a type-definable subgroup of bounded index of G (G00M  ⊆  K*1). By passing to a finite index subgroup of G, we may assume that X* generates G.

We may assume that K1 is a normal subgroup of [formula], in fact normalized by X, and that K*1 is a normal subgroup of G.

Now, [formula] is the intersection of multi-semialgebraic sets in H. We can define a decreasing sequence (Uk:k < ω) of quantifier-free definable symmetric sets, such that:

- [formula];

- [formula], for each m < ω;

- [formula], for each m < ω and g∈X;

- [formula].

Note that by density of X in U0 and by continuity of the operations, we also have (Um  +  1)3  ⊆  Um and gUm  +  1g- 1  ⊆  Um for all g∈X.

We may assume that Um are multi-open, for m  ≥  1.

Select points {αk:k < p} in G such that

[formula]

Note that for any x∈G, there is k < p such that [formula] and then [formula].

Let m be the smallest integer such that every αi is the ·  G-product of m elements in [formula].

For each i, the conjugation map fi:x  ↦  π2(π- 11(αi  ·  Gx*  ·  G(αi)- 1)) is an algebraic map from [formula] to [formula] for k  ≥  3.

Select points {bi:i < l} in [formula] such that

[formula]

For j < p and r < l, define α(j,r)∈{αk:k < p} and [formula] such that (where all the products are in G):

[formula]

Let [formula] and for k < p, define [formula].

Define an equivalence relation E on W2 by (x,i)E(y,j) if αi  ·  Gx*  =  αj  ·  Gy*. We then have

[formula]

If this happens, then α- 1j  ·  Gαi lies in [formula] and can be written as w*ij for some [formula]. When this is not the case, say that wi,j is undefined.

Note that we have a definably bijection φ:W / E  →  G sending (x,i) to αi  ·  Gx*.

We will now define a multi-semialgebraic group, which in a way will be the τ-topological closure of W / E.

Let [formula] and Wclk  =  U3  ×  {k}. We equip each Wclk with the τ-topology. Then Wk is dense in Wclk.

We now define a relation Ecl on Wcl as follows: given (x,i),(y,j)∈Wcl, we have (x,i)Ecl(y,j) if and only if wij is defined and yx- 1  =  wij.

Ecl is an equivalence relation.

By construction W / E embeds in Wcl / Ecl. We now define a group structure on Wcl / Ecl. First consider (x,i),(y,j),(z,k)∈W and write x = brw with [formula]. We then have, where all the products are understood in G:

[formula]

When such an equation holds, we define ε(i,j,k,r) as [formula]. Let Γ∈W3 be the pullback of the graph of multiplication on [formula] via the canonical projection. Then ((x,i),(y,j),(z,k))∈Γ if and only if ε(i,j,k,r) is defined and writing x = brw, we have:

[formula]

We define Γcl on Wcl by ((x = brw,i),(y,j),(z,k))∈Γcl if (EΓ) holds. We need to check that this is well defined, i.e., does not depend on the decomposition of x as brw. So assume that x = brw = bsw'. Then w'  =  b- 1sbrw. Assume that t(j,r)fj(w)yz- 1  =  ε(i,j,k,r). On a small neighborhood of (w,y,z) we can find (w0,y0,z0), all points lying in X such that t(j,r)fj(w0)y0z- 10  =  ε(i,j,k,r) (as all operations are continuous). Set w'0  =  b- 1sbrw0, then w'0 is close to w', hence in [formula] and we have t(j,s)fj(w'0)y0z- 10  =  ε(i,j,k,s) (in particular ε(i,j,k,s) is defined). Letting (w0,y0,z0) converge to (w,y,z), we obtain t(j,s)fj(w')yz- 1  =  ε(i,j,k,s) as required.

A similar argument shows that Γcl is Ecl-equivariant: if say (z,k)Ecl(z',k'), then we have z' = wii'z and we conclude as above that ((x,i),(y,j),(z,k)) is in Γcl if and only if ((x,i),(y,j),(z',k')) is in Γcl. Therefore Γcl induces a ternary relation on the quotient Wcl  /  Ecl. Note that on each Wcli  ×  Wclj  ×  Wclk, Γcl is the closure of Γ.

Γcl induces the graph of a function Wcl / Ecl  ×  Wcl / Ecl  →  Wcl / Ecl.

Let [formula] the boolean function induced by Γ on Wcl / Ecl. As associativity is a closed condition Γcl is the closure on Γ on each Wi  ×  Wj  ×  Wk, [formula] is associative. Existence of inverses is proved as the existence part of the previous claim, fixing z = e and looking for y. Therefore we have equipped Wcl / Ecl with a group structure. Write this group as G0.

The sets Wclk are multi semialgebraic and Ecl and Γcl are algebraic. Strictly speaking, G0 thus constructed is not multi semialgebraic as its construction involves quotients. However one can easily remove the quotients: letting π:W  →  G0 be the quotient map, G0 is in definable bijection with a multi semialgebraic group with underlying set

[formula]

As G embeds definably into G0 as a subgroup of finite index. This finishes the proof of the theorem.

Additional comments

As already pointed out in the introduction, we in fact obtain a stronger statement than stated in Theorem [\ref=th_main]: A finite index subgroup of G is isogeneous with a finite index subgroup of a 'multi-Lie group' that is a group which admits a definable manifold structure, in the sense of the multi-topology, for which the group operations are continuous (even C∞ with respect to each order).

Will Johnson has studied in [\cite=joh_prc] the model companion of fields with n distinct orderings. This is a particular case of bounded PRC fields. Johnson proves that a Lascar-invariant quantifier-free type extends to a Lascar-invariant measure. It seems likely that an adaptation of those results should show that in this case, any group with f-generics has a translation-invariant measure.

We expect those results to generalize to groups definable in the main sort of a pseudo p-adically closed field. This will be dealt with in future work.

Appendix: Shelah expansion and NTP2

Let T be NTP2 in a language L and assume that we have an expansion T' of T to a language L' by externally definable sets. Assume furthermore that T' has elimination of quantifiers in L' and the only additional predicates in L' are traces of externally definable NIP formulas. Then T' is NTP2.

Let [formula] be [formula]-saturated and let [formula] be |M|+-saturated. The property of NTP2 for formulas is preserved by finite disjunctions, but not by finite conjunctions in general. It is enough to show that a formula of the form [formula] is NTP2, where φ(x;y)∈L and ψ(x;y)∈L' is such that there is an NIP L-formula ψ̃(x;y;d)∈L(N) such that [formula]. Let (N,M) denote the expansion of N with a new unary predicate naming M. Let [formula] be a sufficiently saturated elementary extension. By honest definitions, there is θ(x,y;e)∈L(M1) such that θ(M;e) = ψ(M) and θ(M1;e)  ⊆  ψ̃(M1;d). Note that the formula θ(x,y;e) could have IP.

Now assume that we are given a witness of TP2 for [formula]. Namely, we have an array (bi,j:i,j < ω) and some k such that each line [formula] is k-inconsistent and for every η:ω  →  ω, the path [formula] is consistent, hence realized by some aη∈M. Now the properties of the array are preserved if we replace the formula [formula] by [formula]: the paths are still consistent, using the same witnesses aη, and the lines are still k-inconsistent (in the structure M1) by the honesty property. This shows that the formula [formula] has TP2 in M1 which contradicts the hypothesis that T is NTP2.