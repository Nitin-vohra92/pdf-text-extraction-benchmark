TARGET: A Digitizing And Trigger ASIC For The Cherenkov Telescope Array

INTRODUCTION

The TARGET application-specific-integrated circuit (ASIC) series has been designed and optimized specifically for the readout of Cherenkov cameras [\cite=target], such as the GCT [\cite=GCT] (or see paper of L. Tibaldo et al. in these proceedings) and SCT [\cite=SCT] telescopes proposed for the Cherenkov Telescope Array (CTA) [\cite=CTA]. CTA will feature a number of telescopes an order of magnitude higher than present arrays like H.E.S.S. or VERITAS and, therefore, the costs for the readout electronics are an important factor and should be reasonably low. Nevertheless, performance requirements given by the CTA consortium have to be met in order to reach the scientific goals aimed for. The proposed layout of the TARGET modules is capable of reading out 64 photodetector pixels and consists out of 8 TARGET ASICs and a companion field-programmable gate array (FPGA) and, thus, features a very limited number of components, making it both cheap and reliable.

The key features of all generations of TARGET ASICs are a tunable sampling frequency ≥   1 GSa/s, a several μs deep analog buffer, a dynamic range ≥   10 bits, trigger with adjustable threshold, a continuous sampling and almost deadtime free operation as well as the possibility to record full waveforms.

In order to minimize the crosstalk between the sampling and trigger paths, which occurred in former versions of TARGET, the two functions have been split into separate ASICs in the newest generation of TARGET ASICs, with the T5TEA ASIC for triggering and the TARGET C ASIC for sampling and digitization. This step significantly improves the trigger performance whilst retaining the charge resolution and dynamic range of TARGET 7 [\cite=ICRC2015].

In this paper we give a short overview of the architecture of TARGET and present some measurements carried out to characterize the performance of the ASICs. We conclude with an outlook of future developments.

TARGET C AND T5TEA ARCHITECTURE

The main functional blocks of the ASICs are triggering (T5TEA), analog sampling and storage buffers, analog-to-digital converters (ADC) for digitizing the signals (TARGET C) and internal digital-to-analog converters (DAC) for setting operation values (both). The sampling and storage of signals is done using switched capacitor arrays (SCAs) where the signal is connected sequentially to the capacitors via analog switches. The sampling array consists of two blocks with 32 cells (capacitors) operated in ping pong mode: while data sampling is performed by one block, the other block is buffered to the storage array. In contrast, the storage array consists of a larger number of cells (16348 per channel) to guarantee a large buffer depth (~  16 μs). Wilkinson ADCs are used for digitizing the analog signals in the storage array on demand. A Wilkinson ramp generator passes an adjustable ramp to all channels and simultaneously a 12 bit counter starts counting until the ramp signal crosses the analog voltage. The measured counts then correspond to the value of the applied signal. The digitization is initiated by a request from the FPGA based on external or internal (i.e. from T5TEA) signals. These features and other important ones (including performance results which will be explained in the following sections) for TARGET C and T5TEA are listed in Table [\ref=tab:targets]. For comparison we also show the performance of previous generations of TARGET, namely TARGET 5 and TARGET 7.

For all the measurements presented in this paper a custom evaluation board was used. This board only contains the two ASICs, TARGET C and T5TEA, and all necessary components to control them, notably a FPGA. Figure [\ref=fig:evalboard] shows a photograph of the evaluation board used for all the measurements.

CHARACTERIZATION OF TARGET C AND T5TEA

TARGET C Sampling/Digitization Performance

The TARGET C ASIC is, for the most part, identical to the sampling and digitization part of TARGET 7 with the exception of an increased digitization clock speed of 500 MHz allowing a faster digitization compared to TARGET 7 and the split off trigger path. The DC transfer functions and thus the achievable dynamic range, DC noise, and actual digitization time can be controlled with various ASIC parameters set on the fly via the companion FPGA. We tuned the transfer function parameters of TARGET C with the goal of a dynamic range comparable to TARGET 7 with a small integrated non linearity and a smooth transition to the saturated regime. Since the TARGET ASICs record the full waveform for every event a good charge reconstruction is also guaranteed in the saturated regime of the ASIC transfer function using waveform parameters like the rising or falling edge of the pulse. The measured transfer function of TARGET C is shown in Figure 2 and its dynamic range spans 1.9 V with a DC noise of [formula] mV. So, TARGET C shows the same performance as TARGET 7 as it is expected.

The knowledge of the DC transfer function is used to convert the raw ADC counts from the digitizer into a voltage. Examples of calibrated sinusoids and a pulse equivalent to the input to TARGET expected in the camera are shown in Figure 3. The measured sinusoid yields a sampling frequency of 0.9986  ±  0.0004 GSa/s which can be corrected to the expected value of 1 GSa/s by further tuning.

One of the most important performance figures of the TARGET readout electronics is its charge resolution. Here, we expect again a performance as good as in TARGET 7. The split of the sampling/digitization and trigger path might nevertheless have a positive impact on the performance of TARGET C. The charge resolution measurement shown in Figure 4 was performed using a simple integration method with a window of 16 ns and results in a resolution of [formula] % at 10 pe (assuming a conversion number of 4mV/pe). This is expected to fulfill the camera requirements. However, more complex methods using the full waveform information might yield an even better performance. In the final camera there will be additional noise contributions from the photodetectors and the amplifying/shaping circuits that will degrade the overall charge resolution with respect to TARGET alone.

T5TEA Trigger Performance

The trigger ASIC T5TEA can be controlled by various parameters but the two most important ones, which have the largest impact on the trigger performance, are PMTref4 and Thresh. Thresh sets the reference voltage for the comparator with which the amplitude of the input signal is compared and, therefore, directly sets the threshold of the trigger ASIC. On the other hand PMTref4 controls the reference voltage for the summing amplifier which performs the analog sum of the four input signals of one trigger group and is able to shift the signal closer to the comparator threshold of Thresh. All parameters are controlled by a 12 bit digital-to-analog converter and have an operating voltage range of 0 to 2.5 V.

For all trigger measurements pulses with varying amplitudes, a full width at half maximum of 10 ns with rise times of 5.4 ns and a frequency of 1 kHz were applied to one channel. The number of occurring trigger signals of one group in a certain time window can be counted by the FPGA. It should be noted that for all trigger measurements sampling of TARGET C was enabled which leads to a larger noise but reflects the environment of normal operations. The efficiency of the trigger can be calculated as ε  =  Ntrigger  /  Npulses, where Ntrigger is the number of trigger signals measured by the FPGA and Npulses the number of injected pulses by the function generator.

To investigate the general performance of the trigger ASIC one can apply signals with varying amplitudes for a given parameter combination of PMTref4 and Thresh. The trigger efficiency ε as a function of the input amplitude A is shown in Figure [\ref=fig:triggereff]. Here, a Gaussian error function, also called efficiency curve,

[formula]

was fitted to the data points. The fit parameters μ corresponds to the threshold of 50% trigger efficiency and σ to the width of the rising edge, called noise. Here, PMTref4 was set to 1980 DAC and Thresh was adjusted to result in the lowest threshold μ. With our current evaluation board design and these settings we get a lowest threshold of ≤  8 mV (2 pe) and a corresponding noise of ≤  1 mV (1/4 pe) which meets the desired camera performance (assuming a conversion number of 4 mV/pe) and represents a significant improvement in comparison to the TARGET 5 [\cite=T5] and TARGET 7 [\cite=ICRC2015] performance.

The response to varying Thresh can be best seen in Figure [\ref=fig:triggerrate] where the trigger rate was measured as a function of the set threshold. Pulses with a constant amplitude of 100 mVpp were applied to one channel and Thresh was varied to change the threshold of the trigger ASIC. In this figure one can recognize different domains: on the right side the trigger rate rises to 1 kHz (corresponding to 100% trigger efficiency) at 100 mV (Thresh: ~  2050 DAC) and stays constant until the threshold crosses the baseline of the signal and begins to trigger at random fluctuations ("baseline noise") at 0 mV (Thresh ~  3100 DAC), which causes the large trigger rate (peak on the left).

Also a scan in the parameter space of PMTref4 and Thresh was performed: for each combination of the two parameters an efficiency curve was measured and the threshold and noise were determined. The results of the scan are shown in Figure [\ref=fig:para-scan]. The outcome is comparable to the former measurements: over the measured range of PMTref4 we get lowest thresholds of <  10 mV (2.5 pe) and over the whole range of PMTref4 and Thresh we get a noise of <  2 mV (0.5 pe), while the noise increases with larger thresholds. The visible fluctuations of the noise are caused by statistical fluctuations. It shows that thresholds between 2.5 pe and 40 pe can be set to 0.5 pe precision. Thus, the desired performance of the trigger ASIC T5TEA is met even at this early stage of our board design.

OUTLOOK

Since the presented measurements do not represent final results, further improvements are expected: on the one hand by tuning all available parameters and on the other hand by improving the design of the evaluation boards and camera modules. Figure [\ref=fig:triggereff_new] shows an efficiency curve measured with a debugged and optimized design of our evaluation board where the termination resistors were changed and bypassing capacitors were added. These improvements lowered the threshold to [formula] mV (3 / 4 pe) and the noise to [formula] mV (0.15 pe). Currently ongoing investigations address the whole readout chain with SiPM, buffer and shaper board and an evaluation board. The next steps in the near future include production and testing of complete TARGET modules and the production of an entire camera, called CHEC-S, which will be used in the prototype GCT telescope.

ACKNOWLEDGMENTS

We gratefully acknowledge support from the agencies and organizations under Funding Agencies at .