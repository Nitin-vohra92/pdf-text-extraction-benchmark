On terms describing omitting unary and affine types - improved

cm cm cm Definition Proposition Fact

Introduction

This paper deals with syntactical conditions equivalent to congruence meet-semidistributivity of a locally finite variety of algebras. We first endeavor to explain the significance of the concept under study in this paper. Congruence meet-semidistributivity of a locally finite variety has already been characterized by D. Hobby and R. McKenzie ([\cite=hm]) as equivalent to having no covers of types 1 or 2 in the congruence lattices of finite algebras in the variety, and also by a syntactical Mal'cev condition due to R. Willard ([\cite=rossw]). It is a condition which has seen broad use, as much of the theory which holds true for congruence distributive varieties, also holds in congruence meet-semidistributive case, though the proofs are often much harder. To mention some better-known examples, Park's Conjecture ([\cite=park]) was proved to hold in congruence meet-semidistributive case by Willard ([\cite=rossw]), extending the congruence distributive proof due to Baker ([\cite=baker]), while Quackenbush's Conjecture ([\cite=quack]), which holds trivially in congruence distributive case due to Jónsson's Lemma ([\cite=bjarni]), was proved in the congruence meet-semidistributive case by Kearnes and Willard ([\cite=kearnesross]). Recently, the research in the Constraint Satisfaction Problem has shown that congruence meet-semidistributivity of the variety generated by the algebra of compatible operations is equivalent to the condition that the efficient algorithm called 'localconsistency checking' to faithfully solve the Constraint Satisfaction Problem. The property 'local consistency checking works here' is called 'bounded width' by the researchers working in Constraint Satisfaction Problem, and the reader can find a wealth of literature on the concept. This result due to L. Barto and M. Kozik ([\cite=bartokozik]) is certainly among the strongest known partial results for the Dichotomy Conjecture, and probably the hardest to be proven so far.

Characterization of various semantical properties of all algebras and/or their congruence lattices in a variety by equivalent syntactical conditions was started by A. I. Mal'cev in ([\cite=malcev]). Because of that, the properties which can be so characterized are called Mal'cev properties, and the syntactical conditions equivalent to them Mal'cev conditions. There is a subclass of the strong Mal'cev conditions saying that a property is equivalent to all algebras in the variety having a fixed number of term operations of fixed arities and which satisfy a fixed package of equations (like the original Mal'cev condition for congruence permutability). On the other hand, a usual Mal'cev property is equivalent to satisfying one of (equivalently, all but finitely many of) a countably infinit sequence of strong Mal'cev conditions in which each member implies the next one (meaning that the properties are increasingly more general), like in the case of Jónsson's condition for congruence distributivity ([\cite=bjarni]). Obviously, strong Mal'cev conditions are preferable, if available, as then we can use the operations in a computer search, but there are properties which are Mal'cev properties but are proved to not be strong Mal'cev properties. The condition most commonly used for congruence meet-semidistributivity of a variety (not necessarily locally finite), until recently, was the one proved by Willard ([\cite=rossw]), but the research in the Constraint Satisfaction Problem has recently uncovered that the congruence meet-semidistributivity of a locally finite variety is a strong Mal'cev property. The best, i. e. syntactically strongest we know of is due to M. Kozik ([\cite=hhhm]). In this paper we try to see if it is also the best possible. We identify three candidate conditions, all of which imply congruence meet-semidistributivity and are syntactically stronger and with fewer operations and/or of smaller arity than the condition proved in [\cite=hhhm]. We prove that either one of the three conditions we found is indeed equivalent to congruence meet-semidistributivity, or the condition from [\cite=hhhm] is the best possible. Which of these alternatives is true we have not managed to ascertain and leave open for future research.

Background

In this paper an algebra denotes a structure [formula], where F is a signature, or language, consisting only of operation symbols of various arities, A is a nonempty set, and for each symbol f∈F of arity k the corresponding element [formula] is a mapping [formula]. The set of term operations of [formula] is the set of all operations obtained from [formula] and projection operations via finitely many compositions. All algebras of the same signature which identically satisfy a set of equations are called a variety. An algebra [formula] is locally finite if for any finite subset X of A, the set of all results of term operations applied to elements of X is also finite. A variety is locally finite if every algebra in it is.

There is a natural connection between operations and relations on the same set. It says that a (k-ary) relation and an (n-ary) operation are compatible if for any n vectors from the relation, the vector obtained by pointwise application of the operation is again in the relation. The classic results of universal algebra often connect the properties of the compatible equivalence relations, which form a lattice under inclusion called the congruence lattice, and other properties of algebras. In this paper we investigate the meet-semidistributivity of the congruence lattices of all algebras in a variety, which is the lattice implication [formula]. An equivalent condition of the congruence meet-semidistributivity of a locally finite variety is omitting types of covers [formula] and [formula] in finite algebras of the variety. This concept will be explained further in the text. For any other definitions and basic results which are not found in this introductory part, the reader is referred to [\cite=hhhhm] for basic universal algebra and [\cite=hm] for tame congruence theory.

We can easily see that a given α-minimal set U must contain at least one, and possibly more, α-neighbourhoods.The union of all α-neighbourhoods in U is called the body of U, and the remaining elements of U form the tail of U. What is important here is that algebra [formula] induces uniform structures on all its α-neighbourhoods, meaning they (the structures induced) all belong to the same of five possible types. Let us now define an induced structure.

The theorem in this form is given in [\cite=nm], and the proof can be found in [\cite=hm].

The previous theorem allows us to assign a type to each minimal congruence α of an algebra according to the behaviour of the α-neighbourhoods (for example, a minimal congruence whose α-neighbourhoods are polynomially equivalent to a vector space is said to have affine type or type 2).

Taking this idea one step further, given a pair of congruences (α,β) of [formula] with β covering α (i.e. α  <  β and there are no congruences of [formula] strictly between the two), one can form the quotient algebra [formula], and then consider the congruence β  /  α  =  {(a / α,b / α):(a,b)∈β}. Since β covers α in the congruence lattice of [formula], β  /  α is a minimal congruence of [formula], so it can be assigned one of the five types. In this way we can assign to each covering pair of congruences of [formula] a type (unary, affine, boolean, lattice, semilattice, or 1, 2, 3, 4, 5 respectively). Therefore, going through all covering pairs of congruences of this algebra we obtain a set of types, so-called typeset of [formula], denoted by [formula]. Also, for K a class of algebras, the typeset of K is defined to be the union of all the typesets of its finite members, denoted by typ{K}.

A finite algebra or a class of algebras is said to omit a certain type if that type does not appear in its typeset. For locally finite varieties omitting certain types can be characterized by Maltsev conditions, i.e. by the existence of certain terms that satisfy certain linear identities, and there are quite a few results on this so far. We shall present two of them concerning omitting types 1 and 2.

The proof can be found in [\cite=hhm].

The proof can be found in [\cite=hhhm].

Therefore, omitting types 1 and 2 for a locally finite variety can be described by linear identities on 3-ary and a 4-ary term, both idempotent. In this paper we examine whether the same can be done by two at most 3-ary idempotent terms. It is sufficient to focus our attention to idempotent terms only, for the reasons that are explained in detail in [\cite=hhm]. We shall use two particular algebras for our examination, both of them omitting types 1 and 2.

Examples of algebras generating varieties that omit unary and affine types

[formula]

Let [formula] be the semilattice with two elements (i.e. [formula] stands for a commutative, associative and idempotent binary operation). This algebra generates a variety that omits types 1 and 2, according to Theorem 2.7 from above (weak near-unanimity terms being [formula] and [formula]).

[formula]

Let [formula] be a finite algebra with at least two elements and a single idempotent basic operation f(x1,x2,x3), which is a ternary near-unanimity term (i.e. a majority term): In case no arguments are equal, we can define f like this: We shall prove now that algebra [formula] generates a variety that omits types 1 and 2:

Let g(x,y,w,z) be a 4-ary term of this algebra defined by: g(x,y,w,z)  ≈  f(x,y,f(x,w,z)), f being the basic operation. It is easy to check that g is a weak near-unanimity term, and the identity g(y,x,x,x)  ≈  f(y,x,x) holds, so algebra [formula] generates a variety that omits unary and affine types according to Theorem 2.7 from above.

This algebra has some interesting properties:

every binary term-operation t of [formula] must satisfy one of these two identities: t(x,y)  ≈  x t(x,y)  ≈  y; In other words the only binary term-operations on [formula] are projections π1,π2;

We shall prove the statement by induction on the complexity of the term t:

if t(x,y) is a projection the statement holds

if t(x,y)  ≈  f(t1(x,y),t2(x,y),t3(x,y)), where t1,t2,t3 are less complex binary terms, then these three are projections by the induction hypothesis, therefore at least two of them are equal, so t must be a projection too.

every ternary term-operation p of [formula] satisfies exactly one of the following:p(x,y,z)  ≈  x p(x,y,z)  ≈  y p(x,y,z)  ≈  z p(x,x,y)  ≈  p(x,y,x)  ≈  p(y,x,x)  ≈  x;

This means p is either one of the projections π1,π2,π3 or a majority term-operation, that is there are no other ternary term-operations except for these four kinds.

We prove the second statement also by induction on the complexity of the term-function p:

if p(x,y,z) is a projection or the basic operation f(x,y,z), the statement holds

if p(x,y,z)  ≈  f(p1(x,y,z),p2(x,y,z),p3(x,y,z)),where p1,p2,p3 are less complex ternary terms, then each of these three is either a projection or a majority term by the induction hypothesis, so we have the following cases:

if at least two of p1,p2,p3 are majority terms, then p is also a majority term;

if exactly one of p1,p2,p3 is a majority term and remaining two are the same projection [formula] then p is also a projection πj;

if exactly one of p1,p2,p3 is a majority term and remaining two are projections [formula]  then p is a majority term;

if the terms p1,p2,p3 are projections π1,π2,π3 (in whichever order) then p(x,y,z) is f(x,y,z) up to the permutation of variables, which is still a majority term;

if the terms p1,p2,p3 are projections πi,πi,πj (again in whichever order) [formula] then p is a projection πi;

Now that we have listed the examples needed, let us notice that any system of (linear) identities possibly describing omitting types 1 and 2 (including any number of terms) must hold in algebras [formula] and [formula] from examples 1 and 2 respectively. We shall make use of this fact in the rest of the paper.

In section 3 we discuss systems of linear identities on a single binary term, two binary terms, a single ternary term and a binary and a ternary term. We prove that none of these systems describes omitting types 1 and 2 ( in fact none of them even implies omitting these two types).

In section 4 systems on two ternary terms are being discussed, and we prove that there are only three of them that could possibly describe omitting types 1 and 2 ( all three imply omitting these two types). As mentioned in the abstract, we do not resolve whether any of them actually describes this property.

Systems of linear identities on a single binary term, two binary terms, a single ternary term and a binary and a ternary term

As we have already mentioned, in this section we discuss systems of linear identities on a single binary term, two binary terms, a single ternary term and a binary and a ternary term, each of these cases being analyzed in a separate subsection. We shall prove here that none of these systems describes omitting types 1 and 2 (in fact none of them even implies omitting these two types).

A single binary idempotent term

Let t(x,y) be an idempotent binary term. If a system of linear identities on t(x,y) (a single identity or more) describes omitting types 1 and 2, it must hold in algebra [formula] from example 2, which means t(x,y) has to be a projection map in [formula]. So, the system considered must allow t(x,y) to be a projection map and it must not yield a trivial variety (algebra), but such a system holds in every algebra, therefore does not describe omitting types 1 and 2.

We can conclude that omitting types 1 and 2 cannot be described by a single binary idempotent term (using any number of identities).

Two binary idempotent terms

Let t(x,y) and s(x,y) be idempotent binary terms. If a system of identities on t(x,y) and s(x,y) describes omitting types 1 and 2, it must hold in algebra [formula] from example 2, which means both t and s have to be projection maps. This means the identities of the system considered must allow both t and s to be projection maps, but these exist in every algebra, so the system cannot describe omitting types 1 and 2.

From the previous we conclude that omitting types 1 and 2 cannot be described by two binary idempotent terms (using any number of identities).

A single ternary idempotent term

In this subsection we prove that omitting types 1 and 2 cannot be described by any number of linear identities on a single ternary idempotent term. Previously, let us consider a specific reduct of a module that we use in the proof- a full idempotent reduct of a module over [formula] (this is an algebraic structure obtained from a module over [formula] by taking into consideration only the idempotent term-operations of the module and all such term-operations):

In a full idempotent reduct of a module over [formula] a ternary term p(x,y,z) must satisfy one of the following identities:

[formula]

There are no other ternary terms in this reduct.

Now we can discuss systems of linear identities on a single ternary idempotent term.

Based on this fact we can state the following:

if identities of the system σ allow p to be defined as a projection map in algebra [formula] (any projection map) then p can be defined as a projection map in any algebra, so the system does not describe omitting types 1 and 2. Therefore the identities of the system must have forms that allow p to be a majority term and only a majority term in [formula].

if there is an identity of the form p(x,y,z)  ≈  p(u,v,w) in the system σ, then {x,y,z}  =  {u,v,w}, i.e. (u,v,w) is a permutation of (x,y,z), for otherwise p could not be a majority term in [formula].

considering identities with less than three variables on either side: if the left hand side of an identity is some of p(x,x,y),p(x,y,x),p(y,x,x), then on the right there has to be either x alone, or one of the terms p(x,x,y),p(x,y,x),p(y,x,x),p(x,x,z),p(z,x,x),p(x,z,x)(again for the same reason, p being necessarily a majority term in [formula]).

if the system σ contains only identities having variables x,y,z on both sides and/or identities with x,x,y on both sides (that is x occurs twice, y once on both sides) then the system holds in a full idempotent reduct of a module over [formula] (and therefore does not describe omitting types 1 and 2), for we can define p to be 2x  +  2y  +  2z in this reduct. This means σ has to include an identity with x,x,y on the left and x,x,z on the right (up to a permutation of these variables, of course), or x,x,y on the left and x alone on the right.

since the system σ has to hold in algebra [formula] (example 1), from the previous item we can conclude that p has to be a binary term in [formula] (it cannot be a projection map for the system does not allow that). Now, if the system allows p(x,y,z) to be defined as a binary term in [formula], i.e. one of the terms [formula], [formula], [formula], then it also allows p to be one of the terms 3x + 3y, 3y + 3z, 3x + 3z in a full idempotent reduct of a module over [formula]. This means σ does not describe omitting types 1 and 2.

This proves that no system on p(x,y,z) satisfies the necessary conditions for describing omitting types 1 and 2 given above ( i.e. to hold in algebras [formula] and [formula] and not to hold in any full idempotent reduct of a module over a finite ring).

A binary idempotent term and a ternary idempotent term

In this subsection we shall discuss whether a system of any number of linear identities on t(x,y) and p(x,y,z) can describe omitting types 1 and 2 (t and p both being idempotent terms).

Suppose we have a system on t and p describing omitting types 1 and 2, and let us denote it by τ. It has to hold in [formula], so t has to be a projection map, and p either a projection map or a majority term in this algebra (this is proved in section [\ref=section_two]). If the system τ allows both t and p to be projections in [formula], it holds in any algebra (t and p being the same projection maps as in [formula]), so it cannot describe omitting types 1 and 2. Therefore τ must hold in [formula] only for p being a majority term (and t a projection map, of course). Further more, algebra [formula] has to satisfy the system also, so let us analyze possible cases:

both t and p can be defined as projection maps in [formula] - this is impossible because if this were the case then both terms could be defined as projection maps in [formula], and we have already excluded that.

t can be defined as a projection map and p as a binary term (i.e. one of the [formula], [formula], [formula]) in [formula] - then we can define t to be the same projection map, and p to be one of the terms 3x + 3y, 3y + 3z, 3x + 3z in a full idempotent reduct of a module over [formula], i.e. t and p exist in this reduct, therefore the system τ does not describe omitting types 1 and 2.

t can be defined as a projection map and p as a ternary term in [formula] (meaning, of course, that we cannot define p as either a projection map or a binary term in [formula] )- in this case the system τ cannot contain an identity on t and p, i.e. all the identities are either only on t or only on p. Since the identities on t allow t to be a projection map they can be ignored, so τ describes omitting types 1 and 2 if and only if remaining identities only on p do the same. This is already proved to be impossible (subsection [\ref=singleternary]).

t can be defined only as a binary term and p as a projection map in [formula] - once again τ cannot include an identity on t and p, i.e. all the identities are either only on t or only on p. Since t has to be a projection map in [formula], the identities on t must allow that, which means t can be defined as the same projection map in [formula]. Therefore this case is impossible.

both t and p can be defined as binary terms in [formula] (and of course, none of them as a projection map) - if this is the case it is easily seen that both can be defined as binary terms in a full idempotent reduct of a module over [formula] (some of the terms 3x + 3y, 3y + 3z, 3x + 3z), so the system τ does not describe omitting types 1 and 2.

t can be defined as a binary term and p as a ternary term in [formula] (and no other possibilities, as before) - then there is no identity only on t in τ, since it would have to be this one t(x,y)  ≈  t(y,x), and it cannot hold in [formula]. Further more, if t(x,y) is on the left, then on the right we have term p with variables x and y only. This allows us to eliminate term t from all the identities except for one, obtaining an equivalent system. Now we can ignore the identity with t (the only one of the form t(x,y)  ≈  p(u,v,w), where {u,v,w}  =  {x,y}) and state that the system τ describes omitting types 1 and 2 if and only if the remaining identities only on p do the same, which is impossible (subsection [\ref=singleternary]).

By this we have proved that omitting types 1 and 2 cannot be described by a binary and a ternary term, both idempotent (using any number of linear identities).

Two ternary idempotent terms

In the following section we shall discuss systems of linear identities on two ternary terms, both idempotent, and we shall prove that only three of these systems could possibly describe omitting types 1 and 2 (all three imply omitting these two types). However, we do not resolve whether any of them actually describes this property.

Let p(x,y,z) and q(x,y,z) be ternary idempotent terms; as before we shall suppose there is a system of linear identities on p and q describing omitting types 1 and 2, and we shall denote it by φ.

Let us notice the important fact: if the system φ has no identity on p and q, i.e. all its identities are either only on p or only on q, then we can apply the conclusion that we came to in subsection [\ref=singleternary]: if p exists in algebras [formula] and [formula] from examples 1 and 2, then p also exists in a full idempotent reduct of a module over [formula], and the same holds for q. Therefore the system φ needs to have at least one identity on p and q.

Regarding the fact that φ has to hold in algebra [formula] (i.e. terms p and q have to exist in this algebra) there are three possible cases:

p and q can both be projection maps in algebra [formula] - then φ holds in any algebra (p and q being the same projection maps as in [formula]), so there is no need to analyze this case any further.

the system φ allows only one of p, q to be a projection map in [formula], and the other term has to be a majority term in this algebra.

the system φ does not allow either of p and q to be a projection map in [formula], i.e. both are majority terms in this algebra.

We shall analyze cases 2 and 3 in the following two subsections - in the subsection [\ref=cases12] we deal with case 2, and in subsection [\ref=case3] with case 3.

[formula] and [formula] are a projection and a majority term in [formula]

Suppose the system φ holds in [formula] for a projection map and a majority term (case 2 from above). We can assume with no loss of generality that p is π1 and q a majority term, therefore these terms satisfy the following in [formula]:

[formula]

It is easily seen that p and q satisfying the system do not exist in [formula] (example 1), so [\eqref=sys] cannot be the system describing omitting types 1 and 2. We shall try to obtain the system mentioned by eliminating some identities from [\eqref=sys], so let us eliminate the first one:

[formula]

We shall prove here that system [\eqref=system1] implies omitting types 1 and 2, because terms p, q do not exist in any full idempotent reduct of a module over a finite ring:

If term p is projection map π1 in a reduct, then q would have to be at most a binary term, which is impossible. Term p cannot be a binary term in any reduct either (we can see this directly from the identities), so it has to be a ternary term, i.e. αx  +  βy  +  γz for α  +  β  +  γ = 1 and none of α,β,γ is zero. Now, from the first identity we obtain αx  +  βx  +  γy  =  αx  +  βy  +  γy, which yields α  +  β  =  α, i.e. β  =  0. Therefore p does not exist in any reduct over a finite ring, and this completes the proof.

So, we have obtained the system that implies omitting types 1 and 2, but it is not minimal - namely, the system given below, obtained from the previous by eliminating identity p(x,y,y)  ≈  p(x,y,x), also implies omitting types 1 and 2 (this is proven the same way like the above case).

[formula]

Moreover, it can be proved that [\eqref=system2] is a minimal system with this property:

It'll be sufficient to prove that any set of identities which is a proper subset of [\eqref=system2] allows us to define p and q in some reduct of a module over a finite ring.

If we eliminate the first identity, we obtain the system: Now both terms can be defined as 2x  +  2y  +  2z in a reduct over [formula]. So the first identity (p(x,x,y)  ≈  p(x,y,y)) must stay.

If the term p(x,y,x) is completely omitted, we have an identity only on p (the first one), and the rest of them are only on q, but in this case p can be defined as π1 and q as 2x  +  2y  +  2z in a reduct over [formula]. This means we have to keep one of the following identities (i.e. at least one) p(x,y,x)  ≈  q(x,x,y),p(x,y,x)  ≈  q(x,y,x),p(x,y,x)  ≈  q(y,x,x), and we shall consider it the second. Let us go through the cases now:

if we have p(x,y,x)  ≈  q(x,x,y) as the second identity (the first identity being p(x,x,y)  ≈  p(x,y,y), as explained), obviously we need to add one more identity from the system [\eqref=system2] to these two, for if we do not, p and q can both be projection maps (in fact a single identity is all we can add here - adding any two identities from [\eqref=system2] gives us the whole system [\eqref=system2]). We have three options for the third identity: this system allows p to be π1 and q to be 3x  +  3y in a reduct over [formula]; this system allows p to be π1 and q to be π2 in a reduct over [formula]; this system allows both p and q to be π1 in a reduct over [formula];

So, nothing new can be obtained with the second identity being p(x,y,x)  ≈  q(x,x,y).

if we have p(x,y,x)  ≈  q(x,y,x) as the second identity, adding a third one from [\eqref=system2] may give us the following (again, adding any two identities from [\eqref=system2] gives us the whole system [\eqref=system2]): this system allows p to be π1 and q to be 3x  +  3z in a reduct over [formula]; this system allows both p and q to be π1 in a reduct over [formula]; this system allows p to be π1 and q to be π3 in a reduct over [formula];

There are no more cases with p(x,y,x)  ≈  q(x,y,x) as the second identity, except for the whole system [\eqref=system2].

if we have p(x,y,x)  ≈  q(y,x,x) as the second identity, adding a third one from [\eqref=system2] may give us the following (adding two identities gives the whole system, as before): this system allows p to be π1 and q to be π3 in a reduct over [formula]; this system allows p to be π1 and q to be π2 in a reduct over [formula]; this system allows p to be π1 and q to be 3y  +  3z in a reduct over [formula];

Once again we have obtained nothing new with p(x,y,x)  ≈  q(y,x,x) as the second identity.

By this we have proved minimality of the system [\eqref=system2], with respect to implying omitting types 1 and 2.

Further more, the following can be proved (simply by analyzing all possible cases): elimination of identities from the system [\eqref=system1] gives us either a system equivalent to [\eqref=system2], up to the permutation of variables, or a system that holds in a reduct of a module over some finite ring, which means [\eqref=system2] is the only system implying omitting types 1 and 2 obtainable from [\eqref=system1] (and a proper subset of [\eqref=system1]). We shall not provide the whole proof here, for it is too long, but only analyze two proper subsets of the system [\eqref=system1] (the whole proof, however, can be found in [\cite=nnmm]):

This system implies nonexistence of p (and q) in any reduct of a module over a finite ring, so it implies omitting types 1 and 2, but it is equivalent to system [\eqref=system2], and is obtainable from it by a permutation of variables of the term q (we substitute q(z,x,y) for q(x,y,z)).

This system allows p and q to be respectively 4x  +  y  +  z, 2x  +  2y  +  2z in a reduct over [formula], so it does not describe omitting types 1 and 2.

Up to this point we have started from [\eqref=sys], eliminated the first identity obtaining [\eqref=system1], and then eliminated yet another identity from [\eqref=system1] obtaining [\eqref=system2], which is proven to imply omitting types 1 and 2, and to be the only (minimal) system with this property obtainable from [\eqref=system1], up to the permutation of variables. So, the next step would be analyzing what happens if we eliminate an identity other than the first one from [\eqref=sys].

First we shall suppose the system obtained includes the identity p(x,x,y)  ≈  x . It also has to include an identity on both p and q, as explained at the beginning of the current section. So, up to this point we have a subset of the system [\eqref=sys] with the first identity being p(x,x,y)  ≈  x, and the second is an identity from [\eqref=sys] on p and q. There may be more identities from the system [\eqref=sys] in this subset, which (the subset) we shall denote by σ. We keep in mind σ needs to hold in algebra [formula] from example 1, so let us discuss on possible cases:

in the identity on both p and q (the second identity in σ), left hand side must not be p(x,x,y), for if this is the case, q has to be at most a binary term in algebra [formula], as well as p. This would allow us to define both terms in a reduct over [formula], as projections and/or binary terms (some of the terms 3x  +  3y, 3x  +  3z, 3y  +  3z). So, in the second identity of the system σ left hand side is either p(x,y,y) or p(x,y,x).

if the terms x and p(x,x,y) do not occur at all in the rest of the system σ, then all the identities except for the first one include only some of the terms p(x,y,x), p(x,y,y), q(x,x,y), q(x,y,x), q(y,x,x). Therefore we could define p and q to be 4x + 2y and 2x  +  2y  +  2z respectively in a reduct over [formula]. So, p(x,x,y) or x alone must occur somewhere in the rest of the system σ.

if the term p(x,x,y) (or x alone) occurs in an identity on p in the rest of the system, we shall obtain either p(x,x,y)  ≈  x  ≈  p(x,y,y), or p(x,x,y)  ≈  x  ≈  p(x,y,x). In both cases p has to be a projection map in [formula], and because of the identity on both p and q (i.e. the second identity of the system σ), q is at most a binary term in this algebra, but this allows p and q to be defined in a reduct over [formula], as explained earlier.

if the term p(x,x,y) (or x alone) occurs in an identity on p and q (i.e. on x and q) we shall obtain one of the following identities: p(x,x,y)  ≈  q(x,x,y)  ≈  x, p(x,x,y)  ≈  q(y,x,x)  ≈  x, p(x,x,y)  ≈  q(x,y,x)  ≈  x. Again each of them means q is at most a binary term in [formula], as well as p, so both are definable in a reduct over [formula].

By this it is proved that the system σ can not describe omitting types 1 and 2.

By elimination of identities from the system [\eqref=sys], we can also obtain a system that includes the identity p(x,y,x)  ≈  x or p(x,y,y)  ≈  x (of course, in each case it has to include an identity on both p and q). Let us provide a brief overview on these systems:

Let σ1 be a subset of the system [\eqref=sys] with the first identity being p(x,y,x)  ≈  x (the second identity in σ1 is an identity on p and q from [\eqref=sys]). We can obtain an equivalent system by a permutation of variables of the term p (we substitute p(x,y,z) for p(x,z,y) in σ1 ) but this is the system of the form σ, with the first identity being p(x,x,y)  ≈  x, which we have already proved not to describe omitting types 1 and 2.

Let σ2 be a subset of the system [\eqref=sys] with the first identity being p(x,y,y)  ≈  x (the second identity in σ2 is an identity on p and q from [\eqref=sys]). Since the system σ2 needs to hold in [formula], p is to be π1 and q at most a binary term in this algebra. This allows both of them to be defined in a reduct over [formula]. Therefore σ2 cannot describe omitting types 1 and 2.

We can conclude now that none of the systems obtained from [\eqref=sys] including either of the identities x  ≈  p(x,x,y), x  ≈  p(x,y,x), x  ≈  p(x,y,y) can describe omitting types 1 and 2.

Let us now discuss the subsets of the system [\eqref=sys] in which the first identity is one of the following three: x  ≈  q(x,x,y), x  ≈  q(x,y,x), x  ≈  q(y,x,x). By examination of these systems (which is not presented here for it is too long and done in the same manner as already seen, but can be found in [\cite=nnmm]), we come to the single system, up to the permutation of variables, that implies (and possibly describes) omitting types 1 and 2:

[formula]

both majority terms

If both p and q have to be majority terms in [formula] they satisfy the following in this algebra:

[formula]

It is easily seen that p and q satisfying the system cannot exist in [formula] (example 1), so some identities have to be eliminated. Notice that we have to keep at least one identity having x on the left, for if we do not, the remaining system holds in a reduct of a module over [formula] (we can define both p, q to be 2x  +  2y  +  2z).

Let us try eliminating the identity p(x,x,y)  ≈  p(x,y,x). Now we have the following system that holds in [formula]:

[formula]

We shall prove now that the system [\eqref=system3] implies omitting types 1 and 2.

To prove that the system implies omitting types 1 and 2 it is sufficient to show that p, q cannot exist in any reduct of a module over a finite ring. From the identities of the system it is easily seen that q can only be a ternary term in any reduct (if it exists at all) i.e. αx  +  βy  +  γz for α  +  β  +  γ = 1 and none of α,β,γ is zero. From the forth identity we obtain the following: αy  +  (β  +  γ)x  =  (α  +  γ)x  +  βy, and this implies α  =  β. Then from the last identity we have: (α  +  γ)x  +  αy  =  2αx  +  γy , which gives α  =  γ also. Therefore, if q exists in any reduct of a module over a finite ring, it has the form αx  +  αy  +  αz, for 3α  =  1. Then, from the third identity we have p(x,y,z)  ≈  αx  +  2αy (since p can only be a binary term in any reduct), and therefore the second identity gives α  =  2α (this should hold in a finite ring mentioned), which implies α  =  0, and this is a contradiction. By this we have proved that q (and consequently p) cannot exist in any reduct of a module over any finite ring, which means the system [\eqref=system3] implies omitting types 1 and 2.

The system [\eqref=system3] is also a minimal system implying omitting types 1 and 2, for any proper subset of [\eqref=system3] holds in some reduct of a module over a finite ring (for some terms p and q). This is proven the same way as minimality of the system [\eqref=system2], i.e. by analyzing all possible cases, and the proof is provided in [\cite=nnmm].

If we return to the system [\eqref=system4] and analyze other ways to eliminate identities in order to obtain a system that describes omitting types 1 and 2, we come to the following conclusion: if a system obtained (by elimination of identities from [\eqref=system4]) holds in algebra [formula], it is either equivalent to [\eqref=system3] up to the permutation of variables, or it holds in a reduct of a module over some finite ring (once again, the examination of all the subsets of the system [\eqref=system4] is provided in [\cite=nnmm]).

We can conclude the following: from the system [\eqref=system4] we can obtain a single system, up to the permutation of variables, which possibly describes omitting types 1 and 2 and that is the system [\eqref=system3].

By this we have examined all possible forms of a system on p and q regarding the existence of terms in [formula], and obtained three systems (that is [\eqref=system2], [\eqref=newone], [\eqref=system3]), on variables x and y, that imply and possibly describe omitting types 1 and 2. Before the conclusion there is yet another question left to examine - can we obtain anything new from systems of identities on p and q with more than two variables?

systems of identities on [formula] and [formula] including more than two variables

In this subsection we shall prove that nothing new can be obtained from systems of identities on p and q including more than two variables.

Suppose we have a system on two ternary idempotent terms p and q that describes omitting types 1 and 2, and suppose there is an identity (or more of them) including more than two variables in this system. We shall denote this system by τ and discuss possible cases according to the number of variables:

if there is an identity including six variables in τ , it can only be one of these two identities: p(x,y,z)  ≈  p(u,v,w), p(x,y,z)  ≈  q(u,v,w). In both cases we obtain the identity x  ≈  w, which only holds in a trivial algebra (i.e. a trivial variety), so this case is impossible (assuming that τ describes omitting types 1 and 2).

if there is an identity including five variables in the system τ, there are two possibilities:

the identity mentioned can yield a trivial variety - this happens there are x,y,z on the left and u,v on the right, e.g. p(x,y,z)  ≈  p(u,u,v), p(x,y,z)  ≈  q(v,u,v), but also in these two cases: p(x,y,z)  ≈  p(u,x,v), p(x,y,z)  ≈  p(u,v,x) (if we substitute x for u and v in the latter two identities, we shall obtain p(x,y,z)  ≈  x, which means p has to be the first projection map, but that would give us x  ≈  u, which yields a trivial variety).

the identity considered can imply that one of the terms p and q, or both of them, must be a projection map (maps) - this happens if the identity is one of the following: p(x,y,z)  ≈  p(x,u,v), p(x,y,z)  ≈  q(x,u,v), p(x,y,z)  ≈  q(u,x,v), p(x,y,z)  ≈  q(u,v,x). The identity p(x,y,z)  ≈  p(x,u,v) implies that p has to be a projection map, which exists in any algebra, so in this case we can substitute x (or y or z) for p(x,y,z) in the system τ, obtaining a system only on q, which cannot describe omitting types 1 and 2 (this has been proven in the subsection [\ref=singleternary]). If both terms have to be projection maps then the system τ obviously can not describe omitting types 1 and 2.

if there is an identity including four variables in the system τ, there are three possibilities:

the identity mentioned can yield a trivial variety, like in these cases: p(x,y,z)  ≈  w, p(x,y,z)  ≈  p(w,w,x), p(x,y,z)  ≈  p(w,x,w), p(x,y,z)  ≈  p(w,x,x), p(x,y,y)  ≈  p(w,w,z)... Obviously none of these identities cannot occur in the system τ.

the identity including four variables can imply that one of the terms has to be a projection map in any algebra, i.e.: p(x,y,z)  ≈  p(x,w,w), p(x,y,z)  ≈  q(w,w,x), p(x,y,z)  ≈  p(x,w,x), p(x,y,z)  ≈  q(w,x,x), p(x,y,x)  ≈  p(z,w,x), p(x,y,x)  ≈  q(z,w,x) ... If this were the case, we could substitute a single variable for one of the terms in τ (for example, if p has to be the first projection map then we can substitute x for p(x,y,z) in the whole system), obtaining a system on a single ternary term which does not describe omitting types 1 and 2 (proved in the subsection [\ref=singleternary]). Therefore none of the identities from above may occur in the system τ.

the identity including four variables can imply that one of the terms has to be at most a binary term in any algebra, i.e.: p(x,y,z)  ≈  p(w,x,y), p(x,y,z)  ≈  p(x,w,y), p(x,y,z)  ≈  q(y,x,w)...(from the first identity we obtain p(x,y,z)  ≈  p(x,x,y)  ≈  t(x,y), for some new binary term t). This means we can substitute a binary term t(x,y) for p(x,y,z) in the whole system τ, obtaining a system on a binary and a ternary term (t and q respectively), and this is proven not to describe omitting types 1 and 2 (subsection [\ref=bin_ter]). Therefore none of the identities from above may occur in the system τ.

if there is an identity including three variables in the system τ, these are the possible cases:

there are three variables on one side of the identity , and only two of them on the other:p(x,y,z)  ≈  p(x,x,y), p(x,y,z)  ≈  q(x,y,y)... In these cases we can substitute a new binary term t(x,y) for the term p in the whole system τ, obtaining a system on a binary and a ternary term which cannot describe omitting types 1 and 2 (subsection [\ref=bin_ter]). Therefore none of these identities may occur in the system τ.

there are three variables on both sides of the identity: p(x,y,z)  ≈  p(x,z,y), p(x,y,z)  ≈  p(y,x,z), p(x,y,z)  ≈  p(y,z,x)... Each of these identities may occur in τ. On the other side, τ can not include any of the identities p(x,y,z)  ≈  q(x,z,y), p(x,y,z)  ≈  q(y,z,x), p(x,y,z)  ≈  q(y,x,z), etc, for if this were the case we could simply substitute p for q in the whole system obtaining a system only on p which cannot describe omitting types 1 and 2 (subsection [\ref=singleternary]). So, τ can include only some of the identities on p with three variables on both sides.

there are two variables on each side of the identity: p(x,y,y)  ≈  p(x,z,x), p(x,y,x)  ≈  p(z,z,x)... Each of these identities may occur in the system τ. As for the identities on both p and q (such as p(x,y,y)  ≈  q(x,z,x), p(x,x,y)  ≈  q(x,z,z)...), we can notice the following: in algebra [formula] from example 1 both terms have to be at most binary, but if the system τ allows that, both terms can be defined in a reduct over [formula] (as at most binary also). This is impossible assuming that τ describes omitting types 1 and 2, so τ includes no identities on p and q with two variables on each side.

So, if τ includes identities with more than two variables, they can only have three variables, and be of two kinds:

identities on p with x, y, z on both sides

identities on p with x, y on one side and x, z on another

Now, the system τ has to hold in algebras [formula] and [formula], so if we substitute both x and y for z in τ we shall obtain a system - consequence (with more identities, but including only x and y) that also holds in these two algebras. Let us denote this new system by τ1, and discuss what happens in a reduct of a module over a finite ring:

identities on p with x, y, z on both sides

if we substitute both x and y for z in the identity p(x,y,z)  ≈  p(x,z,y), we shall obtain the following two identities: p(x,y,x)  ≈  p(x,x,y), p(x,y,y)  ≈  p(x,y,y). The second identity is obviously a trivial one, and the first can hold in a reduct of a module over a finite ring if we define p to be the first projection map, or a term αx + βy + βz, where α  +  2β = 1. In both cases the identity p(x,y,z)  ≈  p(x,z,y) holds in the same reduct.

if we substitute both x and y for z in the identity p(x,y,z)  ≈  p(z,x,y), we shall obtain the following two identities: p(x,y,x)  ≈  p(x,x,y), p(x,y,y)  ≈  p(y,x,y). These two hold in a reduct of a module over a finite ring if we define p to be αx + αy + αz (of course 3α  =  1), but this means that the identity p(x,y,z)  ≈  p(z,x,y) also holds in this reduct.

the same holds for the identity p(x,y,z)  ≈  p(z,y,x)- namely, by substituting x and y for z we obtain two identities, p(x,y,x)  ≈  p(x,y,x), p(x,y,y)  ≈  p(y,y,x) . If we define p (in any possible way) so that the two identities obtained hold in some reduct of a module over a finite ring, then the identity p(x,y,z)  ≈  p(z,y,x) also holds in that reduct for the same term p.

it is easy to check that the same holds for the identities p(x,y,z)  ≈  p(y,z,x), p(x,y,z)  ≈  p(y,x,z).

identities on p with x, y on one side and x, z on another

it is easy to see that an identity like that does not hold in any reduct of a module over a finite ring if and only if the variable z on the right side of the identity occurs in all the positions where x is on the left (and perhaps in some more), e.g. p(x,y,x)  ≈  p(z,x,z), p(x,y,y)  ≈  p(z,z,x)... For all of these identities (that do not hold in any reduct) holds the following: if we substitute both x and y for z, we shall obtain two identities such that both of them also cannot hold in any reduct (e.g. from the identity p(x,y,x)  ≈  p(z,x,z) we would obtain the following two p(x,y,x)  ≈  x , p(x,y,x)  ≈  p(y,x,y). Now from the first one we have that p would have to be one of the terms π1, π3, αx  +  βz, but the second identity does not allow either of these).

according to the previous item, the following holds: if we have an identity on p with x, y on one side and x, z on another, and by substituting both x and y for z we obtain two identities that hold in some full idempotent reduct over a finite ring (for some term p), then the identity we started with (the one including z) also holds in that reduct for the same term p.

We can now state the following: if the system τ1 (the system - consequence, obtained by substituting both x and y for z in the system τ) holds in some reduct of a module over a finite ring then the system τ also holds in that reduct. Since we want τ to describe omitting types 1 and 2, by substituting both x and y for z in τ we need to obtain a system with only x and y (i.e. τ1) that holds in [formula] and [formula] and does not hold in any reduct of a module. There are only three systems with only x and y that satisfy this, and these are the systems [\eqref=system2], [\eqref=newone], [\eqref=system3] obtained in the subsections [\ref=cases12], [\ref=case3] . Therefore τ1 has to contain one of these systems or actually be one of them. In either case, the system τ with three variables is a stronger condition compared to the obtained system τ1 with x and y only, so there is no need to consider it. In other words, we have just proved that nothing new can be obtained from systems of identities on p and q including more than two variables.

Up to this point we can state the following:

We shall now provide an example of a finite algebra that generates a variety omitting types 1 and 2 but does not realize either of the systems [\eqref=newone], [\eqref=system3] (this example is due to Keith Kearnes).

[formula] Suppose the language consists only of a single ternary function symbol, f(x,y,z).

Let [formula] be a 2-element algebra of this language where the basic operation [formula] is a majority operation, [formula]. Each ternary term operation in this algebra is either one of the projection maps or a majority term (this was already explained in the example 1).

Furthermore, let [formula] be a 2-element algebra of the same language where [formula] is defined like this: [formula], [formula] being a semi-lattice meet operation.

The product algebra [formula] generates a variety that omits types 1 and 2 - if we denote its basic operation by [formula], then the term operations [formula] and [formula] satisfy the conditions of Theorem 2.7. Let us now prove that the algebra [formula] realizes the system [\eqref=system2], but does not realize either of the systems [\eqref=newone] or [\eqref=system3].

As mentioned before, let [formula] be the basic operation in [formula].

The terms [formula] and [formula] satisfy the system [\eqref=system2].

In the system [\eqref=newone] there is a term q(x,y,z) such that x  ≈  q(x,y,x) and q(y,x,x)  ≈  q(x,x,y). If [formula] satisfies the identity x  ≈  q(x,y,x) (i.e. there is such a term operation of this algebra), then algebra [formula] satisfies the same (for the corresponding term operation q, of course). We can notice here that algebra [formula] is in fact term-equivalent to a semi-lattice, which means each of its term operations is just a meet of the variables involved. So, if [formula] satisfies the identity x  ≈  q(x,y,x), it means the term operation q of [formula] does not depend on its second variable. This also means that the corresponding term q of the term algebra in question does not depend on its second variable (that is, y does not occur syntactically in the term q(x,y,z) of the term algebra, for if it did then it would have to occur in the corresponding term operation q of [formula], since the only operation symbol f of the language is interpreted as meet in [formula] ). According to this, in algebra [formula] the term operation q cannot depend on its second variable, so it has to be either the first or the third projection map (this majority algebra does not have other binary term operations except for projections, example 1). But, q should also satisfy q(y,x,x)  ≈  q(x,x,y) in [formula], therefore in [formula], and this identity makes it impossible for q to be either of these two projections. So, we can conclude that [formula] does not realize the system [\eqref=newone].

For the system [\eqref=system3] holds the similar observation : in [\eqref=system3] there is a term p(x,y,z) such that x  ≈  p(x,x,y) and p(x,y,x)  ≈  p(y,x,x). If algebra [formula] satisfies the identity x  ≈  p(x,x,y) then [formula] satisfies the same, so p cannot depend on its third variable in [formula], therefore the third variable does not syntactically occur in the corresponding term p(x,y,z) of the term algebra in question. Since the identity also has to hold in [formula], the term operation p has to be either the first or the second projection map in this algebra, but this is impossible because of the identity p(x,y,x)  ≈  p(y,x,x). This means the algebra [formula] does not realize the system [\eqref=system3] either.

We can conclude now that neither of the systems [\eqref=newone], [\eqref=system3] characterizes omitting types 1 and 2, and also state a proposition:

[formula] As we have mentioned in the abstract, it is not resolved whether the system [\eqref=system2] actually describes omitting unary and affine types. Finding a counterexample for this system (i.e. a finite algebra that does not realize the system but generates a variety omitting types 1 and 2) would lead to conclusion that it is impossible to describe omitting unary and affine types by two ternary terms. On the other hand, perhaps it is possible to prove that any locally finite variety omitting types 1 and 2 realizes the system [\eqref=system2], which would, of course, mean that it characterizes omitting types 1 and 2.

[formula]

I thank to Keith Kearnes for providing me with example 3. I also thank to my Ph.D. adviser Petar Markovi.