Forman-Ricci flow for change detection in large dynamic data sets

Introduction

Complex networks are by now ubiquitous, both in every day life and as mathematical models for a wide range of phenomena [\cite=Watts1998] [\cite=Barabasi1999] [\cite=Albert2002] [\cite=barabasi_net_sci] with applications in such diverse fields as Biology [\cite=Barabasi2004] [\cite=Petri2014], transportation and urban planning, [\cite=Subelj2011] [\cite=Barthelemy2011] [\cite=barabasi_net_sci], social networks like Facebook and Twitter [\cite=Ellison2007], and - dating in its relevance back to early work on networks - in communication and computer systems [\cite=Barabasi1999]. The later belong to the class of peer-to-peer networks whose structure is characterized by dynamic effects in the information transfer between the 'peers'. With novel geometric methods we attempt to analyze the structural properties and dynamics in this class of networks.

While perhaps the main corpus of theoretical research in the analysis of networks and related structures has been focused on the properties of the various (discrete) Laplacians (see [\cite=banerjee] for an overview on the state of the art), a more recent - and, as we shall note below - related direction concerns the geometrical characterization of real-world and model type networks, see [\cite=Ollivier2009] [\cite=Jost2014] [\cite=Wu2015] [\cite=Sandhu2015a].

Given that in geometry, curvature (intuitively, a measure quantifying the deviation of a geometrical object from being flat) plays a central role, the drive for finding various discrete, expressive notions of curvature useful to describe the structure of networks is most natural [\cite=Watts1998] [\cite=Barabasi1999] [\cite=Eckmann2002]. More recent "geometric" approaches consider discrete definitions of curvature as in [\cite=Shavitt2004] [\cite=Saucan2005] [\cite=Narayan2011] [\cite=Wu2015].

While somewhat esoteric for the "layman", Ricci curvature plays a central role in Riemannian Geometry and has recently proven to be a remarkably powerful tool, mainly given its role in the celebrated proof by G. Perelman of Poincare's Geometerization Conjecture [\cite=Perelman2002] [\cite=Perelman2003], following a path laid down earlier by R. Hamilton [\cite=Hamilton]. Moreover, Ricci curvature proved itself to be unexpectedly flexible and adaptable to various discrete and more general settings, mainly in the version introduced by Y. Ollivier [\cite=Ollivier2009] [\cite=Ollivier2010] [\cite=Ollivier2013]. Various theoretical and practical applications have been explored in the literature, see respectively [\cite=Bauer2012] [\cite=Jost2014] [\cite=Ni2015] [\cite=Sandhu2015a] [\cite=Sandhu2015b].

Despite its practicability in theoretical settings, the Ollivier-Ricci curvature is limited in its applicibility on large, real-world networks. A major constraint is the high computational cost of its calculation. The Ollivier-Ricci curvature necessitates the calculation of the so called earth mover's distance, which in turn requires solving a non-trivial linear programming problem, thus rendering the computation unfeasible for trully large scale networks. A further limitation comes as a direct consequence of the very definition of Ollivier's concept: Given that the curvature's definition is instrinsically based on Optimal Transportation Theory, it follows that it is excellently suited for the investigation of information transfer in communication networks, yet it is less expressive as a model for structurally different types of interaction networks as occuring in biology or social sciences.

However, there is an alternative notion of discrete Ricci curvature that is computationally by far simpler and equally suited to describe the above discussed complex systems. The definition, introduced by Forman in [\cite=forman], applies to a very generalized class of cellular structures that includes triangular and polygonal meshes, as well as - most importantly in our context - graphs (and therefore networks). The Forman-Ricci curvature styles itself as a natural candidate for a discrete Ricci curvature that can be universally adapted to any type of network. After emerging as highly suited for rendering images [\cite=saucan0] [\cite=saucan1] [\cite=saucan2] and complex network analysis [\cite=Sreejit], we will explore its applicibility on characterization of dynamic effects in complex systems.

In the present article we continue and expand the programm initiated partly by [\cite=Sreejit], namely examining the relation of Forman-Ricci curvature with other geometric network properties, such as the node degree distribution and the connectivity structure. Based on this analysis, we suggest characterization schemes that yield insights in the dynamic structure of the underlying data as described in the following section. The emphasis of the article lies on analyzing the class of peer-to-peer networks, of which we provide two examples: Email communications [\cite=konect] and information exchange with the file-exchange system Gnutella [\cite=leskovec] [\cite=gnutella].

The main part of the paper introduces a novel change detection method for complex dynamic data sets that exploits the Ricci flow on the network with respect to the Forman curvature. Efficient implementations of the formalism enable rapid analysis of big data as we demonstrate on the Gnutella example. For this, we walk the reader through the analysis of a peer-to-peer network with respect to change detection, providing an overview on the work flow of the method.

Future applications include the characterization of dynamic effects in various classes of real-world networks and the analysis of the underlying data, as well as curating of related data bases.

Methods

The change detection method introduced in this article is based on a network-analytic formulation of the Ricci-flow using a discrete Ricci-curvature on networks introduced by R. Forman [\cite=forman]. In this section we define both the Forman-Ricci-curvature and the Ricci-flow on networks and demonstrate their ability to characterize complex dynamic systems and their underlying data on the example of a peer-to-peer network.

Forman-Ricci curvature on networks

In the classical context of smooth Riemannian manifolds (e.g. surfaces), Ricci curvature represents an important geometric invariant that measures the deviation of the manifold from being locally Euclidean by quantifying its volume growth rate. An essential property of this curvature is that it operates directionally along vectors. For our discrete setting it follows directly that Forman's curvature is associated with the discrete analog of those vectors, namely the edges of the network.

While, as mentioned above, Forman's approach defines Ricci curvature on the very general setting of n-dimensional cellular structures, we will concentrate on the simpler case of 1-dimensional weighted cellular spaces that can be represented as a weighted network graph. We will not consider higher dimensional cases here, since their technicalities would carrie us well beyond the scope and goal of the present paper and our intended applications. For a theoretical introduction see [\cite=forman].

In the 1-dimensional case, Forman's Ricci curvature for any network edge is defined by the following combinatorical formula

where

e denotes the edge under consideration that connects the nodes v1 and v2;

ω(e) denotes the (positive) weight on the edge e;

ω(v1),ω(v2) denote the (positive) weights associated with the nodes v1 and v2, respectively;

ev1,ev2 denote the set of edges connected to nodes v1 and v2, respectively.

Note that in [\ref=eq:ricci-curv] only edges parallel to e are taken into account, i.e. only edges that share a node with e. We highlight that, by its very definition, Forman's discerete curvature is associated intrinsically to edges and therefore ideally suited for the study of networks. Particularly, it does not require any technical artifice in extending a node curvature measure to edges, as some other approaches do. In particular, there is no need to artificially generate and incorporate two- or higher dimensional faces: An approach that would impose severe constraints on computatbility.

Additionally, a "good" discretization of Ricci curvature, such as Forman's proves to be [\cite=Forman2003], will capture the Ricci curvature's essential characteristic of measuring the growth rate - a property that is of special interest in the context of dynamic networks. Therefore, the Forman-Ricci curvature represents a way of determining whether a networks has the potential of growing infintely (negative curvature) or can only attain a maximal - and therefore computable - size (positive curvature).

Clearly, this aspect represents a further motivation of studying the Ricci curvature of networks, since it allows to distinguish numerically between expander type networks of essentially negative curvature, such as peer-to-peer networks, and small world types of networks that are on average of strictly positive curvature (see also [\cite=Ni2015]).

Characterizing large data sets with Ricci curvature

We now want to explore the Forman curvature as a means for characterizing real-world networks. Since this paper centers around peer-to-peer networks, we choose an example of email communication from [\cite=konect]. In such network (denoted G), nodes describe correspondents and edges the exchange of messages.

To characterize the network's structure with curvature, we have to impose normalized weighting schemes

[formula]

on both nodes and edges. Naturally, we want to weight extensively used communication channels (edges) higher than rarely used ones. For this we calculate the minimum path length l between each pair of nodes (vi,vj) and impose

[formula]

Analogousely, the busiest communicators should have the highest weights. Therefore we choose a combinatorial weighting scheme based on node degree, i.e. the number and weight of connections for each node v:

[formula]

The resulting structure of the network is shown in Fig. [\ref=email-net].A, the size of the nodes reflects their weights.

Using edge and node weights, we can now determine the Forman curvature distribution in the network. A curvature map (Fig. [\ref=email-net].C) provides a planar representation that highlights clusters and distinguished regions. The histogram (Fig. [\ref=email-net]D) shows the distribution of the curvature values allowing for comparison with the node degree distribution (Fig. [\ref=email-net].B). With indicating a correlation between the two distributions, the results highlight the strong influence of node degree weights on the network's topology. This is consistent with observations in email communications: Densley interconnected communities form around busy communication channels and active correspondents.

Ricci-flow with Forman curvature

As mentioned earlier, the Ricci flow as a powerful geometric tool was devised by Hamilton[\cite=Hamilton] and brought to full fruition by Perleman[\cite=Perelman2002] [\cite=Perelman2003] in the course of his celebrated proof of the Poincare conjecture. Since then, it has continued to be an active and productive field of study, both in terms of theoretical questions, but also for diverse practical applications, including work by Gu et al. (see, e.g. [\cite=Sarkar2009]). Those mainly build on a combinatorial version introduced by Chow and Luo [\cite=Chow2003]. However, other discretizations of the flow, with reported applications in network and imaging sciences are explored in the literature [\cite=Ni2015] [\cite=Saucan2014a].

The classical Ricci flow is defined by

[formula]

where gij denotes the metric of the underlying manifold, represented by the earlier introduced weighting scheme of the network's edges.

The reader might note the resemblance with the classical Laplace (or more precisely Laplace-Beltrami) flow that has become, by now, standard in Imaging and Graphics (see, e.g. [\cite=DESOLAPOOL19785] [\cite=Xu04] and the reeferences therein) being defined as

[formula]

where I denotes the image, viewed as a parametrized surface in [formula] (and Δ denotes, as customary, the Laplacian).

The resemblance is neither accidental nor superficial. Indeed, the Ricci curvature can be viewed as a Laplacian of the metric. We shall address the practical implications of this observation in the sequel and a follow-up article by the authors that adresses more theortical questions of this matter.

In our discrete setting, lengths are replaced by the (positive) edge weights. Time is assumed to go by in discrete steps and each "clock" has a length of 1. With these constraints the Ricci flow takes the form

[formula]

where γ̃(e) denotes the new (updated) value of γ(e) with γ(e) being the original - i.e. given - one.

In this context, we want to point out and discuss a few issues and observations regarding this last equation:

At each iteration step (i.e. in the process of updating γ̃(e) to γ(e)), the Forman curvature has to be recomputed for each edge e, since it depends on its respective weight γ(e). This clearly increases the computational effort on magnitudes, however, the computation task is less formidable than it might appear at first.

As already stressed, we consider a discrete time model. Since for smoothing (denoising) a short time flow is to be applied only a small number of iterations need be considered. The precise number of necessary iteration is to be determined experimentally. Even though a typical number can be found easily, best results may be obtained for slightly different numbers - depending on the network, and the type and level of the noise, of course.

Forman also devised a continuous flow [\cite=forman]. In the context of the present article, a continous setting is not required, but for other types of networks, where the evolution is continuous in time, it might be better to implement the other variant.

In addition to the Ricci flow above, one can consider the scalar curvature flow that in our case will have the form:

[formula]

where ei  =  ei(v,vi) denote the edges through the node v, and scalF(v) the (Forman) scalar curvature at a node v, which we define by

[formula]

Characterizing dynamic data with Ricci Flow

The introduced Ricci-flow can be utilized to characterize dynamic data. Given snapshots of a system at various (discrete) times {ti}, we analyze the Ricci flow on the corresponding network representations. The flow yields insights into structural changes providing a tool to identify "interesting" network regions. Applications include efficient change detection in large data sets and complex systems, as described in the following section. Let [formula] be a discrete time series with step size Δt. Consider a complex dynamic system of whose behavior we have snapshots at times (ti) represented in weighted network graphs (Gi)i∈I. We disregard any self-loops, i.e. edges connecting a node with itself. Let tn and tm be adjacent time points with corresponding graphs Gn and Gm. The weighting schemes of the nodes

[formula]

and edges

[formula]

characterize the topological structure of the system at times tn and tm. We can estimate the Ricci-flow for the time step Δt by iterating K times over

resulting in modified weighting schemes γKn and γKm respectively. The correlation between these weighting schemes characterizes the flow. Regions that were subject to significant change during the time Δt can be identified by thresholding the resulting correlation matrix.

Application

Change detection with Ricci flow

A major challenge of modern data science lies in characterizing dynamic effects in large data sets, such as structural changes in discrete time series of "snapshots" of the state a system or frequently updated large data bases. Commonly, network graphs are infered from data representing interactions and associations in the underlying data. In the case of peer-to-peer networks, the network describes the information flow (edges) between the peers (nodes).

We want to use the Forman-Ricci curvature to analyze the dynamic changes in the structure of such interaction networks infered from large data sets. Specifically, we want to characterize the information flow between the network's nodes using the previousely introduced Ricci flow. Our method follows formalism described in section 2 and is schematically displayed in Fig. [\ref=scheme].

The analysis of the information flow can be used to detect changes or distinguished regions of activity in the data. Applications include the curation of large open-access data bases and the detection of rare events in experimental data, such as spiking neurons in measurements of neuronal activity.

Analysis of Gnutella peer-to-peer network

We consider a series of discrete time snapshots of a complex peer-to-peer system, represented as network graphs (Gi)i∈I. To characterize the Ricci flow, we apply the earlier described formalism pairwise, i.e. we iterate over ([\ref=eq:Ricci-flow]) for snapshots (Gn,Gm) at consecutive time points tn and tm. Here we use the file-exachange service Gnutella as an example, analyzing the peer-to-peer networks resulting from exchange activities on two consecutive days (August 8 and August 9 2002, [\cite=leskovec] [\cite=gnutella]). Fig. [\ref=gnutella] shows the networks infered from the data sets and the corresponding curvature maps with the distribution of Forman Ricci curvature. We applied our change detection method with a correlation threshold of t = 0.9 to detect regions of significant changes, i.e. groups of peers with significant activity. The results are shown in Fig. [\ref=change-detect], represented as a heatmap. Light spots in the heatmap correspond to network regions with large flow and structural changes allowing for detection and localization of such dynamic effects. The method provides a clear representation of dynamic changes in networks, especially in terms of the community structure of the network. Given a separation of the network in communities (clusters), which is also hinted in the Forman curvature maps, one can examine the influence of the flow on the community structure.

Discussion and Future Work

The dawning age of big data opens up great numbers of possibilities and perspectives to gain insights in the principles of nature, humanity and technology through collection and (statistical) analyis of data. However, the vaste amounts of available data challenge our analyzing methods leading to an increased need of automated tools that can perform rapid and efficient data evaluations.

Networks are an efficient and commonly used way of representing data, putting emphasis on interactions and associations. This representation is ideal for analyzing structures within the data under geometric aspects. We have used networks to characterize peer-to-peer systems and analyze dynamic effects in information transfer between its peers. Particularly, we introduced a method for detecting changes in these dynamics. Possible applications of this theoretical framework include denoising of experimental data and identification of "interesting" groups of data points and activities of network regions.

The geometric methods we used in the present article are build on R. Forman's work on Ricci curvature in networks and the corresponding Ricci flow based on this definition. Future work, especially a follow-up article by the authors, will expand the range of geometric tools used in the methods and develop a deeper understanding of theoretical aspects. In what follows, we want to name and discuss some extensions and theoretical considerations that we shall adress in future work.

One important fact, whose implications we shall discuss later on, is the so called Bochner-Weitzenboeck formula (see, e.g. [\cite=Jost2011]), which relates graph Laplacian and Ricci curvature through an algebraic-geometric approach. More precisely, it prescribes a correction term for the standard Laplacian (or Laplace-Beltrami) operator, in terms of the curvature - or rather curvatures - of the underlying manifold. Given that the Laplacian plays a key role in heat equation (see, e.g. [\cite=Jost2011]), it is easy to gain some basic physical intuition behind the phenomenon of curvature and flow: The heat evolution on a curved metal plate differs from that on a planar one in a manner that is evidently dependent on the shape (i.e., curvature) of the plate.

This conducts us to a number of prospective future directions:

A task that is almost self evident, is to further experiment with very large data sets (numbers of data points in the order of ten thousand and more);

Another natural target is the use of our method on different types of networks, with special emphasis on Biological Networks;

A statistical analysis regarding the Ricci flow, similar to the one presented here and in [\cite=Sreejit], should also be performed on various standard types of networks in order to confirm and calibrate the characterization and classifying capabilities of the Ricci curvature and flow.

Slightly more demanding are future experiments and comparisons with the related flows, namely

The Forman curvature versions of the scalar and Laplace-Beltrami flows. Especially the last one seems to be quite promising for network denoising, as applications of the analogous flow in image processing showed [\cite=Saucan2008]. Moreover, the Forman-Ricci curvature comes naturally coupled with a fitting version of the so called Bochner Laplacian (and yet with another, intrinsically connected, rough Laplacian).

Here, as for the short time Ricci flow, statistical analysis should be undertaken to validate the classification potential of the long term Ricci flow.

A more ambitious, yet still feasible, future direction would be to explore network stability by considering the long time Forman-Ricci flow (as opposed to the short time one employed for denoising). This approach would exploit, in analogy with the smooth case [\cite=Perelman2002] [\cite=Perelman2003], the propensity of the Ricci flow to preserve and quantify the overall, global Geometry (i.e. curvature) and essential topology of the network. This would allow us to study the evolution of a network "under its own pressure" and to detect and examine catastrophic events as virus attacks and denial of service attempts. Given the basic numerical simplicity of our method, this approach might prove to be an effective alternative to the Persistent Homology method (see, e.g. [\cite=Petri2014]) for the 1-dimensional case of networks. Moreover, the Ricci flow does not need to make appeal to higher dimensional structures (namely simplicial complexes) that are necessary for the Persistent Homology based applications, with clear computational - but also theoretically rigor - advantages. The potential benefits of the Ricci flow would be, in fact, even greater, given that it deals with weighted networks, not just with their unweighted, combinatorial counterparts used in Persistent Homology.

Acknowledgements

ES acknowledges the warm support of the Max-Planck-Institute for Mathematics in the Sciences, Leipzig, for the warm hospitality during the writing of this paper. He would also like to thank Areejit Samal for many interesting discussions. MW was supported by a scholarship of the Konrad-Adenauer-foundation.