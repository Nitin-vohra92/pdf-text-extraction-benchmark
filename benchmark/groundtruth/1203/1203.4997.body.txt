Theorem Lemma Corollary Proposition Example Remark

=10000

Constructive version of Boolean algebra

Introduction

The classical Tarski's representation theorem (see [\cite=tar35]), asserting that atomic complete Boolean algebras coincide with powersets, does not hold any longer if one works in a constructive foundation. By a constructive foundation we mean one governed by intuitionistic logic and enjoying a semantics of extraction of programs from proofs (for a formal definition see [\cite=mtt]). The reason for the failure of Tarski's theorem is simple: when one drops the law of excluded middle, powersets stop being Boolean algebras. Hence, the following natural question arise:

what kind of algebraic structure characterizes powersets constructively?

or better, what is the algebraic structure corresponding classically to complete boolean algebras and including constructive powersets as examples?

The first question was answered by Joyal and Tierney in [\cite=joyal-tierney] in a constructive impredicative foundation by giving a categorical characterization of discrete locales, while the second question was answered by Sambin in [\cite=bp] within a constructive and predicative foundation by introducing the notion of overlap algebra. More precisely, Sambin worked in the minimalist foundation introduced in [\cite=mtt] [\cite=mtt2] as a common core among the most relevant foundation for constructive mathematics. Since this foundation is predicative, in there one speaks of power-collections and not of powersets, since the power of a set, even that of a singleton, is never a set predicatively.

An overlap algebra is a predicative locale equipped with a notion of "overlap" between elements of the algebra. The overlap relation is a positive way to express when the meet of two elements is different from the bottom; among other things, it allows to define a suitable notion of atom. Moreover, when overlap algebras are set-based (i.e. they have a set of join-generators), they become in particular formal topologies [\cite=S87]. The concept of formal topology was introduced by Martin-Löf and Sambin to describe locales predicatively, and it corresponds impredicatively to that of overt locale, and classically to that of locale. But not all formal topologies are overlap algebras, because the overlap relation is a proper strengthening of the positivity predicate as shown by the fact that overlap algebras coincide classically with complete Boolean algebras (see [\cite=bp]). Actually, in [\cite=ci2] it is proven that overlap algebras coincide constructively with the collection of regular opens of formal topologies, thus giving a predicative version of the classical representation theorem for complete Boolean algebras. Finally, since Sambin in [\cite=bp] proved that power-collections coincide with atomic set-based overlap algebras, we can conclude that the notion of overlap algebra is the right constructive version of complete boolean algebra. Constructive examples of non-atomic overlap algebras are given in [\cite=cisa].

In this paper, we show that Sambin's notion of overlap morphism in [\cite=bp] corresponds classically to that of map preserving arbitrary joins, and hence the category of overlap algebras in [\cite=bp] is classically equivalent to that of complete Boolean algebras with maps preserving arbitrary joins. Furthermore, by working in the minimalist foundation introduced in [\cite=mtt2], we prove that the power-collection of all subsets of a set is the free overlap algebra join-generated from the set. Then, we observe that we can present atomic set-based overlap algebras simply as suitable formal topologies, thus providing a predicative characterization of discrete locales within the language of formal topology, instead of using the reacher language of overlap algebras.

Furthermore, we generalize the notion of overlap algebra and overlap morphism to provide a constructive version of the category of (non necessarily complete) Boolean algebras and maps preserving existing joins. Basically we observe that join-completeness is not needed when proving the equivalence between the category of overlap algebras and that of complete Boolean algebras.

However, in order to represent boolean algebras constructively, we are faced with various choices. Indeed we can define different structures equipped with an overlap relation with the same properties as the one given by Sambin but related only to existing joins: we define a Boolean algebra with overlap, called o-Boolean algebra, a Heyting algebra with overlap, called o-Heyting algebra, and a lattice with an opposite (pseudocomplement) and overlap, called oo-lattice. We show that such structures with overlap, for short o-structures, classically (and impredicatively) are nothing but Boolean algebras. Constructively, we show that they are all different and we study their mutual relationships.

As a future work we intend to investigate whether we can use our o-structures to obtain constructive versions of classical representation theorems for Boolean algebras.

Some remarks on foundations

When developing our theorems we assume to work in the extensional set theory of the two-level minimalist foundation in [\cite=mtt2]. This was designed according to the principles given in [\cite=mtt]. The main characteristic is that our foundational set theory is constructive and predicative. The fact that our foundation is constructive means that it is governed by intuitionistic logic, which does not validate excluded middle, and it enjoys a realizability model where to extract programs from proofs. The predicativity of our foundation implies that the power-collection of subsets of a set X, written P(X), is not a set, but a proper collection. Hence in our set theory we have the notion of set and that of collection. To keep predicativity, a subset of a set X can only be defined by comprehension on a formula φ(x), for [formula], with quantifiers restricted to sets; such a subset is written [formula].

It is worth mentioning that a complete join-semilattice (also called suplattice) whose carrier is a set is necessarily trivial in a predicative constructive foundation [\cite=Cu10]. Therefore in such a setting we are lead to define a complete join-semilattice as a collection closed under joins of set-indexed families (we cannot assume arbitrary joins to exist, otherwise we fall again into a trivial lattice).

As done in [\cite=S87] and [\cite=bat] we can make the definition of complete join-semilattice easier to handle by restricting ourselves to the notion of set-based complete join-semilattice, given that all the relevant predicative examples known so far fall under this class. A set-based complete join-semilattice is a semilattice that is join-generated from a set(-indexed family) of elements, called join-generators. This means that each element is the join of all the join-generators below it. Such a join exists if the collection of all join-generators below an element form a subset (equivalently, a set-indexed family). In order to achieve this, we need the order of the semilattice to be defined by a formula containing only quantifications over sets. For instance, the order in P(X) making it a set-based complete join-semilattice is written as follows: A  ⊆  B iff [formula].

Note that every set-based suplattice has binary meets, also predicatively. In fact, one can construct [formula] has the join of all generators a such that both a  ≤  x and a  ≤  y hold. This is well-defined in view of the discussion above.

In this paper we will deal with overlap algebras, which are in particular complete join-semilattices, and we assumed them to be all set-based.

Before starting, let us agree on some notation: X, Y, S and T will always denote sets with elements x, y, z, a, b, c, and subsets A, B, C, D, E, U, V, W, Z. On the contrary, P and Q will always stand for collections whose elements will be written as p, q, r, . Accordingly, we will use two different symbols to distinguish between the two kinds of membership: [formula] for sets and subsets, : for collections.

Overlap algebras

The notion of overlap algebra was introduced by Sambin in [\cite=bp]. It provides a constructive and predicative version of complete boolean algebra and it includes constructive power-collections of sets as examples. Of course, the usual notion of complete Boolean algebra is not apt to this purpose because, in a constructive foundation, power-collections are not Boolean algebras but only complete Heyting algebras. An overlap algebras is an enrichment of the notion of predicative locale with an overlap relation used to define positively when the meet of two elements is different from the bottom. In the case of power-collections, the notion of overlap between two subsets A,B  ⊆  X, denoted by [formula], expresses inhabitedness of their intersection and is therefore defined as follows:

[formula]

Moreover, classically, any complete Boolean algebra B is equipped with an overlap relation defined as [formula] for [formula] (see [\cite=bp]). Thus the notion of overlap is a constructive positive way to express inhabitedness of the meet of two elements. As we will see, it allows to define the notion of atom. Atomic set-based overlap algebras coincide constructively with power-collections of sets. Therefore the notion of atomic set-based overlap algebra provides a predicative version of the categorical characterization of discrete locales in [\cite=joyal-tierney] within the language of overlap algebras. Here, after reviewing some basic facts on overlap algebras, we will describe atomic set-based overlap algebras in terms of formal topologies, thus providing a predicative version of discrete locales within the language of formal topology. We then end by showing that the power collection of a set is the free overlap algebra join-generated from the set.

Definition and basic properties

An overlap algebra (o-algebra for short) is a triple [formula] where (P,  ≤  ) is a suplattice and [formula] is a binary relation on P satisfying the following properties:

[formula] (symmetry)

[formula] (meet closure)

[formula] (splitting of join)

[formula](density)

(for any p and q in P).

We say that an o-algebra [formula] is set-based if the join-semilattice (P,  ≤  ) admits a base, that is, a set-indexed family of generators (with respect to the operation of taking set-indexed joins), called join-generators. We agree to make no notational distinction between the base and its index set; thus S is a base for P if [formula] | a  ≤  p} for any p:P. For the reasons mentioned in section 2, we shall assume each o-algebra to be set-based.

It is easily seen that all quantifications over the elements of an o-algebra P can be reduced to the base. For instance, the "density" axiom in definition [\ref=def._o-algebras] is equivalent to

[formula]

(S being a base). Just to get acquainted with the axioms, let us prove that "density" implies ([\ref=eq._set-based_density]) (the other direction being trivial). It is enough to prove that [formula] ⇒   [formula] [formula] [formula] ⇒   [formula]. Take r:P such that [formula]. Since [formula] | a  ≤  r} and [formula] splits [formula], there exists [formula] such that a  ≤  r and [formula]. By hypothesis, we get [formula] and hence [formula] by the splitness property again.

For every set X, the structure [formula], where [formula] is defined as in equation ([\ref=eq._def._overlap]), is an o-algebra whose singletons form a base. In addition, we shall see in the following sections that P(X) is also atomic and free over X. Here below, we list some useful properties of o-algebras. Detailed proofs can be found in [\cite=bp], [\cite=ci2] and [\cite=cisa].

Let P be an o-algebra with base S; then the following hold:

[formula]

[formula]

[formula]

[formula]

[formula]

[formula] [formula] [formula]

for every p, q, r in P.

(1) From [formula], it follows that [formula] by splitness; but [formula] because r  ≤  q. (2) By density. (3) By meet closure and item 1. (4) By meet closure, symmetry and splitness of join. (5) By splitness of join, because 0 is the join of the empty family. (6) If [formula], then [formula] would contradict item 5 (by item 4). To prove the other direction we use the density axiom: for [formula], if [formula], then [formula] (by symmetry and items 4 and 1) which contradicts the assumption [formula], so [formula] (ex falso quodlibet).

As a corollary, we get that all the axioms in Definition [\ref=def._o-algebras] can be reversed. In particular, the order relation can be considered as a defined notion with the overlap relation as primitive (thanks to the axiom "density" and its converse). Not surprisingly, most of the times an inequality has to be proven, we shall apply "density" (as we have already done in the proof of item 6); similarly, for equalities we shall often use item 2 above.

Note that in a set-based o-algebra the overlap is uniquely determined. First, observe that by density and item 4 of prop. [\ref=properties_o-algebra] [formula] | [formula] holds for all p in a set-based o-algebra P with base S. Suppose that [formula] and [formula] are overlap relations in P. We now show that [formula] and [formula] are equivalent. To this purpose it is enough to prove that [formula] implies [formula]. Suppose [formula], then by meet closure [formula]; now from [formula] | [formula] by splitness of join we deduce that there exists [formula] such that [formula], [formula], [formula], and by item 1 of prop. [\ref=properties_o-algebra] and symmetry we conclude [formula].

The intuition underlying the relation [formula] suggests that there should be deep links between it and the positivity predicate in Formal Topology. The notion of formal topology was introduced by Martin-Löf and Sambin to describe locales predicatively; it corresponds impredicatively to that of open locale, and classically to that of locale (see [\cite=S87] [\cite=Joh] [\cite=Sam2002]). Here we give a definition of a formal topology which is more suitable for our purposes, though equivalent to that in [\cite=cssv].

A formal topology P is, first of all, a formal cover, namely a set-based suplattice in which binary meets distribute over set-indexed joins, that is:

[formula]

If S is a base, [formula] and U  ⊆  S, one usually writes

[formula]

Moreover, P is equipped with a positivity predicate, namely a unary predicate [formula] for p in P such that: for p,q and pi (for [formula]) in P

In the following we simply say that an element p of a formal topology P is positive if it satisfies [formula].

Every set-based o-algebra is a formal topology with the positivity predicate defined as [formula].

Firstly, we claim that every o-algebra P is, in fact, a formal cover; we need only to prove ([\ref=eq._infinite_distributivity]). For all r:P the following hold: [formula] iff [formula] iff [formula] for some [formula] iff [formula] for some [formula] iff [formula]. This is sufficient by (2) of proposition [\ref=properties_o-algebra].

Now, let us put [formula]. We claim that [formula] is a positivity predicate. All the requested properties are quite easy to prove (hint: use density to prove the positivity axiom).

The notion of o-algebra is stronger than that of formal topology. Indeed, first of all, for a formal topology P the binary predicate [formula] satisfies all the axiom of an overlap relation but density. In other words, a formal topology is an o-algebras if and only if its positivity predicate [formula] satisfies the following:

[formula]

for every p and q. Moreover, in the next we are going to prove that o-algebras coincide classically with complete Boolean algebras and hence, of course, they are "fewer" than formal topologies, or locales.

Since we are assuming in this paper that every o-algebra is set-based, it follows that every o-algebra is a complete Heyting algebra, because it has an implication defined by: p  →  q = [formula] | [formula], where S is a base. The validity of this fact is one of the advantages of working with set-based structures.

O-algebras classically

Building on item 6 of Proposition [\ref=properties_o-algebra], we now state two lemmas, essentially due to Sambin (see [\cite=bp]), which further clarify the relationship between the overlap relation [formula] and its negative counterpart [formula].

Classically, in any o-algebra, [formula] is tantamount to [formula].

From Proposition [\ref=properties_o-algebra], item 6.

Let [formula] be a [formula]-semilattice with bottom and with a pseudocomplement, i.e. a unary operation -   such that p  ≤   - q if and only if [formula]. The following are equivalent constructively:

[formula] ⇒   [formula] [formula] [formula] (negative density);

[formula] [formula] [formula] ⇒   [formula].

Assume 1. and let r be such that [formula], that is, [formula]. Since -  -  - p =  - p, this is tantamount to say that [formula], that is, [formula]. Since r is arbitrary, we get -  - p  ≤  p by negative density. Hence -  - p = p for any p:P. Assume now [formula]; we claim that p = q. It is enough to prove that p  ≤  q; so, by negative density, we must check that [formula] implies [formula]: this is easy because if it were [formula], then it would be p  ≠  q (since [formula]), contrary to the assumption [formula].

Vice versa, assume 2. and note that the implication [formula] ⇒   [formula] can be rewritten as [formula] ⇒   [formula] which, by hypothesis, is equivalent to [formula] ⇒   [formula]. Thus the antecedent of negative density becomes [formula] ⇒   p  ≤   - r); the latter gives in particular (even is equivalent to) p  ≤  q (choose r =  - q and use -  - q = q).

We think it is illuminating to compare o-algebras with complete Boolean algebras (this result was first suggested by Steve Vickers).

Classically, every complete Boolean algebra (with 0  ≠  1) is an o-algebra (with [formula]), where [formula] ⇔   [formula].

Classically and impredicatively, every o-algebra (with [formula]) is a complete Boolean algebra (with 0  ≠  1).

(See [\cite=bp] and [\cite=ci2]). Start with a complete Boolean algebra and (consider Lemma [\ref=lemma_1]) define [formula] as [formula]. This relation trivially satisfies symmetry and meet closure. Density follows from the previous Lemma. Finally, splitting of join can be easily reduced to [formula] ⇔   [formula] which is classically valid.

Conversely, every set-based o-algebra is a complete Heyting algebra, as we know. Moreover, by Lemma [\ref=lemma_1] and Lemma [\ref=lemma_2], we get that -  - q = q, for any q. Finally, the powerset axiom allows one to consider the carrier of an o-algebra as a set, as required by the usual definition of complete Boolean algebra.

Morphisms between o-algebras

Let f:P  →  Q and g:Q  →  P be two maps between o-algebras. We say that f and g are symmetric and we write [formula] if

[formula]

for all p:P and q:Q.

In [\cite=bp] Sambin proposed and widely justified the following definition of morphism between o-algebras.

An overlap morphism (o-morphism) from an o-algebra P to an o-algebra Q is a map f:P  →  Q such that there exist f-,f*:Q  →  P and f-  *:P  →  Q satisfying the following conditions:

[formula] ([formula])

[formula] ([formula])

[formula] ([formula])

(for all p:P and q:Q).

Easily, the identity map id¶ on P is an o-morphism (with id-¶ =   id*¶ =   id-  *¶ =   id¶); moreover, the composition [formula] of two o-morphisms is an o-morphism too (with [formula], [formula] and [formula]).

O-algebras and o-morphisms form a category, called [formula].

Here we present an example of o-morphism which is actually the motivating one. For X and Y sets, it is possible (see [\cite=bp]) to characterize o-morphisms between the overlap algebras P(X) and P(Y) in terms of binary relations between X and Y. For any relation R between X and Y, consider its existential image defined by

[formula]

(for A  ⊆  X). It is easy to check that the operator R is an o-morphism from P(X) to P(Y) with R-, R* and R-  * defined, respectively, by:

[formula]

(for any A  ⊆  X and B  ⊆  Y). Vice versa, every o-morphism f:P(X)  →  P(Y) is of this kind: define x  R  y as [formula]. This correspondence is biunivocal and defines a full embedding of the category of sets and relations into [formula].

The conditions of an o-morphism simplify in a relevant way in the case its domain and codomain are set-based o-algebras. First of all, one should recall from category theory that, considering f and f- as functors between the poset categories P(X) and P(Y) (since they are monotone functions), the functions f* and f-  * are the right adjoints of them respectively, and hence, if exists, they are uniquely determined by f and f-. Moreover, f* (respectively f-  *) exists if and only if f (respectively f-) preserves all joins. This is true in an impredicative setting, but also predicatively at least for set-based structures. In the latter case f*(q) can be defined as [formula] | f(a)  ≤  q} (and similarly for f-  *). Before going on, let us prove a few properties about symmetric functions.

Let f be a map on the o-algebra P to the o-algebra Q such that there exists g:Q  →  P with [formula]; then:

g is unique; that is, if h:Q  →  P satisfies [formula], then h = g;

g is determined by f, in the sense that for any q:Q

[formula]

where S is a base for P.

(1) For every x in (a base for) P and every y in Q, we have: [formula] iff [formula] iff [formula]. Hence h = g by (2) of prop. [\ref=properties_o-algebra]. (2): g(q) =   [formula] | a  ≤  g(q)} =   [formula] | [formula] ⇒   [formula] | [formula] ⇒   [formula].

We say that a map f:P  →  Q between o-algebras is symmetrizable if there exists a (necessarily unique) map f-:Q  →  P such that [formula]. In that case, we say that f- is the symmetric of f.

Since [formula] is a symmetric binary relation, if f is symmetrizable also f- is and (f-)- = f. Note also that, if f:P  →  Q is an o-morphism, then also f-:Q  →  P is an o-morphism.

Let f be a symmetrizable map on the o-algebra P to the o-algebra Q; then f (and f-) preserves all (set-indexed) joins.

For any y:P, we have: [formula] iff [formula] iff [formula] iff [formula] iff [formula]. Hence (by density) we can conclude that [formula].

Let f:P  →  Q be a map between two (set-based) o-algebras; then the following are equivalent:

f is an o-morphism;

f is symmetrizable;

f satisfies the following property:

[formula]

for all p:P and q:Q (where S is a base of P).

(3 ⇒   2) We show that the function g(q) =   [formula] | [formula] ⇒   [formula] of Proposition [\ref=prop._properties_symmetric] is in fact the symmetric of f. As [formula] splits joins, we have [formula] if and only if [formula] for some a satisfying [formula] ⇒   [formula] and this holds if and only if, by 3, [formula]. (2 ⇒   1) By Proposition [\ref=prop._symmetrizable_preseves_joins], both f and f- preserve joins; hence their right adjoints f* and f-  * exist. (1 ⇒   3) Let f- be the symmetric of f. Then [formula] [formula] [formula] ⇒   [formula] iff [formula] [formula] [formula] ⇒   [formula] iff [formula] [formula] a  ≤  f-(q)) iff [formula] iff [formula].

Here we want to spend some words about item 3. Firstly, it is surely of some interest because it characterizes the notion of o-morphism by an intrinsic property of the map f itself. Moreover, it seems the right notion of morphism in the non-complete case, as we shall see in the last sections. Furthermore, we think it is worth mentioning that ([\ref=RED]) is a form of continuity. This fact is better seen in the context of formal topology (see [\cite=ci2]). However, we can here give a suggestion: following equations ([\ref=eq._induced_operators]) we write [formula] for [formula]; then condition ([\ref=RED]) can be rewritten as [formula] =   [formula] | [formula]. Thus, if the families [formula] and [formula] are taken as sub-bases for two topologies on P and Q, respectively, then ([\ref=RED]) is a notion of continuity for f (in fact, this is stronger than usual continuity because the [formula]'s do not form a base, in general). By the way, note that reading [formula] as a unary operator allows to rewrite [formula] as [formula] =   [formula].

Classically and impredicatively, o-morphisms are exactly the maps preserving all joins.

In a classical setting, an o-algebra is exactly a cBa (Proposition [\ref=prop._o-algebras_cBa's]). As we already know from Proposition [\ref=prop._symmetrizable_preseves_joins], every o-morphism is join-preserving. Viceversa, if f:P  →  Q preserves all joins, then (by the powerset axiom) it admits a right adjoint f*. We claim that f- exists and it is f-(q) =  - f*( - q). Indeed, for p in P we have: [formula] iff [formula] iff [formula] iff [formula] iff [formula] iff [formula].

Let [formula] be the category of complete Boolean algebras with maps preserving arbitrary joins and finite meets (and hence complements).

We write [formula] for the category (of which [formula] is a subcategory) of complete Boolean algebras and join-preserving maps (maps which preserve arbitrary joins).

Classically, the categories [formula] and [formula] are equivalent.

By Propositions [\ref=prop._o-algebras_cBa's] and [\ref=prop._CLASS:_o-morphism_=_join-preserving].

Symmetrically, it is not difficult to select a subcategory of [formula] which is isomorphic to the whole of [formula].

Let [formula] be the subcategory of [formula] with the same objects as [formula] and whose morphisms are the o-morphisms preserving finite meets.

The category [formula] of complete Boolean algebras is classically equivalent to the category [formula].

Atomic o-algebras as discrete formal topologies

In a poset with zero, every minimal non-zero element is usually called an "atom". Here, we see how to define the notion of atom in an overlap algebra. This will allow us to characterize power-collections as atomic (set-based o-algebras). Then, after noting that the notion of atom can be also given in the language of formal topology, we define the notion of discrete formal topology and compare it with the categorical characterization of discrete locales by Joyal and Tierney in [\cite=joyal-tierney].

Let P be an overlap algebra. We say that m:P is an atom if [formula] and for every p:P, if [formula] then m  ≤  p.

There are several useful characterization of this notion; among them, we list the following.

In any o-algebra P, the following are equivalent:

m is an atom;

[formula] and, for every p:P, if [formula] and p  ≤  m, then p = m;

for every p:P, [formula] if and only if m  ≤  p;

[formula] and, for every p,q:P, if [formula] and [formula], then [formula].

See [\cite=bp] and [\cite=ci2].

We say that an overlap algebra is atomic if its atoms form a base, i.e. the atoms form a set and each element of the algebra is join-generated from a subset of atoms.

Clearly P(X) is atomic; and this is, essentially, the only example (see [\cite=bp]).

An o-algebra Q is atomic if and only if it is isomorphic to P(S), for some set S.

One shows that an atomic o-algebra Q is isomorphic to P(A) where A is the set of atoms of Q.

Note that the definition of atom given above makes sense also for the more general notion of a formal topology. In particular, item 2 above suggests the following:

Let P be a formal topology with base S and positivity predicate [formula]. We say that an element [formula] is an atom, written [formula] if

[formula] holds and

for every other [formula], if [formula] and b  ≤  a, then b = a.

This definition of atom is predicative (no quantification over collections is required), but not restrictive. In fact, it is easy to see that:

if p:P satisfies 1. and 2. above, then [formula] (in the usual notation of formal topology this is trivial: any subset U of S that is an atom is a singleton, because of 2. and because, being U positive, it is certainly inhabited);

if a is an atom, then 2. is satisfied for all b:P (even not belonging to S).

This definition captures the usual intuition on atoms. For instance, it is easy to check that: if [formula] and [formula], then a  ≤  u for some [formula]. In fact, from [formula] on gets [formula]. From [formula] one thus obtains [formula] for some [formula]. But [formula] and so [formula], that is, a  ≤  u.

Since the collection of all atoms as defined in definition [\ref=atomft] form a subset At(P) of S, and hence a set, we can give a predicative version of the categorical characterization of discrete locales in [\cite=joyal-tierney] in the context of formal topology:

A formal topology is discrete if every element is a join of atoms.

And, of course, we can prove:

Let P be a formal topology. The following are equivalent:

there exists a binary relation [formula] on P such that [formula] is an atomic overlap algebra;

there exists a set S such that (P,  ≤  ) is order-isomorphic to (P(S),  ⊆  );

P is a discrete formal topology.

Just note that to pass from (3) to (1) one defines an overlap relation by: [formula] iff [formula].

Now, we are going to show how the abstract characterization of discrete locales in section 5 page 40 of [\cite=joyal-tierney] is equivalent to our notion of discrete formal topology. Given that the mentioned characterization of discrete locales makes reference to the diagonal map Δ¶  =  〈id¶,id¶〉 : P →   P  ×  P in the category of locales and given that we do not know how to build predicative binary products in the whole category of formal topologies but we only know it in the full sub-category of inductively generated formal topologies in the sense of [\cite=cssv] (see [\cite=mv04]), here we restrict our attention to inductively generated formal topologies. We just recall that if S is a base for P, then S  ×  S is a base for the product formal topology P  ×  P and the corresponding positivity predicate is [formula] for p in P  ×  P. In this context we define the notion of open formal topology map as follows. First of all recall that a formal topology map f:P  →  Q is just a frame map f*:Q  →  P, namely a function preserving finite meets and arbitrary joins. A formal topology map f:P  →  Q is open if the corresponding frame map f*:Q  →  P, seen as a functor from the poset category Q to P (i.e. a monotone map), has a left adjoint [formula] satisfying [formula] = [formula] (Frobenius reciprocity condition) for all x and y.

In the next, we will make use of openess of binary product projections in the following form: given P inductively generated formal topology with base S

for [formula] with a,b positive and W subset of S  ×  S

[formula]

(which can be proved by induction, see [\cite=mv04]).

Moreover, observe that if [formula], then also [formula]: if (x,y) is positive and (x,y)  ≤  (a,a), then by condition ([\ref=openess]) x  ≤  a and y  ≤  a, and hence x = y = a, being a an atom.

Assuming that P is an inductively generated formal topology with base S, the following are equivalent:

P is discrete;

the diagonal map Δ¶ : P →   P  ×  P in the category of formal topologies is open.

(1⇒   2) Thanks to corollary [\ref=eqatom] we think of P as an overlap algebra and hence we use the characterization of atom in lemma [\ref=lemma_char._atoms].

We define the left adjoint as follows: for p in P

[formula]

Indeed, the counit disequality [formula] for q in P  ×  P follows easily. First recall from [\cite=mv04] that Δ*¶ is defined on the base by

[formula]

and hence extended to the whole P by [formula]. Now, if a is an atom satisfying a  ≤  Δ*¶(q), then there exists [formula] such that [formula] with (x,y)  ≤  q, from which it follows that (a,a)  ≤  (x,y) and hence (a,a)  ≤  q.

The unit disequality [formula] for p in P follows by density: given an atom a such that [formula] then a  ≤  p and hence [formula] and finally, since [formula], we conclude [formula], or equivalently [formula].

In order to prove Frobenius reciprocity, it is enough to show the disequality [formula] for q in P and r in P  ×  P. First of all note that by distributivity [formula]. Hence, to prove the above disequality it is enough to show that for any positive base element [formula] such that [formula] with a atom and a  ≤  p we have [formula]. Now, recalling that if a is an atom, then (a,a) is an atom, too, from (x,y)  ≤  (a,a), being (x,y) positive, we get (x,y) = (a,a) and by condition ([\ref=openess]) also that x = y = a, and hence (a,a)  ≤  r. So a = Δ*¶(  (a,a)  )  ≤  Δ*¶(r), and hence [formula]. This lets us conclude [formula] by the definition of [formula].

(2⇒  1) Let us call 1 the top of P. We claim that any positive base element [formula] satisfying [formula] is a square, namely a = b. From the hypothesis [formula], by Frobenius reciprocity we get [formula] and hence [formula]. Now, [formula] = [formula]. Therefore, since [formula] preserves joins (being a left adjoint), we get [formula]. Finally, since [formula] = [formula] = [formula] ≤   (c,c) by the counit disequality, we conclude [formula]. So, from [formula] and from [formula], we have [formula] and [formula] by condition ([\ref=openess]), that is a = b, as claimed.

Now, it follows that any positive [formula] with [formula] is an atom of P: indeed, for [formula], x positive and x  ≤  a, we get (x,a)  ≤  (a,a) and hence [formula]; so, by what shown above, x = a. Finally, the unit disequality [formula] for p in P, says that [formula]. By the positivity axiom on P, in the above join we can assume all [formula] to be positive from which we get that both a and b are so, and hence [formula]. Thus a = b for each (a,b) in the above join. In other words, we obtain [formula]. We claim that, for an atom a, the condition [formula] implies a  ≤  p. We argue as follows. Since S is a base for P, one has [formula] and hence, since [formula] preserves joins, [formula]. But [formula], since a is an atom, so [formula] for some x  ≤  p. Therefore, a = Δ*¶(a,a) ≤   [formula] = [formula] = Δ*¶(x,x) = x ≤  p, as wished. Summing up, we have got that p is the join of the atoms below it.

Free o-algebras

It is well known that P(X) is the free suplattice (complete join-semilattice) over a set X. The following proposition shows that P(X) is also the free o-algebra on a set X of join-generators.

For any o-algebra Q, any set X and any map f:X  →  Q, there exists a unique o-morphism [formula] such that the following diagram commutes:

[formula]

where i(x) = {x}, for any [formula].

For U  ⊆  X, let us put [formula] | [formula]. This definition is compulsory: [formula] | [formula] (because [formula] must be an o-morphism and hence it has to preserves joins) [formula] | [formula] (because [formula] must be f) [formula] | [formula]. We claim that [formula] is symmetrizable. Let g:Q  →  P(X) be the map defined as in equation ([\ref=eq._def._f^-]) (with respect to [formula]). Since P(X) is based on singletons and [formula] simply means x = a, we can simplify the expression defining g and get [formula] | [formula]. For all U  ⊆  X and q:Q, the following hold: [formula] ⇔   [formula] ⇔   [formula] ⇔   [formula] | [formula] ⇔   [formula]. Thus, [formula] is an o-morphism. Moreover, for all [formula], [formula] | [formula].

Overlap lattices with opposite

An overlap lattice with opposite (oo-lattice for short) is a quadruple [formula] where (P,  ≤  ) is a bounded lattice (with 0 and 1 as the bottom and top elements, respectively), -   is a pseudo-complement operation (that is, [formula] if and only p  ≤   - q) and [formula] is a binary relation on L satisfying the following properties:

[formula] (symmetry)

[formula] (meet closure)

if [formula] exists, then: [formula] (splitting of existing joins)

[formula](density).

A set S of elements of an oo-lattice P is a base for P if for every p in P the join of the family [formula] | a  ≤  p} exists and equals p. From now on, as usual, we shall always work with set-based structures. It is easy to check that all properties stated in Proposition [\ref=properties_o-algebra] still hold for oo-lattices. Each (set-based) o-algebra is an example of oo-lattice: it is enough to define the opposite of an element p as [formula] | [formula]. Vice versa, any oo-lattice that is complete (as a lattice) is automatically an o-algebra. In the final section of the paper we shall present several examples of oo-lattices which are not o-algebras.

Like o-algebras are always locales, so oo-lattices are always distributive.

Every oo-lattice is a distributive lattice.

This proof is essentially the finitary version of the first part of that of Proposition [\ref=prop_o-lagebras_vs_overt_locales].

By adapting the proof of Proposition [\ref=prop_o-lagebras_vs_overt_locales], it is easy to obtain the following strengthening of the previous proposition: if [formula] exists in an oo-lattice, then also [formula] exists and is equal to [formula].

Classically, the notion of oo-lattice and that of Boolean algebra coincide.

The proof is analogous to that of Proposition [\ref=prop._o-algebras_cBa's]. Given a Boolean algebra, define [formula] as [formula] and use Lemma [\ref=lemma_2] to prove density. Conversely, suppose to have an oo-lattice. By the previous Proposition, an oo-lattice is a distributive lattice. Moreover, by Lemmas [\ref=lemma_1] and [\ref=lemma_2] we get that the pseudo-complement -   is an involution. Summing up, from a classical point of view an oo-lattice is precisely a complemented distributive lattice, that is, a Boolean algebra.

Morphisms between oo-lattices

A morphism of oo-lattices from [formula], with base S, to [formula] is a map f:P  →  Q such that

[formula]

(condition 3 of Proposition [\ref=prop._char._o-morphism]), for all p:P and q:Q.

A map f is a morphism of oo-lattices if and only if

f is monotone and

[formula].

We firstly prove that each morphism f is monotone. Let p,r:P be such that p  ≤  r. We prove that f(p)  ≤  f(r) by density. Supposed T base of Q, let [formula] be such that [formula]. Then, there exists [formula] such that [formula] and [formula] ⇒   [formula]. Since p  ≤  r, then [formula]. Summing up, there exists [formula] such that [formula] and [formula] ⇒   [formula], that is, [formula].

Assume now 1 and 2. Let p:P and q:Q be such that [formula] [formula] [formula] ⇒   [formula]. We claim that [formula]. Since S is a base for P, from [formula] it follows that there exists [formula] such that [formula], hence [formula], and x  ≤  p. By monotonicity of f, we get f(x)  ≤  f(p) which, together with [formula], gives the claim.

Let f:P  →  Q be a morphism between two oo-lattices. If [formula] exists in P, then also [formula] exists and [formula] =   [formula].

We claim that [formula] is the least upper bound of the family [formula]. Clearly it is an upper bound since f is monotone. Let r be another upper bound (that is, f(pi)  ≤  r for any [formula]); we must show that [formula]. Supposed T base of Q, let [formula] be such that [formula]. Then, since f is a morphism and [formula] splits all existing joins, there exist [formula] and [formula] such that [formula] and [formula] ⇒   [formula]. In particular, [formula] (take x  ≤  pi such that [formula] and use monotonicity of f); together with f(pi)  ≤  r, this gives [formula]. The claim follows by density.

The following hold:

for every oo-lattice P, the identity function id¶:P  →  P is an oo-lattice morphism;

oo-lattice morphisms are closed under composition of functions.

(1) Let p,q:P be such that [formula]. We must show that [formula] [formula] [formula] [formula] ⇒   [formula], that is, [formula] [formula] a  ≤  q); that holds because S is a base.

(2) Let f:P  →  Q and g:Q  →  R be two oo-lattice morphisms and assume [formula]. Provided that T is a base for Q, since g is a morphism we can find an element [formula] such that [formula] and [formula] ⇒   [formula]. Since [formula] and f is a morphism, there exists [formula] (where S is a base for P) such that [formula] and [formula] ⇒   [formula]. We claim that this same element [formula] works for [formula], that is, [formula] entails [formula]. In fact, if [formula], then [formula]. Then we can find [formula] such that y  ≤  f(x) and [formula] (since T is a base) and hence [formula] (thanks to the properties of b). On the other hand g(y)  ≤  g(f(x)) because g is monotone; hence [formula].

Let OOLat be the category of oo-lattices as objects and oo-lattice morphisms as arrows.

Classically and impredicatively, a map between Boolean algebras is a morphism of oo-lattices if and only if it preserves all joins which exist in the domain.

From Proposition [\ref=consegRED] it follows that every oo-lattice morphism is a join-preserving map. Conversely, let f:B  →   be a join-preserving map between two Boolean algebras. Then f extends uniquely to a join-preserving map [formula] between the complete boolean algebras defined as the Dedekind-MacNeille completions of B and [formula], respectively (see [\cite=Joh]). It follows from Propositions [\ref=prop._CLASS:_o-morphism_=_join-preserving] and [\ref=prop._char._o-morphism] that [formula] satisfies equation ([\ref=RED]) for all p:DM(B) and q:DM() and for any base S of DM(B). In particular, ([\ref=RED]) holds for f once we note that every base S for B is also a base for DM(B).

We write Ba[formula] for the category of Boolean algebras and maps preserving all existing joins.

Classically, the categories Ba[formula] and OOLat are equivalent.

By Propositions [\ref=clasposet] and [\ref=prop._CLASS_char._oo-morphism].

Richer overlap structures

As we have seen in the previous pages, the notion of oo-lattice turns out to be classically equivalent to that of Boolean algebra; so it is a constructive version of the latter. Even if it seems the minimal structure enjoying such a property, it is by no means the only one. For instance, it is quite natural to consider also Heyting and Boolean algebras with overlap (o-Heyting and o-Boolean algebras). The idea is simply to add an overlap relation (satisfying all the axioms for [formula] listed in Definition [\ref=def._oo-lattice]) to the usual algebraic structures.

An overlap Heyting algebra (o-Ha for short) is an oo-lattice whose underlying lattice is a Heyting algebra. An overlap Boolean algebra (o-Ba for short) is an o-Ha whose underlying lattice is a Boolean algebra.

Here is an example of o-Ba (examples of other o-structures are being given below): the family of all recursive subsets of [formula] (the set of natural numbers). It works since recursive subsets are closed under union, intersection and complement; moreover, all singletons are recursive, hence density holds. Note also, that this o-Ba is an example of oo-lattice which is not an o-algebra (that is, it is not closed under arbitrary joins), otherwise all subsets of [formula] would be recursive (each subset being a union of singletons).

Classically, the notions of oo-lattice, o-Ha, o-Ba and that of Boolean algebra all coincide.

By the proof of Proposition [\ref=clasposet].

We adopt for all o-structures the same notion of morphism we used for oo-lattices.

Let [formula] be the full subcategory of [formula] whose objects are the o-Heyting algebras. We write [formula] for the full subcategory of [formula] with o-Boolean algebras as objects.

Classically, the categories Ba[formula], OOLat, OHa and OBa are all equivalent.

By Propositions [\ref=prop_class_char_o-structures] and [\ref=prop._CLASS_char._oo-morphism].

On the contrary, from a constructive point of view, the situation is completely different and can be summarized by the following picture.

[formula]

No other "implication" holds constructively, as it is shown by the following counterexamples and remarks.

Here below is an example of o-Ha which is not a Boolean algebra, constructively. Classically, this turns out to be nothing else but the Boolean algebra of finite-cofinite subsets. Let X be a set. We say that a subset K  ⊆  X is finite if either [formula] or [formula] for some [formula]. Clearly, the union of two finite subsets is finite, while the intersection is not (unless the equality of X is decidable: see [\cite=cisa2]).

For any set X, let F(X) be the sub-family of P(X) defined by the following condition (for A  ⊆  X):

[formula]

For every set X, the collection F(X) is an o-Heyting algebra, but it is neither a Boolean algebra nor an o-algebra, in general.

F(X) contains both [formula] (which is finite) and X (because X =   [formula]).

F(X) is closed under union: let A,B:F(X); if either A or B contains some cofinite subset, then so does [formula]; otherwise, there exist two finite subsets K and L such that A  ⊆   -  - K and B  ⊆   -  - L; so [formula] ⊆   [formula] ⊆   [formula].

F(X) is closed under intersection: let A,B:F(X); if either A or B is contained in some cocofinite subset, then so is [formula]; otherwise, there exist two finite subsets K and L such that - K  ⊆  A and - L  ⊆  B; so [formula].

This proves that F(X) is a sublattice of P(X). Since P(X) is an o-algebra, its overlap relation [formula], when restricted to a sublattice, automatically inherits all properties required by Definition [\ref=def._oo-lattice] but at most density. However, density holds for F(X) as well as for any other sublattice of P(X) which contains all singletons (as F(X) clearly does).

F(X) is closed under implication: let A,B:F(X); if - L  ⊆  B, then - L  ⊆  A  →  B (because B  ⊆  A  →  B); if A  ⊆   -  - K, then - K  ⊆   - A, hence - K  ⊆  A  →  B (because - A  ⊆  A  →  B); finally, if B  ⊆   -  - L and - K  ⊆  A, then [formula] =   [formula] ⊆   [formula] ⊆   - (A  →  B); hence [formula]. So A  →  B:F(X) in any case.

Thus F(X) is an o-Ha. Clearly, it is not an o-Ba, in general; for instance, [formula] need not be equal to X (unless X has a decidable equality).

Finally, F(X) is clearly not complete (it is not an o-algebra): think of X =   [formula] and consider the elements [formula], for [formula]; their union is the set of all even numbers which, of course, does not belong to [formula].

The notion of Boolean algebra seems constructively weaker than its overlap version: at least, the relation [formula] (which seems to be the only possible candidate) fails to be an overlap relation constructively. In fact, if that were the case, then every Boolean algebra would have a stable equality (by Lemma [\ref=lemma_2]). A fortiori, one cannot hope to find a general method for endowing a Heyting algebra with an overlap relation.

Finally, we give an example of oo-lattice which does not seem to be an o-Heyting algebra. Consider a pure first-order language with equality and define the smallest class of formulae which contains atomic formulae and is closed under disjunction, conjunction and negation. Given a set X, the family of all its subsets that can be obtained by comprehension on those formulae is an oo-lattice, but there seems to be no constructive way to define implication.

Conclusions and future work

In this paper we have done the following:

In the future, we aim to test whether our o-structures can be used to give a constructive version of Stone representation for (not necessarily complete) Boolean algebras and to investigate the existence of constructive join-completions for them.

Acknowledgements

We express our gratitude to Giovanni Sambin and Steve Vickers for very interesting discussions about overlap algebras and their interplay with Boolean algebras.