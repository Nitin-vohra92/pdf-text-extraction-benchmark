Corollary Lemma Problem Conjecture Algorithm Remark Remarks Example Examples Definition

Codensity and Stone spaces

Introduction

The codensity monad was first defined by Kock [\cite=kock], and afterwards applied to the ultrafilter case by Kennison and Gildenhuys [\cite=kg]. Recently, there has been a resurgent interest in the concept, following Leinster's 2013 paper [\cite=lein]. He pioneered an integration-oriented approach, which he successfully used to obtain a codensity perspective on double dual vector spaces and ultraproducts. (We shall not make use of that view here, sticking instead to Kock's original definition.) That approach is more amenable to measure-theoretic notions - Leinster's suggestion of Giry's measure space monad, for example, was later picked up by Sturtz [\cite=sturtz] and Avery [\cite=avery]. Our goal will be to exhibit codensity monads whose categories of algebras are the category of Stone spaces and that of sober spaces, respectively.

Let B be an essentially small category (i.e., its skeleton is a small category) and A be a locally small category that has all small limits. If G:B  →  A is a functor, we have an induced functor

[formula]

defined (on objects) by

[formula]

where A is an object of A and B one of B. Under our hypotheses, this functor has a right adjoint, denoted by h'G and defined on an arbitrary Y in [formula] as:

[formula]

and therefore the underlying endofunctor (of A) of the associated monad(TG,ηG,μG) is given by:

[formula]

We now explain the limit notation. We do so for the general case in [\eqref=lim]. Let J be the category whose objects are pairs (B,y) where B∈B and y∈Y(B), and so if (B,y) and (B',y') are two such objects, their Hom-set [formula] contains all morphisms φ:B  →  B' in B such that Y(φ)(y)  =  y'. We now define the functor D:J  →  A by D((B,y)) = G(B) and D(φ) = G(φ). It is of this diagram D that the limit is taken. (The limit exists because B, and therefore also J, is equivalent to a small category, and A has all small limits.)

In the particular case of the definition of TG, the objects of J are pairs (B,f) where B∈B and  f:A  →  G(B), and so if (B,f) and (B',f') are two such objects, [formula] contains all morphisms φ:B  →  B' in B such that [formula]. In other words, J is the comma category given by the constant functor !A (from the terminal category) and our functor G. The functor D is constructed similarly. (The projections will be denoted simply by πf, as any f contains the information necessary for recovering the corresponding B.)

The way that TG acts on morphisms is an immediate application of the limit's universal property: if φ:X  →  Y is a morphism of A, TG(φ) is the unique arrow such that for every (B,f)∈J, the following equation holds:

[formula]

We now turn to the unit and multiplication of the monad. The object A with the canonical morphisms f:A  →  D((B,f)) forms an obvious cone for D, and so we can define ηGA as the unique morphism such that for all (B,f), we have [formula]. Similarly, μGA:TG(TG(A))  →  TG(A) must satisfy the equations [formula] (the last projection arising from the second application of the functor TG). The components of the natural transformations have therefore been given.

This monad is called the codensity monad of G (an immediate corollary is that, whenever G has a left adjoint, the codensity monad of G is precisely the monad corresponding to that adjunction). In the case where the adjoint h'G above does not exist (i.e., the assumptions about the categories A and B are weaker), we notice that the monad can still be defined using just the limit, if its existence can be ensured: the monad laws are immediate consequences of the equations above. (The monad in Section [\ref=sec:sober] will be defined in this way. There are also other options available, see [\cite=leincat].) If the unit of the monad is an isomorphism (or, equivalently, if hG is fully faithful), the functor G is said to be codense.

The result by Kennison and Gildenhuys [\cite=kg], referenced by Leinster [\cite=lein], says that the codensity monad of the inclusion functor [formula] has as its underlying functor the ultrafilter functor U, defined on a set A as:

[formula]

where P(A) is the powerset of A.

In Section [\ref=sec:stone], we see what happens when we replace [formula] by [formula], the category of all topological spaces - namely, the image of the corresponding monad is the category of Stone spaces. In Section [\ref=sec:inter], we motivate the definition of a sober space and the construction of another subcategory of [formula]. In Section [\ref=sec:sober], we prove the codensity link between the two.

A monad (T,η,μ) on a category C is called idempotent if its counit μ is a natural isomorphism. In that case, it follows by the monad unit law that for any object X of C, we have that μX  =  (ηT(X))- 1  =  (T(ηX))- 1. Also, by [\cite=Bor2], the forgetful functor U:CT  →  C is full and faithful, therefore it induces an isomorphism between its essential image and CT. We show that this essential image equals the essential image of T. Firstly, let (A,α:T(A)  →  A) be a T-algebra. By [\cite=Bor2], A is isomorphic to T(A) and hence it is in the essential image of T. Conversely, we take an object X of C and we seek to prove that (T(X),μX:T2(X)  →  T(X)) is a T-algebra. From the fact that μX  =  (ηT(X))- 1 it follows that [formula], i.e. the first algebra law. In addition, μT(X)  =  (T(ηT(X)))- 1  =  T(η- 1T(X))  =  T(μX), so [formula], i.e. the second algebra law. We have shown that CT is equivalent to the essential image of T. Since in the sequel we shall compute essential images of idempotent codensity monads, we shall also obtain characterizations of their categories of algebras.

We note that these results can be obtained in a shorter way, using previously obtained results. This alternate proof, pointed out by an anonymous reviewer, is sketched out in Section [\ref=sec:alter]. However, we feel that a detailed computation can shed some light on some subtle issues invoked, directly or indirectly, in both arguments.

The case of Stone spaces

From now on, we will focus on the codensity monad of the inclusion functor [formula], and as the class of objects of [formula]'s skeleton is [formula] and [formula] has all small limits, we are under the strict hypotheses considered so far.

Let us review some general theory. The clopen sets of a topological space have the structure of a Boolean algebra, and this gives a functor [formula]. In the other direction, the set of ultrafilters of a Boolean algebra B can be enriched with a natural topology. A basis for that topology is, for example, composed of the sets Dx  =  {U|x∈U}, for every x∈B. This space is compact, Hausdorff, and has a basis of clopen sets (since [formula] is the complement of Dx), and therefore a Stone space. We have obtained another functor [formula]. For every Boolean algebra B, CS(B) is isomorphic to B (this, and what follows, is part of Stone duality). Note that SC is an endofunctor of [formula], which acts on morphisms f:X  →  Y as (for any ultrafilter U):

[formula]

Also, every space X is equipped with a map ηX:X  →  SC(X), defined by:

[formula]

and if X is already a Stone space, ηX is an isomorphism (all these maps are the components of a natural transformation η). All these basic facts can be found, for example, in the book of Bell and Slomson [\cite=bellslom], along with their proofs.

Another result that we shall need is the following lemma, a slight variant of one of Galvin and Horn [\cite=gh].

We do only the hard direction, i.e. (ii)  ⇒  (i).

By writing 1 as [formula], it is clear that 1∈U and 0∉U.

Now, for x∈B, by writing 1 as [formula], we see that exactly one of x and [formula] is in U.

Then, we show that if x∈U and x  ≤  y then y∈U. We write 1 as [formula], and since x∈U, [formula], and so, by Step 2, y∈U.

Finally, we prove that if x and y are in U, [formula] is in U. We firstly write 1 as [formula], and so, because y∈U, [formula] in not in U. Then, [formula], and the first and the last are not in U, hence [formula].

So U is an ultrafilter.

It is clear that this lemma holds for any finite set of at least three elements of B. (The easy, (ii)  ⇒  (i) direction, also holds for less than three elements.)

The main result of this section is the following:

We begin by computing the endofunctor component, i.e. to show that:

[formula]

Firstly, we define, for every such f:X  →  B, the map ψf:SC(X)  →  B by:

[formula]

for every and U∈SC(X) and b∈B (these maps will be the projections). Since U is an ultrafilter, by the generalized variant of Lemma [\ref=lgh], there is a single b with this property and so the map is well-defined. It is also continuous, because for every b, we have:

[formula]

We claim that (SC(X),{ψf}f:X  →  B) is the required universal cone. First we show that it is a cone, i.e. that for every f:X  →  B as above and every map of finite sets φ:B  →  B', the following equation holds:

[formula]

For every x∈X and b∈B, if f(x) = b then [formula]. So, for any b, [formula]. We infer that if f- 1(b) is in an ultrafilter U, also [formula] is in U; in other words, if ψf(U) = b then [formula]. Hence the equation.

Universality means that for an arbitrary cone (M,{ψ'f}f:X  →  B) there exists a unique α:M  →  SC(X) such that for every f, we have that:

[formula]

We shall make use of characteristic functions. We denote by Ω the set {0,1}. If X is a topological space and A∈C(X), the characteristic function of A, χA:X  →  Ω, is continuous.

The existence of α will be proven first. We define it as:

[formula]

for every m∈M. There must be shown: i) that it is well-defined, i.e. that α(m) is an ultrafilter for every m; ii) that it is continuous; and iii) that it commutes with the projections.

To prove (i), the following equation is useful:

[formula]

as it trivially holds for any f, b as above. Now we can derive the following equivalences:

[formula]

Let Ω' be the set {0,1,2}. To show that α(m) is an ultrafilter in C(X), we firstly write X as a partition of three (disjoint) clopen sets X0,X1,X2. Let f:X  →  Ω' be such that f(x) = i if and only if a∈Xi. By the earlier equivalences, we have that:

[formula]

so there is exactly one i, namely ψ'f(m), such that Xi∈α(m). By Lemma [\ref=lgh], α(m) is an ultrafilter for every m, i.e. (i).

Because of that, we can apply ψf to α(m), and by using the definition of ψf on the tautology ψf(α(m)) = ψf(α(m)), we obtain f- 1(ψf(α(m)))∈α(m), and, therefore, by using again the earlier equivalences, we have that ψ'f(m) = ψf(α(m)). This takes care of (iii).

What remains is continuity, i.e. (ii). It is sufficient to show that the inverse image of a basic clopen set is open. Let A∈C(X). We have:

[formula]

which is clearly open, since the ψ'f's are continuous. Therefore, our α is valid and we have shown existence.

The uniqueness part is easy. If a valid β commutes with the projections, then:

[formula]

so, by extensionality, β  =  α.

To show that the codensity monad acts the same as SC on morphisms, we must prove that for every [formula] and every g:Y  →  B with [formula], we have that:

[formula]

But, if b∈B and U∈SC(X):

[formula]

Now we turn to the other monadic components. For the unit, as stated in the introduction, we must prove the validity of the equation:

[formula]

for every map f from X into a finite set B. But since x∈f- 1(f(x)), for every x∈X, by the definition of ηX we have that:

[formula]

and so, using the property of ψf:

[formula]

For the multiplication, the corresponding equation is:

[formula]

But that is equivalent, according to how we defined μX, to:

[formula]

which is a special case of the unit equation and so we have also taken care of the μ transformation.

The monad laws naturally hold, as it has been pointed out in the Introduction. Hence, the theorem has been proven.

The category of algebras for this codensity monad is equivalent to the category of Stone spaces.

By the theorem, we have that the essential image of this codensity monad is the category of Stone spaces. Since μX was defined as (ηSC(X))- 1, we have that μ is a natural isomorphism and therefore the monad is idempotent. By the argument in the Introduction, its essential image is equivalent to its category of algebras.

Interlude

The results just obtained can also be given the following interpretation: maps into finite sets are in a close correspondence with the Boolean algebra of clopen sets of a space, and Stone spaces are exactly the spaces that do not “contain” more information than that already contained in their algebras of clopen sets.

We can ask the natural follow-up question: what spaces are the ones determined by their lattices of open sets? This, and how we can formulate it by using codensity, is the problem that we tackle in the sequel. To begin with, let us remark that the lattice of open sets of a space is of the following special kind.

We can organize frames as a category [formula], taking a frame homomorphism to be a monotone function that preserves these finite infima and arbitrary suprema. We denote by O the (contravariant) functor that maps a topological space to its frame of opens and acts on morphisms by pre-image. (The essential image of O is the category of topological frames.)

There is also an analogue of ultrafilters for frames.

A topology on the set of points of a frame can be given by taking the open sets to be the sets of the form [formula]. This gives another contravariant functor, [formula], from frames to topological spaces (which also acts on morphisms by pre-image). The resulting endofunctor of [formula], [formula], acts on morphisms f:X  →  Y by (for an arbitrary [formula]):

[formula]

and is also endowed with a natural “unit” transformation η, such that for every space X, [formula] is given by:

[formula]

It is easy to check that this defines a well-defined continuous map of topological spaces. We can then simply define sober spaces as those spaces X for which this ηX is an isomorphism - in other words, spaces completely “determined” by their open sets. In addition, for every space X, [formula] is sober and is called the soberification of X. (A standard reference for these, and more, facts on sober spaces is Johnstone [\cite=johnst].) We note that we shall frequently recycle notations introduced in Section [\ref=sec:stone], like in the case of this η, if their purpose is similar enough.

What is left to do in order to state our result is to find a subcategory of [formula] which plays a role towards sober spaces like [formula] does towards Stone spaces. From the way Lemma [\ref=lgh] was used in Section [\ref=sec:stone], we can derive that the use of [formula] was directly tied to the fact that ultrafilters are characterized by their behavior on finite families of disjoint elements of their Boolean algebra, which are finite families of disjoint opens in the corresponding Stone space (which are necessarily clopens by finiteness and disjointness). Condition (v) in the definition of a completely prime filter suggests that the analogue in this case will be families of not necessarily disjoint opens, indexed by arbitrary sets I. In other words, for every set I, a space must be found that “represents” I-indexed families of opens. The category of these spaces will be the analogue of [formula].

Take a set I and topologize the set P(I) (the powerset of I) as follows: for every finite F  ⊆  I, define UF as the set {A  ⊆  I|F  ⊆  A}. As [formula] and [formula], these sets form a basis for a topology on P(I). If we fix a space X, then for every I-indexed family of opens in X, {Ai}i∈I, we can define a continuous map f:X  →  P(I), where P(I) is considered together with the topology that we just defined, by putting f(x) = {i∈I|x∈Ai}. It can be easily seen that this correspondence between I-indexed families of open sets of X and continuous maps to P(I) is well-defined and bijective, hence fulfilling the informal objective mentioned above. (We omit the proof of this bijection, as we shall not use it explicitly.)

A more conceptual way of presenting the model spaces in the last paragraph is as follows. When I is a singleton, let's say I = {t}, then [formula], with the above topology has {{t}} as its single non-trivial open set. This space is called the Sierpiski space and we denote it by [formula]. Given that maps from an arbitrary space X to this spaces parametrize, by the discussion above, single open sets in X, we have that maps to powers [formula] of the Sierpiski space will parametrize, by the universal property of the product, exactly I-indexed families of open sets of X. These powers [formula] are therefore, by the Yoneda lemma, homeomorphic to the P(I)'s constructed in the last paragraph.

The case of sober spaces

From now on, we denote by N the full subcategory of [formula] containing exactly the P(I) spaces constructed above, i.e. the arbitrary powers of the Sierpiski space (which are incidentally sober, but this fact is not needed for the proof below). We can now state the precise analogue of the result for Stone spaces in this new framework:

As before, we first need to show:

[formula]

i.e. to give that space the structure of a universal cone (where P(I) is considered as above, being an object of N). For every f:X  →  P(I), we define the map [formula] by the (extensional) condition:

[formula]

for every i∈I and [formula]. We check the continuity on the opens which belong to the basis (F is an arbitrary finite subset of I):

[formula]

which is open. We claim that [formula] is a universal cone over that diagram. Let us first check the cone condition, i.e. that for every f:X  →  P(I) and every continuous φ:P(I)  →  P(J) we have:

[formula]

To show that, we first prove the claim that for every [formula] and every open set D of P(I):

[formula]

Since the UF's form a basis, we can write D as [formula] where K is a possibly infinite set and for each a∈K, Fa is a finite subset of I. Therefore:

[formula]

Now, for every [formula] and every i∈I:

[formula]

and so the cone condition is valid.

For showing universality, let (M,{ψ'f}f:X  →  P(I)) be an arbitrary cone. We must show the existence of a unique [formula] such that for every f, we have that:

[formula]

Fix an arbitrary three-element set T and denote its distinct elements by t, z1, z2. We first define a new flavour of characteristic functions, by using the space P({t})∈N. More precisely, if X is a space and A∈O(X), the function χA:X  →  P({t}), defined by the rule:

[formula]

is continuous. We can now define the α on every m∈M by:

[formula]

for every A∈O(X).

Let us prove that this map is well defined, i.e. that α(m) is a completely prime filter in O(X) for every m. We begin by showing condition (iii) in the definition. Let A1,A2∈α(m). We define the auxiliary maps χ:X  →  P({z1,z2}), χ1,χ2:P({z1,z2})  →  P({t}) by:

[formula]

and

[formula]

for every i∈{1,2},x∈X,A  ⊆  {z1,z2}. In addition, we define χ3:P({z1,z2})  →  P({t}) by:

[formula]

These maps are all continuous and satisfy:

[formula]

for every i∈{1,2} and

[formula]

By the cone condition for M, the following equations also hold:

[formula]

for every i∈{1,2} and

[formula]

Since Ai∈α(m), ψ'χAi(m) = {t}, so χi(ψ'χ(m)) = {t}. By the equations above, z1,z2∈ψ'χ(m), so ψ'χ(m) = {z1,z2} and χ3(ψ'χ(m)) = {t}, that is, [formula]. We have, therefore, that [formula].

For showing condition (iv), we take suitable A1 and A2 and maintain the maps χ and χ1 defined above. We define the continuous mapping χ4:P({z1,z2})  →  P({t}) by:

[formula]

so we have that

[formula]

and

[formula]

Since A1∈α(m), ψ'χA1(m) = {t}, so χ1(ψ'χ(m)) = {t}. Then z1∈ψ'χ(m), so [formula] and χ4(ψ'χ(m)) = {t}. Thus [formula] and [formula].

For showing condition (v), let {Ai}i∈I be a family of open sets of X such that [formula]. We define a continuous map ρ:X  →  P(I) by

[formula]

a continuous map ρ':P(I)  →  P({t}) by

[formula]

and for each i∈I a continuous map ρi:P(I)  →  P({t}) by

[formula]

These maps satisfy (for each i∈I):

[formula]

and

[formula]

By using the cone conditions as before, we obtain that ρ'(ψ'ρ(m)) = {t}, hence ψ'ρ(m) is nonempty. Then there exists i∈I such that i∈ψ'ρ(m) and by similar manipulations we obtain that Ai∈α(m).

Condition (ii) can easily be seen as the special case [formula] of condition (v). For condition (i), denote by [formula] the unique such continuous mapping ([formula] being a terminal object in [formula]) and by [formula] the unique continuous mapping such that [formula]. Then [formula], so [formula]. Since only {t} is in the image of τ', we get that ψ'χX(m) = {t} and therefore that X∈α(m).

We have now shown that α(m) is a completely prime filter, so α is well defined.

To show that α is continuous, we take an open set A* of [formula]. Then:

[formula]

which is open, since the ψ'f's are continuous.

To finish up showing the existence of α, we must show that the α we constructed commutes with the projections, i.e. that for every valid f:X  →  P(I) and every m∈M we have that:

[formula]

We first prove that for any open D of P(I):

[formula]

Let x∈X arbitrary. Then:

[formula]

Let now i∈I be arbitrary. Then:

[formula]

To show uniqueness, let [formula] be a continuous map that commutes with the projections - in particular, for every m∈M and every open set A of X we have that:

[formula]

Then we can deduce:

[formula]

Now we will show that [formula] acts on morphisms in the same way that a codensity monad would, i.e. that for every [formula] and every g:Y  →  P(I) we have that:

[formula]

For every i∈I and [formula], we can deduce:

[formula]

To show that the η from earlier really is a unit, i.e. that for any g:X  →  P(I) we have [formula], we do the following deductions for any x∈X and i∈I:

[formula]

To show that the μ defined earlier is the multiplication component, considering its form, we must really show that for any g:X  →  P(I) we have that [formula]. But that is a special case of the unit equation.

We are now finished.

The category of algebras for this codensity monad is equivalent to the category of sober spaces.

By the theorem, we have that the essential image of this codensity monad is the category of Stone spaces. Since μX was defined as [formula], we have that μ is a natural isomorphism and therefore the monad is idempotent. By the argument in the Introduction, its essential image is equivalent to its category of algebras.

An alternate proof

We finally present the announced easier argument one can use to obtain the results above, as suggested by an anonymous reviewer. We can use the fact that that if h:B  →  A is a codense functor, and i:A  →  A0 is a reflective subcategory, then the codensity monad for [formula] is the idempotent monad given by the reflection, or equivalently, the essential image of the codensity monad for [formula] is the subcategory A. This happens because (taking F to be the left adjoint of i) for any object A of A0:

[formula]

Here we take A0 to be [formula] and A to be successively the category of Stone spaces and that of sober spaces. As we mentioned before, those two categories are indeed reflective subcategories of [formula]. It remains to be proven that the two functors which take finite sets into Stone spaces and N into sober spaces are codense. In the second case, restricting the well-known duality of sober spaces to topological frames (see [\cite=johnst]), the powers of the Sierpiski space correspond to free frames (see [\cite=eleph]). Similarly, in the first case, we can see that the finite sets correspond by duality to finite Boolean algebras. So it suffices to prove that the inclusions of finite Boolean algebras into [formula] and that of the free frames into topological frames are dense (a notion dual to codensity). For the first one, we use the fact that [formula] is a finitarily algebraic category over [formula], so the finitely generated free algebras - and therefore the finite algebras which contain them - are dense in [formula] (a reference for this fact is [\cite=isbell]). Similarly, by [\cite=johnst], the category of frames is monadic over [formula] - therefore the free frames form its corresponding Kleisli subcategory. By [\cite=day], this subcategory is dense. The proof is finished.

Conclusions and future work

This paper, in the spirit of Leinster's before it, shows that concepts like Stone spaces or sober spaces are “inevitable” - that is, they arise naturally by inputting “ordinary” mathematical notions such as finite sets or topological spaces into some standard categorial machinery. It remains to be seen whether the same technique can be applied in other contexts, where conceptual arguments do not necessarily transfer - for example, categories of ringed or ordered spaces.

Acknowledgements

I would like to thank the anonymous reviewer for pointing out the alternate proof I outlined earlier.

This work was supported by a grant of the Romanian National Authority for Scientific Research, CNCS - UEFISCDI, project number PN-II-ID-PCE-2011-3-0383.