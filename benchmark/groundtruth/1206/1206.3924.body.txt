Recommendation systems in the scope of opinion formation: a model

Introduction

This is the information age. We are witnessing information production and consumption in a speed never seen before. The WEB2.0 paradigm enables consumers and producers to exchange data in a collaborative way benefiting both parties. However, one of the key challenges in our digitally-driven society is information overload [\cite=berg10]. We have the 'pain of choice'. Recommendation systems represent a possible solution to this problem. They have emerged as a research area on its own in the 90s [\cite=Res97] [\cite=gold92] [\cite=KoMi97] [\cite=GoSc99] [\cite=BrHe98]. The interest in recommendation systems increased steadily in recent years, and attracted researchers from different fields [\cite=recsyshand]. The success of highly rated Internet sites as Amazon, Netflix, YouTube, Yahoo, Last.fm and others is to a large extent based on their recommender engines. Corresponding applications recommend everything from CD/DVD's, movies, jokes, books, web sites to more complex items such as financial services.

The most popular techniques related to recommendation systems are collaborative filtering [\cite=BiPa98] [\cite=GoRo01] [\cite=BrHe98] [\cite=HeKo04] [\cite=KoMi97] [\cite=GoSc99] [\cite=ReIa94] [\cite=SaKa01] and content-based filtering [\cite=ClGo99] [\cite=Pa07] [\cite=MeMo02] [\cite=bal97] [\cite=lin03]. In addition, researchers developed alternative methods inspired by fields as diverse as machine learning, graph theory, and physics [\cite=fou07a] [\cite=fou07b] [\cite=mir03] [\cite=zhou07] [\cite=ZhBlYk07] [\cite=Blattner10] [\cite=web01] [\cite=zha02]. Furthermore, recommendation systems have been investigated in connection with trust [\cite=and08] [\cite=don05] [\cite=wal08] [\cite=mas04] [\cite=mas04b] and personalized web search [\cite=bir05] [\cite=bru07] [\cite=sug04], which constitutes the new research frontier in search engines.

However, there are still many open challenges in the research field of recommendation systems [\cite=AdTu05] [\cite=guy10] [\cite=jan09] [\cite=gey10] [\cite=HeKo04] [\cite=recsyshand] [\cite=dra10]. One key question is connected to the understanding of the user rating mechanism. We build on a well documented influence of social interactions with peers on the decision to vote, favor, or even purchase an item [\cite=rich88] [\cite=kim07]. We propose a model inspired by opinion formation taking place on a complex network with a predefined topology. Our model is able to generate data observed in real world recommender systems. Despite its simplicity, the model is flexible enough to generate a wide range of different patterns. We mathematically analyze the model using a mean field approach to the full Master Equation. Our approach provides an understanding of the data in recommender systems as a product of social processes. The model can serve as a data generator which is valuable for testing and evaluation purposes for recommender systems.

The rest of the paper is organized as follows. The model is outlined in Sec. ([\ref=sec:model]). Methods, data set descriptions, and validation procedures are in Sec. ([\ref=sec:methods]). Results are presented in Sec. ([\ref=sec:results]). Discussion and an outlook for future research directions are in Sec. ([\ref=sec:discussion]).

Model

Motivation

Our daily decisions are heavily influenced by various information channels: advertisement, broadcastings, social interactions, and many others. Social ties (word-of-mouth) play a pivotal role in consumers buying decisions [\cite=rich88] [\cite=kim07]. It was demonstrated by many researchers that personal communication and informal information exchange not only influence purchase decisions and opinions, but shape our expectations of a product or service [\cite=wh54] [\cite=arndt67] [\cite=and03]. On the other hand, it was shown [\cite=henn04], that social benefits are a major motivation to participate on opinion platforms. If somebody is influenced by recommendations on an opinion platform like MovieLens or Amazon, social interactions and word-of-mouth in general are additional forces governing the decision making process to purchase or even to rate an object in a particular way [\cite=mas09].

Our model is formulated within an opinion formation framework where social ties play a major role. We shall discuss the following main ingredients of our model:

Influence-Network (IN)

Intrinsic-Item-Anticipation (IIA)

Influence-Dynamics (ID)

Influence Network

We call the network where context-relevant information exchange takes place an Influence-Network (IN). Nodes of the IN are people and connections between nodes indicate the influence among them. Note that we put no constraints on the nature of how these connections are realized. They may be purely virtual (over the Internet) or based on physical meetings. We emphasize that INs are domain dependent, i.e., for a given community of users, the Influence Network concerning books may differ greatly (in topology, number of ties, tie strength, etc.) from that concerning another subject such as food or movies. Indeed, one person's opinion leaders (relevant peers) concerning books may be very different from those for food or other subjects. In this scope, we see the INs as domain-restricted views on social networks. It is thus reasonable to assume that Influence Networks are similar to social interaction networks which often exhibit a scale-free topology [\cite=bar08]. However, our model is not restricted to a particular network structure.

Intrinsic-Item-Anticipation

Suppose a new product is launched on the market. Advertisement, marketing campaigns, and other efforts to attract customers predate the launching process and continue after the product started to spread on the market. These efforts influence product-dependent customer anticipation. It is clear that the resulting anticipation is a complex combination of many different components including intrinsic product quality and possibly also suggestions from recommendation systems.

In our model we call the above-described anticipation Intrinsic-Item-Anticipation (IIA) and measure it by a single number. It is based on many external sources, except for the influence generated by social interactions. It is the opinion on something taken by individuals, before they start to discuss the subject with their peers. Furthermore, we assume that an individual will invest resources (time/money) into an object only, if the Intrinsic-Item-Anticipation is above a particular threshold, which we call Critical-Anticipation-Threshold.

Influence-Dynamics

The Influence-Dynamics describes how individuals' Intrinsic-Item-Anticipations are altered by information exchange via the connections of the corresponding Influence-Network. From our model's point of view this means the following: an individual's IIA for a particular item i may be shifted due to social interactions with directly connected peers (these interactions thus take place on the corresponding IN), who already experienced the product or service in question. This process can shift the Intrinsic-Item-Anticipation of an individual who did not yet experience product/object i closer to or beyond the critical-anticipation-threshold.

We now summarize the basic ingredients of our model. An individual user's opinions on objects are assembled in two consecutive stages: i) opinion making based on different external sources, including suggestions by recommendation systems and ii) opinion making based on social interactions in the Influence-Network. The second process may shift the opinions generated by the first process.

Mathematical formulation of the model

In this section we firstly describe how individuals' Intrinsic-Item-Anticipations may change due to social interactions taking place on a particular Influence-Network. Secondly, we introduce dynamical processes governing the opinion propagation.

IIA shift

We model a possible shift in the IIA as:

[formula]

where ij is the shifted Intrinsic-Item-Anticipation of individual j for object i, fij is the unbiased IIA, Θj is the number of j's neighbors, who already experienced and liked item i, kj denotes the total number of j's neighbors in the corresponding IN, and γ∈(0,1) quantifies trust of individuals to their peers. An individual j will consume, purchase, or positively rate an item i only if

[formula]

We identify Δ as the Critical-Anticipation-Threshold. Values of fij are drawn from a probability distribution fi. Since the IIA for each individual is an aggregate of many different and largely independent contributions, we assume that fi is normally distributed, fi∈N(μi,σ). (Unless stated otherwise.) To mimic different item anticipations for different objects i, we draw the mean μi from a uniform distribution U( - ε,ε). We maintain μi, ε, and σ, so that fi is roughly bounded by ( - 1,1), i.e., - 1  ≤  μ  -  3σ  <  μ  +  3σ  ≤  1. Note that ij can exceed these boundaries after a shift of the corresponding IIA occurs. The second term on the right hand side of Eq. ([\ref=equ:iia1]) is the influence of j's neighborhood weighted by trust γ. To better understand the interplay between γ and the density of attending users in the neighborhood of user i, ρ: = Θj / kj, we refer to Fig. [\ref=fig:conplot1]. Trust γ  ≈  1 causes a big shift on the IIA's even for ρ  ≈  0. On the other hand, γ  ≈  0 needs high ρ to yield a significant IAA shift. These properties are understood as follows: people trusting strongly in their peers need only few positive opinions to be convinced, whereas people trusting less in their social environment need considerable more signals to be influenced.

Influence-Dynamics

The Influence-Dynamics proceeds as follows. Firstly, we draw an Influence-Network IN(P) with a fixed network topology (power-law, Erds-Rényi, or another). P refers to a set of appropriate parameters for the Influence-Network in question (like network type, number of nodes, etc.). The network's topology is not affected by the dynamical processes (opinion propagation) taking place on it. We justify this static scenario by assuming that the time scale of the topology change is much longer then the time scale of opinion spreading in the network. Each node in the Influence-Network corresponds to an individual. For each individual j we draw an unbiased Intrinsic-Item-Anticipation fij from the predefined probability distribution fi. At each time step, every individual is in one of the following states: {S,A,D}. S refers to a susceptible state and corresponds to the initial state for all nodes at t = 0. A refers to an attender state and corresponds to an individual with the property ij  ≥  Δ. D refers to a denier state with the property ij  <  Δ after an information exchange with his/her peers in the Influence-Network happened. An individual in state D or A can not change his/her state anymore. It is clear that an individual in state A cannot back transform to the susceptible state S, since he/she did consume or favor item i and we do not account for multiple attendances in our model. An individual in state D was influenced but not convinced by his opinion leaders (directed connected peers). We make the following assumption here: if individual j's opinion leaders are not able to convince individual j, meaning that individual's j Intrinsic Item Anticipation ij stays below the critical threshold Δ after the influence process, then we assume that j's opinion not to attend object i remains unchanged in the future. Therefore we have the following possible transitions for each node in the influence network: jS  →  jA or jS  →  jD. Node states are updated asynchronously which is more realistic than synchronous updating, especially in social interaction models [\cite=car08]. The Influence-Dynamics is summarized in Algorithm [\ref=recsysmodbas].

Master Equation

We are now in the position to formulate the Master Equation for the dynamics. As already said before, two things can happen when a non-attender is connected to an attender: a) he/she becomes an attender too, or b) he/she becomes a denier who will not attend/favor the item. For these two interaction types we formally write:

[formula]

Here λ denotes the probability that a susceptible node connected to an attender becomes an attender too, and α is the probability that a susceptible node attached to an attender becomes a denier. To take into account the underlying network topology of the Influence Network it is common to introduce compartments k [\cite=gle11]. Let NAk be the number of nodes in state A with k connections, NSk the number of nodes in state S with k connections, and NDk the number of nodes in state D with k connections, respectively. Furthermore we define the corresponding densities: ak(t) = NAk / Nk, sk(t) = NSk / Nk and dk(t) = NDk / Nk. Nk is the total number of nodes with k connections in the network. Since every node from Nk must be in one of the three states, [formula]. A weighted sum over all k compartments gives the total fraction of attenders at time t, [formula] where P(k) is the degree distribution of the network (it also holds that a(t) = NA(t) / N). The time dependence of our state variables ak(t),dk(t),sk(t) is

[formula]

where Ω is the density of attenders in the neighborhood of susceptible node with k connections averaged over k

[formula]

where [formula] denotes the mean degree of the network. As outlined above, λ is the probability that a node in state S transforms to state A if it is connected to a node in state A. This happens when ij  >  Δ. Therefore, we have Δ-  <  fij  <  Δ where Δ-  =  Δ  -  (1 / k)1 - γ. From this we have [formula], where f(x) is the expectation distribution. Similarly we write for [formula], where l denotes the lower bound of the expectation distribution f(x). A crude mean field approximation can be obtained by multiplying the right hand sides of Eq. ([\ref=eq:mas1]) with P(k) and summing over k, which yields a set of differential equations

[formula]

which is later used to obtain analytical results for the attendance fraction a(t).

Methods

We describe here our simulation procedures, datasets, experiments, and analytical methods.

Simulations

Our simulations employ Alg. ([\ref=recsysmodbas]). As outlined in the model section, we do not change the network topology during the dynamical processes. We experiment with two different network types, Erds-Rényi (ER), and power law (PL) which are both generated by a so-called configuration model [\cite=new1]. ER and PL represent two fundamentally different classes of networks. The former is characterized by a typical degree scale (mean degree of the network), whereas the latter exhibits a fat-tailed degree distribution which is scale free. The networks are random and have no degree correlations and no particular community structure. To obtain representative results we stick to the following approach: we fix the network type, number of nodes, number of objects, and network type relevant parameters to draw an ER or PL network. We call this a configuration P. In addition, we fix the variance σ of the anticipation distributions fi. We perform each simulation on 50 different networks belonging to the same configuration P and on each network we simulate the dynamics 50 times. Then we average the obtained attendance distributions over all 2500 simulations.

Datasets

To show the validity of our model we use real world recommender datasets. MovieLens (movielens.umn.edu), a web service from GroupLens (grouplens.org) where ratings are recorded on a five stars scale. The data set contains 1682 movies and 943 users. Only 6,5% of possible votes are expressed. Netflix data set (netflix.com). We use the Netflix grand prize data set which contains 480189 users and 17770 movies and also uses a five stars scale. Lastfm data set (Lastfm.com). This data set contains social networking, tagging, and music artist listening information from users of the Last.fm online music system. There are 1892 users, 17632 artists, and 92834 user-listended artists relations in total. In addition, the data set contains 12717 bi-directional user friendship relations. These data sets are chosen because they exhibit very different attendance distributions and thus provide an excellent playground to validate our model in different settings.

Experiments

Data topologies. We firstly investigate the simulated attendance distributions as a function of trust γ, the anticipation threshold Δ, and the network topology. For this purpose we simulate the dynamics on a toy network with 500 nodes and record the final attendance number of 300 objects. The simulation is conducted for ER and PL networks and performed as outlined in the simulations paragraph above. In Fig.([\ref=fig:skew_heatmap_er]) and Fig.([\ref=fig:skew_heatmap_pw]) we investigate the skewness [\cite=zwi00] of the attendance distributions and the maximal attendance obtained for the corresponding parameter settings. The skewness of a distribution is a measure for the asymmetry around its mean value. A positive skewness value means that there is more weight to the left from the mean, whereas a negative value indicates more weight in the right from the mean.

Fitting real data. We explore the model's ability to fit real world recommendation attendance distributions found in the described data sets. For this purpose we fix for the Netflix data set a network with 480189 nodes and perform a simulation for 17770 objects. In the MovieLens case we do the same for 943 nodes and 1682 objects and for the Lastfm data set we simulate on a network with 1892 nodes and 17632 objects. In the case of Lastfm we have the social network data as well. We validate our model on that data set by two experiments: a) we use the provided user friendship network as simulation input and fit the attendance distribution and b) we fit the attendance distribution like in the MovieLens and Netflix case with an artificially generated network.

Mathematical analysis. We investigate the Master Equations Eq. ([\ref=eq:mas1]) and Eq. ([\ref=eq:mas2]). We provide a full analytical solution for Eq. ([\ref=eq:mas2]) and an analytical approximation for Eq. ([\ref=eq:mas1]) in the early spreading stage.

Results

Data topologies. The landscape of attendance distributions of our model is demonstrated in Fig. ([\ref=fig:skew_heatmap_er]) and Fig. ([\ref=fig:skew_heatmap_pw]). To obtain these results, simulations were performed as described in Sec. ([\ref=sec:methods]). The item anticipation fi was drawn from a normal distribution with mean values μi∈U( - 0.1,0.1) and variance σ = 0.25 fixed for all items. Both networks have 500 nodes. In the Erds-Rényi case, we used a wiring probability p = 0.03 between nodes. The Power Law network was drawn with an exponent δ  =  2.25. The simulated attendance distributions in Fig.([\ref=fig:skew_heatmap_er]) and Fig.([\ref=fig:skew_heatmap_pw]) show a wide range of different patterns for both ER and PL Influence-Networks. In particular, both network types can serve as a basis for attendance distributions with both positive and negative skewness. Therefore, the observed fat-tailed distributions are not a result of the heterogeneity of a scale free network but they are emergent properties of the dynamics produced by our model. The parameter region for highly positively-skewed distributions is the same for both network types. The parameters γ and Δ can be tuned so that all items are attended by everybody or all items are attended by nobody. While not relevant for simulating realistic attendance distributions, these extreme cases help to understand the model's flexibility.

Fitting real data We fit real world recommender data from MovieLens, Netflix and Lastfm with results reported in Fig. ([\ref=fig:fit_movielens]), Fig. ([\ref=fig:fit_netflix]), Fig. ([\ref=fig:fit_lastfm]), Fig. ([\ref=fig:fit_lastfm_net]), and Tab. ([\ref=tbl:results1]), respectively. The real and simulated distributions are compared using Kullback-Leibler (KL) divergence [\cite=kull51]. We report the mean, median, maximum, and minimum of the simulated and real attendance distributions. Trust γ, anticipation threshold Δ, and anticipation distribution variance σ are reported in figure captions. We also compare the averaged mean degree, maximum degree, minimum degree, and clustering coefficient of the real Lastfm social network and networks obtained to fit the data. Results are reported in Tab. ([\ref=tbl:Lastfmres]) and Fig. ([\ref=fig:netLastfm]). Note that thus obtained parameter values can be useful also in real applications where, assuming that our social opinion formation model is valid, one could detect decline of the overall trust value in an online community, for example.

Mathematical analysis. Eq. ([\ref=eq:mas2]) can be solved analytically. We have [formula] with the initial conditions for the first movers [formula], s(0)  =  1  -  a(0), and d(0) = 0. In the following we use the bra-ket notation [formula] to represent the average of a quantity x. Standard methods can now be used to arrive at

[formula]

Here τ is the time scale of the propagation which is defined as

[formula]

This is similar to the time scale [formula] in the well known SI Model [\cite=new02] [\cite=bar08]. Eq.([\ref=eq:an1]) can be very useful in predicting the average behavior of users in a recommender system.

Since Eq. ([\ref=eq:mas1]) is not accessible to a full analytical solution, we investigate it for the early stage of the dynamics. Assuming a(0) = a0  ≫  0, we can neglect the dynamics of d(t) to obtain In addition, Eq. ([\ref=eq:mas1]) yields

[formula]

Neglecting terms of order a2k(t) and summing the solution of ak(t) over P(k), we get a result for the early spreading stage

[formula]

with the timescale [formula]. The obtained time scale τ valid in the early stage of the opinion spreading is clearly dominated by the network heterogeneity. This result is in line with known disease models, e.g., SI,SIR [\cite=new02] [\cite=bar08]. We emphasize that Eq.([\ref=eq:masapprox]) is valuable in predicting users' behavior of a recommender system in an early stage.

Discussion

Social influence and our peers are known to form and influence many of our opinions and, ultimately, decisions. We propose here a simple model which is based on heterogeneous agent expectations, a social network, and a formalized social influence mechanism. We analyze the model by numerical simulations and by master equation approach which is particularly suitable to describe the initial phase of the social "contagion". The proposed model is able to generate a wide range of different attendance distributions, including those observed in popular real systems (Netflix, Lastfm, and Movielens). In addition, we showed that these patterns are emergent properties of the dynamics and not imposed by topology of the underlying social network. Of particular interest is the case of Lastfm where the underlying social network is known. Calibrating the observed attendance distribution against the model then leads not only to social influence parameters but also to the degree distribution of the social network which agrees with that of the true social network.

The Kullback-Leibler distances (KL) for the simulated and real attendance distributions are below 0.05 in all cases, thus demonstrating a good fit. However, the maximum attendances could not be reproduced exactly by the model. One reason may be missing degree correlations in the simulated networks in contrast to real networks where positive degree correlations (so-called degree assortativity) are common. For the Lastfm user friendship network we observe a higher clustering coefficient C  ≈  0.18 compared to the clustering coefficient C  ≈  0.06 in the simulated network. To compensate for this, a higher trust parameter γ is needed to fit the real Lastfm attendance distribution with simulated networks.

We are aware that our statistics to validate the model is not complete. But we are confident, that our approach points to a fruitful research direction to understand recommender systems' data as a social driven process.

The proposed model can be a first step towards a data generator to simulate bipartite user-object data with real-world data properties. This could be used to test and validate new recommender algorithms and methods. Future research directions may expand the proposed model to generate ratings within a predefined scale. Moreover, it could be very interesting to investigate the model in the scope of social imitation [formula].