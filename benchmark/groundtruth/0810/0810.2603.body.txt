0.0in

Average Distance, Diameter, and Clustering in Social Networks with Homophily

Financial support from the NSF under grant SES-0647867 is gratefully acknowledged. I thank Ben Golub for helpful conversations. Written for the Workshop on Internet and Network Economics (WINE 2008), in the Lecture Series on Computer Science, Springer-Verlag.

Introduction

Communication advances and the social networking via the Internet have made it much easier for individuals to locate others with similar backgrounds and tastes. This can affect the formation of social networks. How do such changes in the ability of individuals to locate other similar individuals affect social network structure? Answering this question requires having models of how homophily, the tendency of nodes to be linked to other nodes with similar characteristics, affects social network structure. Homophily is a well-studied and prevalent phenomenon that is observed across all sorts of applications and attributes including ethnicity, age, religion, gender, education level, profession, political affiliation, and other attributes (e.g., see Lazarsfeld and Merton (1954), Blau (1977), Blalock (1982), Marsden (1987, 1988), among others, or the survey by McPherson, Cook and Smith-Lovin (2001)). Despite the extensive empirical research on homophily, there is little that is known about how homophily changes a network's basic characteristics, such as the average distance between nodes, diameter, and clustering.

This paper examines the following questions. Given is a society of nodes that are partitioned into a number of different groups where nodes within a group are of the same "type" and nodes in different groups are of different types. A network formation process is examined that can embody various forms of homophily: the probability of links between pairs of nodes can depend on their respective types. Holding the degree distribution constant, how does such a network that is formed with substantial homophily compare to a network formed when types are ignored? One conjecture is that as homophily increases so that the probability of links among nodes of similar types increases and the probability of links across less similar types falls, the average distance and diameter of the network will increase since the density of links across different types of nodes will be falling. This conjecture turns out to be false. Even as the probability of links across types falls, the average distance and diameter are not changed even in some extreme cases where the relative probability a link between nodes of the same type is arbitrarily more likely than a link among nodes of different types, provided some non-vanishing fraction of a node's links are still formed to nodes of other types. In contrast, homophily can have a significant impact on clustering. It is shown that substantial homophily can lead to nontrivial clustering, while a process with the same expected degrees but no homophily exhibits no clustering.

A Model of Network Formation with General forms of Homophily and Degree Sequences

A network G = (N,g) is a graph that consists of a set [formula] of a finite number n of nodes along with a list of edges, g, which are the pairs of nodes that linked to each other.

Given that the network might not be connected, I follow Chung and Lu (2002) in defining average distance in the network to be the average across pairs of path-connected nodes. In particular, let [formula] be the number of links in the shortest path connecting nodes i and j if there is such a path, and let [formula] be infinity if there is no path between i and j in g. Thus, the average distance in the network is defined as

[formula]

The diameter of the network is [formula].

For the network formation processes considered here, the largest component contains all but at most a vanishing fraction of nodes and so these definitions are effectively the same whether we defined them as above, or just work with the largest component of g which is either the whole network or almost all of it.

The clustering of a node i with degree of at least 2 is

[formula]

The average clustering is the average of CLi across nodes i that have degree at least 2.

A General Random Network Model with Homophily

The following model is a generalization of the random network model from Chung and Lu (2002) to allow nodes to be of different types and to allow heterogeneous probabilities of linking across different types.

A set of nodes [formula] is partitioned into K groups or types [formula]. This partition captures the characteristics of the nodes, so that all nodes with the same characteristics are in the same group Nk. Depending on the application a type might embody ethnicity, gender, age, education, profession, etc. in a social setting, or might involve characteristics of a business in a market network, or might involve some physical characteristics of a node in a physical network.

Also given is a degree sequence [formula] which indicates the expected degree or number of connections of each node. Let

[formula]

and

[formula]

Note that if di = d for all i, then [formula].

Let [formula] be the total degree of all nodes of type k.

A random network is formed according to the following process. For each pair of types k and k' there is a parameter hkk'  ≥  0. This parameter captures the relative proclivity of groups k and k' to link to each other. The parameters satisfy [formula] for each k. A link between nodes i in group k and j in group k' is formed with probability

[formula]

Conditions defined below ensure that this expression does not exceed 1.

In the case where hkk > hkk' for all k and k'  ≠  k, then there is homophily, so that nodes are relatively more likely to form their links to their own types than to other types. If hkk' = 1 for all k and k' then types are irrelevant and the model reduces to the usual Chung and Lu model. Otherwise, this allows for different patterns of linkings between different types. If di = d for all i, then this is a generalization of Erdös-Renyi random graphs where links are type-dependent. More generally, the degree distribution could vary across nodes, and power-law networks are the special case where the frequency distribution of [formula] has a power distribution where the frequency of degree d is of the form cd-  γ for some range of d.

An interesting case is where types have some social or spatial geography and type k can be represented as a vector xk∈I  Rm for some m and then hkk' is decreasing in the distance between k and k'; for example of the form c - f(|xk - xk'|) where c is a constant and f is an increasing function. One can also consider some hierarchy among the k's with the relative probabilities depending on the hierarchy (e.g., see Clauset, Moore and Newman (2008)). Another case of interest is where types have a given probability of forming links to their own type and a different probability of forming links all other types (e.g., see Copic, Jackson and Kirman (2005) and Currarini, Jackson and Pin (2007)).

Admissible Models

The main results consider a growing sequence of network formation models, and so all parameters are indexed by n, the number of nodes. The results use some restrictions on variation in expected degrees across nodes and a minimum bound on the proclivity to link across groups. A sequence of network formation processes is said to be admissible if the following conditions are satisfied.

First, there exists h > 0 such that hkk'(n) > h for all k and k' for all large enough n. This condition does not require that nodes of different types have a probability of linking that is bounded below, as a node's degree could be a fixed number independent of n. This lower bound simply implies that any given node spreads some of its links on types other than its own type. This still allows for extreme homophily, as it can still be that hkk(n)  →    ∞   and that the probability of links with own type is becoming infinitely more likely than links with some other types.

Second, the degree sequence satisfies the following:

there exists ε > 0 such that [formula] for large enough n and [formula]

there exists c > 0 such that hc > 1, and M > 0, such that [formula] for all i and n, and di(n)  ≥  c for all but o(n) nodes.

The first restriction is that the second-order average degree is growing with n, but more slowly than n. It grows at a rate fast enough that the giant component includes a fraction approaching 1 of the nodes. The second requires that no node have an expected degree that explodes relative to the average expected degree and that all but a vanishing fraction of nodes have a lower bound on expected degree that is larger than 1.

Diameter and Average Distance in the Model

Let [formula] and [formula] be the average distance and diameter, respectively, of a graph randomly drawn according to the process above with n nodes, degree sequence [formula], and homophily parameters [formula]. This average distance and diameter are random variables for each n. Similarly, let [formula] and [formula] be the average distance and diameter, respectively, of a graph randomly drawn according to the process above with n nodes, degree sequence [formula], and without any homophily (so that hkk'(n) = 1 for all k and k').

Consider an admissible sequence of network formation processes [formula]. Asymptotically almost surely:

[formula], and so [formula],

[formula] and so [formula].

Thus, the average distance and diameter of the admissible processes are not affected by homophily. Even though there can be an arbitrarily increased density of links within types, and substantial decrease in the density of links across types, this does not impact average distance or the diameter in the network. In order for homophily to affect these aspects of the network, one would have to have the density of links across most types decrease at a level which vanishes relative to overall degree. That is, suppose instead that nodes are grouped into evenly sized groups (up to integer constraints) so that hkk'(n)  ≤  f(n) for all k and k' with k'  ≠  k for some f(n) such that [formula] is bounded above and where K(n) / n is bounded away from 0. Then, it is easy to check that, almost surely, [formula] and so [formula].

Proof of Theorem [\ref=avgdegree]: Consider a network formation process such that each node has expected degree hdi and hkk' = 1 for all kk'. This is the process [formula], and the process [formula] is equivalent to a first running the process [formula] and then adding some additional links. Under the admissibility requirement here, [formula] is admissible and specially admissible under the definitions of Chung and Lu (2002). By Lemma 5 in Chung and Lu (2002), almost surely the largest component of a random graph under the process [formula] contains all but at most o(n) of the nodes. By Theorems 1 and 2 in Chung and Lu (2002) the average distance and diameter of this process are almost surely

[formula]

and

[formula]

respectively. Since the process [formula] is equivalent to a first running the process [formula] and then adding some additional links, it then follows directly that a random graph generated in this way contains all but at most o(n) of the nodes and has average distance and diameter of this process are almost surely bounded above by [formula], and some factor times [formula], respectively.

Next, let us show that these are also lower bounds. First, consider a network where all nodes have degree no more than [formula]. Consider any node i. The T-th neighborhood of i includes fewer than

[formula]

nodes. Thus, in order to reach all nodes in the largest component from some node in the largest component (which as argued above contains at least (1 - o(n))n nodes) it takes at least [formula] steps to reach every other node in the largest component, almost surely. Given that [formula], it follows that [formula]. The average distance is thus almost surely at least

[formula]

This is at least (1 - o(1))T(n), almost surely. Thus, the lower bound on average distance is [formula]. The diameter is at least the average distance, and so this is also a lower bound on diameter.

Let us now show that with a probability going to 1 all nodes have degree of no more than 2Md, and then setting M' = 2M implies the result. This probability is at least Πi Pr (di  ≤  2Md). From Fact 1 in Chung and Lu (2002b) it follows that for any given i Pr (di  ≤  2Md) > 1 - e- Md / 3 (bounding E(di) by Md and setting ε in their fact to 1). The overall probability is then at most [formula]. Given that d  ≥  (1 + ε) log (n), it follows that this expression is at least [formula] (taking M / 3  ≥  1 without loss of generality in the definition of M), which goes to 1 since e- Mε log (n) / 3 goes to 0. So, with a probability of 1 - o(1) the average distance is [formula].

Clustering

Note that in the model with no homophily if ( max idi(n))2 / D(n)  →  0, then the average clustering almost surely tends to 0 simply because the most probable link has a probability that tends to 0. In contrast, if groups are relatively small (of the order of average degree) and there is substantial homophily, then average clustering does not vanish. Thus, homophilistic networks exhibit the characteristics of the "small worlds" discussed by Watts and Strogatz (1998): nontrivial clustering at the same time as having a diameter on the order of a uniformly random graph.

Consider a setting such that (i) there is some m > 0 such that for large enough n, hkk(n)Dk(n) / D(n) > m for all k, (ii) max idi(n) /  max k|Nk| and min idi(n) /  max idi(n) are each Ω(1), and max idi(n) > 2. Asymptotically almost surely, average clustering is Ω(1).

The proof of Theorem [\ref=clustering] is straightforward and so only sketched here. Let max idi(n) /  max k|Nk| > m1 > 0 and min idi(n) /  max idi(n) > m2 > 0 for all large enough n. The probability of a link between any two nodes of the same type is at least

[formula]

for all large enough n. Given that there is a bound m3 > 0 so that each node has an expectation of forming a fraction of at least m3 of its links within its own group, and the clustering among pairs of nodes that it is linked to of own type is at least m22m1m > 0, it follows that the expected clustering of any node is bounded away from 0 (conditional on it having degree at least 2). Given that the expected clustering of all nodes are bounded away from 0 (conditional on having at least degree 2), and all nodes have expected degree bounded away from 0 and so a non-vanishing fraction almost surely end up with degree of at least 2, it can then be shown that the average clustering is almost surely above 0.

Discussion

The results here show that substantial homophily and bias in the way that different types of nodes link to each other can be introduced without altering the average distance or diameter of a network. On one level this might not have been expected, and yet the proof of this is very simple and basically relies on the fact that some rescaling of the degree of a node up to a fixed factor does not alter the asymptotic average distance and diameter of the resulting networks. This does not mean that this leaves the properties of the network unchanged, as we have seen with clustering parameters. Also, as shown in Golub and Jackson (2008), networks with substantial homophily can still behave quite differently, so that even though diameter and average distance remain unchanged, the speed of learning can decrease by orders of magnitude and mixing time on such networks can correspondingly increase by orders of magnitude.