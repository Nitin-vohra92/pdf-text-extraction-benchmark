3pt minus 1pt

Groupstrategyproofness of the Egalitarian Mechanism for Constrained Rationing Problems

and Jay Sethuraman

Introduction

Motivated by applications in diverse settings, Bochet et al. [\cite=bims10] [\cite=bim10] study a model in which a homogeneous commodity is reallocated between a given set of agents with single-peaked preferences. In this environment, each agent is endowed with a certain quantity of the commodity and has an ideal consumption level (his peak) of that commodity. An agent who is endowed with more than his ideal consumption level can thus be thought of as a supplier, and an agent who is endowed with less than his ideal consumption level can be thought of as a demander. Furthermore, transfers are possible only between certain pairs of agents, represented by a graph. The goal is to reallocate the commodity to balance supply and demand to the extent possible. The key difference from conventional economic models on this topic is the inability to use money: motivating applications include assigning (or reassigning) patients to hospitals, assigning students to schools, and allocating emergency aid supplies. On the other hand, it is easy to see that the resulting problem is essentially a transportation problem in a (bipartite) network. The distinguishing feature here is that the preferences of the agents (such as their peaks) and the other agents they are linked to is typically private information, so the agents must be given an incentive to report this information truthfully.

Bochet et al. [\cite=bims10] propose a clearinghouse mechanism (a centralized organization of the market) that prescribes an allocation that is efficient with respect to (reported) preferences and (reported) feasible links between agents. They identify a unique egalitarian allocation--so named because of the intimate connection with the egalitarian solution of an associated supermodular game--that Lorenz dominates all Pareto efficient allocations for this problem. Furthermore, they show that the egalitarian mechanism is strategyproof with respect to both links and peaks: no individual agent can strictly benefit by misreporting his peak or the set of agents he is linked to. In a companion paper, Bochet et al. [\cite=bim10] consider a "one-sided" model where the demanders are not strategic, and their demands have to be met exactly. For this model, they propose an egalitarian mechanism that is strategyproof with respect to peaks, but not with respect to links.

Our main result is that the egalitarian mechanism is group strategyproof with respect to peaks in both the one-sided and two-sided models of Bochet et al. Furthermore, we show that under the egalitarian mechanism it is a weakly dominant strategy for any coalition of suppliers (or any coalition of demanders) to truthfully report their links. These results thus properly generalize the corresponding (individual) strategyproofness results of Bochet et al. Our proofs result in an improved understanding of the two models and simpify some of the earlier proofs of strategyproofness.

The models of Bochet et al. [\cite=bims10] [\cite=bim10] generalize many well-known and well-understood models in the literature; we briefly discuss those that are very closely related to our work. If there is a single demander (or a single supplier), the problem reduces to a classical rationing problem of the sort considered by Sprumont [\cite=spr91]. The egalitarian rule then reduces to the "uniform" rule, and admits many characterizations. If the peaks are all identically 1, the problem reduces to a matching problem with dichotomous preferences, discussed in Bogomolnaia and Moulin [\cite=bm04]: in this case, the flow between a supplier-demander pair can be thought of as the probability that this pair is matched. Some of the negative results related to link strategyproofness discussed later are true even in this restricted setting as has already been observed there; we mention these results in the appropriate sections for the sake of completeness. Finally, Megiddo [\cite=meg74] [\cite=meg77] considered the problem of finding an "optimal" flow in a multiple-source, multiple-sink network, and proposed an algorithm to find a lexicographically optimal flow. The egalitarian algorithm described in Bochet et al. [\cite=bims10] [\cite=bim10] is essentially Megiddo's algorithm to compute a lexicographically optimal flow. An implication of our result is that Megiddo's algorithm is group strategyproof with respect to the source and sink capacities, that is, if the agents are located on the edges incident to sources and sinks, and all other edge-capacities are common knowledge, then no coalition of agents have an incentive to misreport their capacities. This observation is useful in settings in which equitably sharing resources is important, such as the sharing problem of Brown [\cite=brown79].

Models and Notation

A single commodity is transferred from a set S of suppliers (typically indexed by i) to a set D of demanders (typically indexed by j). The commodity can only be transferred between certain supplier-demander pairs, given by a bipartite graph G  ⊆  S  ×  D: (i,j)∈G means that supplier i can send the commodity to demander j. A set of transfers from the suppliers to the demanders results in a vector [formula] where xi (resp. yj) is supplier i's (resp. demander j's) net transfer, with [formula]. Each supplier i has single-peaked preferences Ri (with corresponding indifference relation Ii) over her net transfer xi, with peak si, and each demander j has single-peaked preferences Rj (Ij) over her net transfer yj, with peak dj. We write R for the set of single peaked preferences over [formula], and [formula] for the set of preference profiles.

We use the following notation. For any subset T  ⊆  S, the set of demanders compatible with the suppliers in T is [formula]. Similarly, the set of suppliers compatible with the demanders in C  ⊆  D is [formula]. We abuse notation and say f(i) and g(j) instead of f({i}) and g({j}) respectively. For any subsets T  ⊆  S, C  ⊆  D, [formula] and [formula]. A transfer of the commodity from S to D is realized by a flow φ, i.e., a vector [formula]. We write x(φ),y(φ) for the transfers implemented by φ, namely:

[formula]

We say that the net transfers (x,y) are feasible if they are implemented by some flow. Given the graph G and the preferences of the agents (both suppliers and demanders), we would like to find feasible net transfers satisfying some desirable properties. An allocation rule (or a mechansim) is a function that associates feasible net transfers to any given problem. We shall be concerned exclusively with the egalitarian mechanism (described later) proposed by Bochet et al. [\cite=bims10] [\cite=bim10]. An important feature of the egalitarian mechanism is that it is peak-only: the egalitarian net transfers depend on the preferences of the agents only through the peaks. Thus it makes sense to talk of the problem (G,s,d): this emphasizes the fact that the peaks of the agents and the identity of their potential trading partners on the other side can both be modeled as private information. To summarize: (i) agents (suppliers and demanders) report their peaks as well as the set of agents on the other side they are compatible with; (ii) the graph G has a link from supplier i to demander j if and only if both i and j report each other as compatible; and (iii) the egaliatarian mechanism is applied to the problem (G,s,d) where s and d are the reported peaks of the suppliers and demanders respectively.

A mechanism is link strategyproof if for any profile of peaks (s,d), it is a weakly dominant strategy for each agent to truthfully report their set of compatible partners. A mechansim is said to be peak strategyproof if for any graph G it is a weakly dominant strategy for an agent to truthfully report their peak. A mechanism is said to be strategyproof if it is a weakly dominant strategy for each agent to truthfully report their peak as well their set of compatible partners. It is not difficult to see that a mechanism is strategyproof if and only if it is both peak strategyproof and link strategyproof. These definitions admit a natural extension that models potential deviations by coalitions of agents: thus, a mechanism is link group strategyproof if for any profile of peaks (s,d) it is a weakly dominant strategy for any coalition of agents to truthfully report their set of compatible partners. Similarly, a mechanism is peak group strategyproof if for any graph G it is a weakly dominant strategy for any coalition of agents to truthfully report their peaks. Finally, a mechanism is group strategyproof if it is a weakly dominant strategy for any coalition of agents to truthfully report both their peaks and compatible partners. Again, it is not hard to see that a mechanism is group strategyproof if it is both peak group strategyproof and link group strategyproof.

We shall focus on two related, but distinct, models. In the one-sided model, only the suppliers are modeled as strategic agents; the demanders are not strategic and their demands must be met exactly, so that some suppliers may be forced to send more than their peaks. In the two-sided model, both the suppliers and the demanders are modeled as strategic agents. Thus, in considering strategic issues in the one-sided model, we shall naturally only examine coalitions of suppliers.

The One-sided Model

Model

Recall that in the one-sided model, we are given a bipartite graph G with suppliers S indexed by i and demanders D indexed by j. Demander j has a demand of dj that must be satisfied exactly, whereas supplier i has single-peaked preferences with peak si; therefore, a supplier may be required to send more or less than his peak. In addition supplier i is required to send at least [formula] and at most ui units of flow; we may assume without loss of generality that [formula]. The peaks of the demanders, their preferences, and the [formula] and ui are common knowledge; in contrast, for any supplier i, his peak si and the set f(i) of demanders he is linked to may be private information held only by that supplier i and hence must be elicited by the mechanism.

Let λ: = (λi)i∈S be non-negative. Construct the following network G(λ): introduce a source s and a sink t; arcs of the form (s,i) for each supplier i with capacity λi, arcs of the form (j,t) for each demander j with capacity dj; an infinite-capacity arc from supplier i to demander j if supplier i and demander j share a link. Let [formula], u  =  (ui)i∈S, and s  =  (si)i∈S. It is straightforward to verify that the given problem admits a feasible solution if and only if the maximum s-t flow in [formula] and G(u) are, respectively, [formula] and [formula]. Consider now a maximum s-t flow in the network G(s). By the max-flow min-cut theorem, there is a cut C (a cut is a subset of nodes that contains the source s but not the sink t) whose capacity is equal to that of the max-flow. If the set of suppliers in C is X and the set of demanders in C is Y, it is clear that Y  =  f(X): if [formula], then C has infinite capacity, and if Y  ⊃  f(X) then C's capacity can be improved by deleting the demanders in [formula]. Bochet et al. [\cite=bim10] show that in any Pareto-optimal allocation x for the suppliers, xi  ≤  si for each i∈X and xi  ≥  si for each [formula].

If the min-cut is not unique, it is again well-known (see [\cite=lp88]) that there is a min-cut with the largest X (largest in the sense of inclusion), and a min-cut with the smallest X (again in the sense of inclusion). Call these sets [formula] and [formula]. It is easy to check that every supplier in [formula] will be at his peak value in all Pareto optimal solutions. In the notation of Bochet et al. [\cite=bim10], [formula], [formula], and [formula]. To keep things simple, however, we shall dispense with M0 and use the partition [formula], [formula]. In this case the partition of the demanders becomes Q+  =  f(M-) and [formula]. We note that our M- is still uniquely determined for each problem. In what follows, often it will be important to talk about the set of suppliers involved in the cut, rather than the cut itself: we abuse notation and talk about the cut X when in fact the set of nodes in the cut is really [formula].

Egalitarian Mechanism

Suppose (xi)i∈S is a Pareto optimal allocation. From the earlier discussion it is clear that xi∈[si,ui] for every supplier i∈M+, and xi∈[null] for every supplier i∈M-. Bochet et al. [\cite=bim10] prove that the egalitarian allocation, which is defined independently for the suppliers in M- and M+, Lorenz dominates all other Pareto optimal allocations.

For the suppliers in M-, the egalitarian allocation is found by the following algorithm. Let λ be a parameter whose value is increased continuously from zero, and let [formula]. Consider the graph G(m(λ)), where the capacity of the arc (s,i) is mi(λ). By the earlier discussion, we know that each supplier in M- will send at least [formula] and at most si units of flow in a Pareto optimal solution, and that every demander j in f(M-) will receive exactly dj units of flow. We now study the sequence of networks G(m(λ))--specifically the maximum s-t flow in such networks--as λ is increased from zero. It is not hard to see that the maximum s-t flow in G(m(λ)) is a weakly-increasing, piecewise linear function of λ with at most 2n breakpoints. Moreover, each breakpoint is one of the [formula], or one of the si (type 1), or is associated with a subset of suppliers X such that

[formula]

This we call a type-2 breakpoint. At a type-1 breakpoint, the associated supplier is at his peak and so will not send any more flow (recall that every supplier i∈M- will send flow at most his peak si); at a type-2 breakpoint, however, the group of suppliers in X are sending enough flow to satisfy the collective demand of the demanders in f(X), so any further increase in flow from any supplier in X would cause some demander in f(X) to accept more than his peak demand.

If the given problem does not have any type-2 breakpoint, then the egalitarian solution obtains by setting each supplier's allocation to his peak value. Otherwise, let [formula] be the first type-2 breakpoint of the max-flow function; by the max-flow min-cut theorem, for every subset X satisfying ([\ref=type2]) at [formula] the cut [formula] is a minimal cut in [formula] providing a certificate of optimality for the maximum-flow in [formula]. If there are several such cuts, we pick the one with the largest [formula] (its existence is guaranteed by the usual supermodularity argument). The egalitarian solution obtains by setting and assigning to other agents their egalitarian share in the reduced problem involving the suppliers in [formula] and the demanders in [formula]. It is straightforward to verify that the first type-2 breakpoint λ*  * of this reduced problem will satisfy λ*  *  >  λ*.

For the suppliers in M+, a similar algorithm is used to determine the egalitarian allocation: here, each demander j∈Q- receives exactly di units of flow, whereas every supplier i∈M+  =  g(Q-) sends at least si and at most ui units of flow in a Pareto optimal solution. As before, we consider the graph G(m(λ)), where the capacity of the arc (s,i) is mi(λ): = median(si,λ,ui). We increase λ gradually and observe that the maximum s-t flow in G(m(λ)) is a weakly-increasing, piecewise linear function of λ with at most 2n breakpoints. Moreover, each breakpoint is one of the si, or one of the ui (type 1), or is associated with a subset of suppliers X such that This we call a type-2 breakpoint. At a type-1 breakpoint, the associated supplier is at his upperbound and so cannot send any more flow; at a type-2 breakpoint, however, the group of suppliers in X are sending enough just enough flow to satisfy the collective demand of the demanders in f(X), so any decrease in flow from any supplier in X would cause some demander in f(X) to receive an amount strictly below his peak demand. As before, if the given problem does not have any type-2 breakpoint, then the egalitarian solution obtains by setting each supplier's allocation to his upper bound. Otherwise, let [formula] be the first type-2 breakpoint of the max-flow function, and let X* be the (largest) associated bottleneck set of suppliers (as before). The egalitarian solution obtains by setting and assigning to other agents their egalitarian share in the reduced problem involving the suppliers in [formula] and the demanders in [formula]. This completely defines the egalitarian solution.

Group Strategyproofness

We turn now to strategic aspects of the rationing problem with constraints. In the one-sided model, only the suppliers are modeled as "agents," who possess potentially two pieces of information that could be modeled as private: the set of demanders they are compatible with, and their own preference over allocations . As the egalitarian mechanism is "peak-only" [\cite=bim10], it is sufficient for the suppliers to report only their peaks, rather than their entire preference ordering.

It is a simple matter to verify that the egalitarian mechanism is not link strategyproof. Consider a supplier with a peak of 1, connected to two demanders, each with a demand of 1, see Figure [\ref=fig:lsp]. If the supplier reveals both links, his egalitarian allocation is 2, whereas by suppressing one of the links, his egalitarian allocation improves to 1. Therefore in the rest of this section we focus only on peak strategyproofness.

Bochet et al. [\cite=bim10] show that the egalitarian mechanism, which finds the egalitarian allocation for any given problem, is peak strategyproof. Our main result in this section is that, in fact, the egalitarian mechanism is peak groupstrategyproof. To set the stage for this, we start with a lemma, which we first use to give an alternative proof that the egalitarian mechanism is strategyproof.

For a problem (G,s,d), suppose the decomposition is M+ and M- (with Q+, Q- defined as before), and the egalitarian allocation is x. Consider the problem (G,s',d) with s'j  =  sj for all [formula], with the decomposition being M'+ and M'-.

If i∈M- and s'i  ≥  si, M'+  =  M+ and M'-  =  M-.

If i∈M+ and s'i  ≤  si, M'+  =  M+ and M'-  =  M-.

Proof. By definition, M- is the smallest (both in terms of cardinality and inclusion) min-cut in the graph G(s) (see §[\ref=ss:model] for the definition). For i∈M-, the arc (s,i) does not contribute to the cut-capacity. If s'i  ≥  si, the capacity of any cut is weakly greater in (G,s',d) than in (G,s,d), whereas the capacity of the cut M- stays the same, so part (a) follows by the minimality of M-. Similarly, for i∈M+, the arc (s,i) contributes to cut-capacity, the capacity of the cut M- is smaller in (G,s',d) than in (G,s,d) by exactly si  -  s'i, whereas the capacity of any cut is weakly smaller in (G,s',d) than in (G,s,d) by at most si  -  s'i. Again, part (b) follows by the minimality of M-.

The egalitarian mechanism is peak strategyproof.

Proof. For the problem (G,s,d) let x be the egalitarian allocation, and let M+ and M- be defined as before. Consider the problem (G,s',d) with sk  =  s'k for all [formula]. Suppose i∈M-. If s'i  ≥  si, Lemma [\ref=lem:structure2] proves that the decomposition does not change; it is easy to see that the egalitarian allocation is unaffected as well, because the algorithm to compute operates identically in the problems (G,s,d) and (G,s',d). Similarly, if i∈M+ and s'i  ≤  si, the decomposition does not change (by Lemma [\ref=lem:structure2]), and the egalitarian allocation is unaffected as well. Suppose agent i reports s'i as his peak and the allocation changes to x'i. To prove strategyproofness, it suffices to show that any i∈M- (weakly) prefers xi to x'i for all s'i  <  si, and that any i∈M+ (weakly) prefers xi to x'i for all s'i  >  si.

Fix an i∈M-, and suppose that i reports a peak of s'i  <  si. In this case the decomposition may change; let M'- and M'+ be the new decomposition. If i∈M'-, an application of Lemma [\ref=lem:structure2] to the problem (G,s',d) shows that the decomposition does not change, and that x'i  =  xi. Suppose i∈M'+. Let [formula], and [formula], and note that by our supposition X'∋i. Note also that [formula], as no agent in M'- has a link to any demander in Q'-. Furthermore, if [formula], x'i  =  0, and again the result follows: recall that f(i)  ⊆  Q+; and if [formula], f(i)  ⊆  Q'+, and the links from M'+ to Q'+ do not carry any flow. So we may assume that i∈g(D'). We now make two simple observations about the agents in [formula] in the problem (G,s',d): first every such agent sends flow only to the demanders in D', and therefore [formula]. Also, as every agent in [formula] is (weakly) above his reported peak, x'k  ≥  sk for every [formula], [formula], and x'i  ≥  s'i. This implies

[formula]

We next claim that in the problem (G,s,d), [formula]. To see why, observe that the demands of D' are covered in the problem (G,s,d) by the suppliers in [formula]; but every demander in D' moves from Q+ to Q'-, so every supplier in [formula] must move to M'+ (as there cannot be an edge between a supplier in M'- and a demander in Q'-). This implies that any supplier supplying a positive amount to a demander in D' in the problem (G,s,d) must be in [formula]. Note also that for each [formula], xk  ≤  sk. These, along with [formula], imply

[formula]

Inequalities ([\ref=eq:lb]) and ([\ref=eq:ub]) imply x'i  ≤  xi, as required.

Now fix an i∈M+, and suppose that i reports a peak of s'i  <  si. In this case the decomposition may change; let M'- and M'+ be the new decomposition. If i∈M'+, as before, an application of Lemma [\ref=lem:structure2] to the problem (G,s',d) shows that the decomposition does not change, and that x'i  =  xi. Suppose i∈M'-. Let [formula], and [formula], and note that by our supposition X'∋i. Note also that [formula], as no agent in M'- can have a link to any demander in Q'+. We now make two simple observations about the demanders in [formula] in the problem (G,s',d): first every such demander can receive flow only from the agents in X', and therefore [formula]. Also, as every agent in X' is (weakly) below his reported peak (in the new problem), x'k  ≤  sk for every k∈X', [formula], and x'i  ≤  s'i. This implies

[formula]

We next claim that in the problem (G,s,d), [formula]: in (G,s,d) the suppliers in X' send flow only to the demanders in [formula], who receive flow only from these suppliers. Furthermore, xk  ≥  sk for each k∈X'. In particular,

[formula]

Inequalities ([\ref=eq:lbb]) and ([\ref=eq:ubb]) imply x'i  ≥  xi, as required.

In fact, the ideas in the proof of Theorem [\ref=th:sp] can be used to prove the following result, which weakens the conditions under which the decomposition is guaranteed not to change.

For a problem (G,s,d), suppose the decomposition is M+ and M- (with Q+, Q- defined as before), and the egalitarian allocation is x. Consider the problem (G,s',d) with s'j  =  sj for all [formula], with the decomposition being M'+ and M'-.

If i∈M- and s'i  >  xi, M'+  =  M+ and M'-  =  M-.

If i∈M+ and s'i  <  xi, M'+  =  M+ and M'-  =  M-.

Proof. By definition, M- is the smallest (both in terms of cardinality and inclusion) min-cut in the graph G(s) (see §[\ref=ss:model] for the definition). For i∈M-, the arc (s,i) does not contribute to the cut-capacity. If s'i  ≥  si, the capacity of any cut is weakly greater in (G,s',d) than in (G,s,d), whereas the capacity of the cut M- stays the same, so the result follows. Suppose now that xi  <  s'i  <  si, the max s-t flow in G(s') is weakly below that of G(s), but the egalitarian allocation x is still feasible, so x continues to be a max-flow, so M- continues to be a min-cut in G(s'). We need to show that it remains the minimal min-cut. First observe that M'-  ⊆  M-, as M'- is the minimal min-cut in G(s') whereas M- is a min-cut for G(s'). If i∈M'-, then the capacity of the cut M'- is the same in G(s) and G(s'), so the minimality of M- in the problem (G,s,d) implies M'-  =  M-. Suppose [formula]. Let [formula], and note that i∈X. Note also that Q+  =  f(M-) and Q'+  =  f(M'-), so that the net change in the cut capacity when the suppliers in X move from M- to M'+ is precisely [formula]. In the problem (G,s,d), however, the demanders in [formula] receive flow only from the suppliers in X, each of whom sends no more than his peak: thus, [formula], and sk  ≥  xk for each k. An easy implication is that s'k  ≥  xk for each k∈X, k  ≠  i, and s'i  >  xi. Thus the net change in cut capacity in moving from M- to M'- is strictly positive, which implies M'- cannot be a min-cut. A similar argument establishes part (b).

We conclude this section with a proof that the egalitarian mechanism is, in fact, group strategyproof.

The egalitarian mechanism is peak groupstrategyproof.

Proof. Suppose not. Focus on a counterexample G with the smallest number of nodes. Suppose the true peaks of the suppliers are s and suppose they misreport their peaks to be s'. Fix a coalition A of agents: note that this coalition includes all the agents k with [formula]. Let x and x' be the respective allocations to the agents when they report s and s' respectively. As with the earlier proof, let M+,M- be the decompsition when the agents report s, and let M'+,M'- be the decomposition when the agents report s'. We shall show that when the agents report s' rather than s the only allocation in which each agent in A is (weakly) better off is one in which x'k  =  xk for all k∈A, establishing the required contradiction.

Let [formula]. Note that g(D')  ⊆  M'+, for otherwise there will be a supplier in M'- with a link to a demander in Q'-. We now make two simple observations about the agents in [formula]:

When the report is s', every such agent can send flow only to the demanders in D': this is because f(M-)  ⊆  Q+, and each agent in g(D') can send flow only to the agents in Q'-. Therefore [formula].

When the report is s, the demanders in D' can receive flow only from such agents: the demanders in D' can receive flow only from the suppliers in M- and they are connected only to the suppliers in g(D'). Therefore [formula].

Note also that s'k  ≤  x'k and xk  ≤  sk for any [formula], and that s'k  =  sk for all [formula]. These observations lead to

[formula]

and

[formula]

For every agent in A to be (weakly) better off when reporting s', we must have x'k  ≥  xk for each k∈A. Combining this with inequalities ([\ref=eq:lbg]) and ([\ref=eq:ubg]), we conclude that x'k  =  xk for each [formula]. Moreover, these inequalities also imply that x'k  =  xk  =  sk for each [formula], [formula]. Thus, x'k  =  xk for all [formula]. Also, whether the report is s or is s', the suppliers in [formula] send all of their flow only to the demanders in D'; and that these demanders receive all of their flow only from the suppliers in [formula]. Therefore, removing the suppliers in [formula] and the demanders in D' does not affect the egalitarian solution for either problem. As we picked a smallest counterexample, [formula].

We now turn to the other case. Let [formula]. Note that [formula], for otherwise there will be a supplier in M'- linked to a demander in Q'-. Consider the demanders in [formula]:

When the report is s', every such demander can receive flow only from the suppliers in [formula]: such demanders are linked only to the suppliers in M+ and can receive flow only from the suppliers in M'-. Therefore [formula].

When the report is s, the suppliers in [formula] send flow only to the demanders in Q-, and they can send flow only to the demanders they are connected to, so the suppliers in [formula] can send flow only to the demanders in [formula]. Therefore [formula].

Note also that s'k  ≥  x'k and xk  ≥  sk for any k∈, and that s'k  =  sk for all [formula]. Putting all this together we have:

[formula]

and

[formula]

For every agent in A to be (weakly) better off when reporting s', we must have xk  ≤  x'k for each k∈A. Combining this with inequalities ([\ref=eq:lbbg]) and ([\ref=eq:ubbg]), we conclude that x'k  =  xk for each [formula]. Moreover, these inequalities also imply that x'k  =  xk  =  sk for each [formula]. Thus, x'k  =  xk for all k∈. Note that the suppliers in [formula] send all of their flow flow to the demanders in [formula], whether the report is s or s'; also the demanders in [formula] receive all of their flow from the suppliers in [formula], whether the report is s or s'. Therefore, removing the suppliers in [formula] and the demanders in [formula] does not affect the egalitarian solution for either problem. As we picked a smallest counterexample, [formula].

We now establish that the decomposition does not change in a smallest counterexample. We already know that [formula], which implies Q'-  ⊆  Q-. Suppose this containment is strict so that there is a demander [formula]. Then, g(j)  ⊆  M+. As [formula], g(j)  ⊆  M'+, which implies demander j cannot receive any flow when the report is s'. Therefore Q'-  =  Q-, which implies Q'+  =  Q+, M'+  =  M+, and M'-  =  M-.

To complete the argument, let A be as defined earlier. Let [formula] and [formula]. For any i∈A-, s'i  <  xi implies x'i  ≤  s'i  <  xi, causing i to do worse by reporting s'i. Likewise, any i∈A+, s'i  >  xi implies x'i  ≥  s'i  >  xi, causing i to do worse by reporting s'i. So any improving coalition A must be such that s'i  ≥  xi for all i∈A- and s'i  ≤  xi for all i∈A+. But in this case the egalitarian solution does not change for either problem.

The Two-sided Model

Model

We now turn to the two-sided model, introduced by Bochet et al. [\cite=bims10]. This is closely related to the one-sided model, and yet there are some important differences, so our treatment will be concise, and will focus mostly on the aspects that make this model different. As in the one-sided model, we are given a bipartite graph G with suppliers (M) indexed by i and demanders by j. In the two-sided model, however, both the suppliers and demanders have single-peaked preferences: supplier i has a peak of si, and demander j has a peak of dj. Define the graph Γ(G,s,d) by adding a source σ connected to all suppliers, and a sink τ connected to all demanders; by orienting the edges from source to sink; by setting the capacity of an edge in G to infinity, that of an edge σi,i∈S, to si, and that of jτ,τ∈D, to dj. A σ-τ cut (or simply a cut) in this graph is a subset C of nodes that contains σ but not τ. The capacity of a cut C is the total capacity of the edges that are oriented from a node in C to a node outside of C (such edges are said to be in the cut ). It is well-known that the max-flow from σ to τ in this network is the same as the capacity of a min σ-τ cut. Fix an arbitrary min σ-τ cut C, and let X be the set of suppliers in C and Y be the set of demanders in C. It is not hard to see that Y  =  f(X) in a min-cut. Bochet et al. [\cite=bims10] characterize the Pareto optimal solutions to this model using a network construction very similar to that used for the one-sided model. In particular they show that in any Pareto optimal allocation (x,y), xi  ≤  si for i∈X and xi  ≥  si for each supplier [formula]; similarly, yj  ≤  dj for all j∈Y, and yj  ≥  dj for all [formula]. In addition they show that in a Pareto-optimal allocation, there is no flow from a supplier not in X to a demander in Y (even though links may exist between such suppliers and demanders). In effect, the problem decomposes into two subproblems, one involving the suppliers in X and the demanders in Y;the other involving the suppliers not in X and the demanders not in Y. The egalitarian allocation is found independently for each subproblem, using exactly the same algorithm described earlier in §[\ref=ss:egal]. They also show that the egalitarian allocation can be found by an alternative algorithm as follows: first, set all the demands to be dj and apply the one-sided egalitarian algorithm described earlier in §[\ref=ss:egal] with the additional restriction that no supplier sends more than his peak, and that no demander receives more than hers; this gives the egalitarian allocation for the suppliers. The egalitarian allocation for the demanders is obtained by applying the same algorithm under the same additional restriction, but interchanging the roles of the suppliers and demanders (thus, we fix the supplies to be the si etc.) It is this equivalent definition that we will use in the proofs. A key result is that the egalitarian allocation is the Lorenz dominant element of the subset of the Pareto optimal allocations in which no agent sends or receives more than their peak (this set is called Pareto* by Bochet et al.). By picking a cut C with the largest X, we find a canonical decomposition for each problem, as such a cut is unique: to relate this with the notation of Bochet et al., the X corresponding to the largest C is S-, and the demanders Y in C is the set D+; the suppliers outside of X belong to S+, and the demanders outside of Y are in D-.

We turn now to strategic issues. Bochet et al. [\cite=bims10] show that the egalitarian mechanism is both link strategyproof and peak strategyproof. Here we show that the egalitarian mechanism is in fact peak groupstrategyproof.

In the two-sided model, the egalitarian mechanism is peak group strategyproof.

Proof. Suppose not. Focus on a counterexample G with the smallest number of nodes. Suppose the true peaks of the suppliers and demanders are s and d respectively, and suppose their respective misreports are s' and d'. We can assume that dj  >  0 for every demander j, as otherwise deleting j would result in a smaller counterexample. Fix a coalition A of suppliers and a coalition B of demanders : note that A contains all the suppliers k with [formula], and B includes all demanders [formula] with [formula].

Let (x,y) and (x',y') be the respective allocations to the suppliers and demanders when they report (s,d) and (s',d') respectively. Let S+,S-,D+,D- be the decompsition when the agents report (s,d), and let S'+,S'-,D'+,D'- be the decomposition when the agents report (s',d'). We shall show that when the agents report (s',d') rather than (s,d), the only allocation in which each agent in [formula] is (weakly) better off, then x'k  =  xk for all k∈A and [formula] for all [formula]. This establishes the required contradiction.

Let [formula]. Note that g(Y')  ⊆  S'+, for, otherwise, there will be a supplier in S'- with a link to a demander in D'-. We now make two simple observations about the suppliers in [formula]:

For any such supplier k, s'k  =  x'k and xk  ≤  sk. Also, [formula] and [formula] for any [formula].

When the report is s', every such supplier can send flow only to the demanders in Y': this is because f(S-)  ⊆  D+, and each supplier in g(Y') can send flow only to the agents in D'-. Therefore [formula].

When the report is s, the demanders in Y' can receive flow only from such suppliers: the demanders in Y' can receive flow only from the suppliers in S- and they are connected only to the suppliers in g(Y'). Therefore [formula].

Finally, note that s'k  =  sk for all [formula], and [formula] for all [formula]. These observations first lead to

[formula]

Note that every demander [formula] in [formula] receives exactly his peak allocation [formula] for a truthful report, so for the coalition B of demanders to do weakly better in the (G,s',d') problem, [formula] for each such [formula]. Therefore,

[formula]

Finally,

[formula]

For every supplier in A to be (weakly) better off when reporting s', we must have x'k  ≥  xk for each [formula]. Combining this with inequalities ([\ref=eq:2glbg]) and ([\ref=eq:2gubg]), we conclude that all the inequalities in ([\ref=eq:2glbg])-([\ref=eq:2gubg]) hold as equations. In particular, x'k  =  xk for all [formula], and [formula] for [formula]. Therefore, whether the report is s or is s', the suppliers in [formula] send all of their flow only to the demanders in Y'; and that these demanders receive all of their flow only from the suppliers in [formula]. Therefore, removing the suppliers in [formula] and the demanders in Y' does not affect the egalitarian solution for either problem. As we picked a smallest counterexample, Y' must be empty.

We now turn to the other case. Let [formula]. Note that [formula], for otherwise there will be a supplier in S'- linked to a demander in D'-. Consider the demanders in [formula]:

For any such demander [formula], [formula] and [formula]. Also, sk  =  xk and x'k  ≤  s'k for any k∈.

When the report is s', every such demander can receive flow only from the suppliers in [formula]: such demanders are linked only to the suppliers in S+ and can receive flow only from the suppliers in S'-. Therefore [formula].

When the report is s, the suppliers in [formula] send flow only to the demanders in D-, and they can send flow only to the demanders they are connected to, so the suppliers in [formula] can send flow only to the demanders in [formula]. Therefore [formula].

Finally, note that s'k  =  sk for all [formula], and [formula] for all [formula]. Putting all this together, we have:

[formula]

and

[formula]

Note that every supplier k in [formula] receives exactly his peak allocation sk for a truthful report, so for the coalition A of suppliers to do weakly better in the (G,s',d') problem, x'k  =  sk for each such k. Thus,

[formula]

For every demander in B to be (weakly) better off, we must have [formula] for each [formula]. Combining this with inequalities ([\ref=eq:2glbbg])-([\ref=eq:2gubbg]), we conclude that all the inequalities in ([\ref=eq:2glbbg])-([\ref=eq:2gubbg]) hold as equations. In particular, x'k  =  xk for all k∈, and [formula] for [formula]. Therefore, whether the report is s or is s', the suppliers in [formula] send all of their flow only to the demanders in [formula]; and that these demanders receive all of their flow only from the suppliers in [formula]. Therefore, removing the suppliers in [formula] and the demanders in [formula] does not affect the egalitarian solution for either problem. As we picked a smallest counterexample, [formula] must be empty.

We now establish that the decomposition does not change in a smallest counterexample. We already know that [formula], which implies D'-  ⊆  D-. Suppose this containment is strict so that there is a demander [formula]. Then, g(j)  ⊆  S+. As [formula], g(j)  ⊆  S'+, which implies demander j cannot receive any flow when the report is s' (i.e. x'j  =  0). This is a contradiction since, d'(j)  >  0, then the egalitarian solution allocates the pareto value x'j  =  d'j for all j∈D'+. (w.l.o.g we can skip the case d'j  =  0 as we can delete such a j to obtain the new decomposition or just place it in D-). Therefore D'-  =  D-, which implies D'+  =  D+, S'+  =  S+, and S'-  =  S-.

To complete the argument, let A be as defined earlier. Let [formula] and [formula], [formula] and [formula]. Now, for any j∈B+, d'j  ≠  dj implies y'j  =  d'j  ≠  dj causing j to do worse by reporting d'j. Hence, it follows, [formula], d'j  =  dj. By a similar argument, we could establish [formula].

For any i∈A-, s'i  <  xi implies x'i  ≤  s'i  <  xi, causing i to do worse by reporting s'i. Likewise, any i∈B-, d'i  <  yi implies y'i  ≤  d'i  <  yi, causing i to do worse by reporting d'i. So any improving coalition A must be such that s'i  ≥  xi for all i∈A- and d'i  ≥  yi for all i∈B-. But in this case the egalitarian solution does not change for either problem.

We turn now to link group strategyproofness. That the egalitarian mechanism is not link group strategyproof in the two-sided model is not difficult to see. Consider the network shown in Figure 2. The network (a) represents the true network, with the peaks shown next to the agent labels. The egalitarian allocation gives 1 unit to each supplier and to each demander on this example. Suppose however supplier 1 and demander 2 collude, and supplier 1 does not report his link to demander 1. In the resulting network, shown in (b), each supplier still receives his peak allocation; demander 2 now receives her peak, and demander 1 receives nothing. Note that both members of the coalition weakly improve, and demander 2 strictly improves, proving that the egalitarian mechanism is in general not link group strategyproof . The following result, however, shows that the egalitarian mechanism satisfies a limited form of link group strategyproofness.

In the two sided model, the egalitarian mechanism is link group strategy proof when the coalition is restricted to the set of suppliers only (demanders only).

Proof. We prove the result for an arbitrary coalition of suppliers; the result for the demanders follow by a similar argument. Let Ai be the set of demanders that supplier i is linked to, and let A'i be supplier i's report. We may assume without loss of generality that any given demander finds all the suppliers acceptable: if demander j finds supplier i unacceptable, then supplier i cannot have a link to demander j regardless of his report, so clearly i's manipulation opportunities are more restricted. Let φ and φ' be (any) egalitarian flows when the suppliers report A and A' respectively, and let x and x' be the corresponding allocation to the suppliers. We show that no coalition of suppliers can weakly benefit by misreporting their links unless each supplier in the coalition gets exactly their egalitarian allocation.

The proof is by induction on the number of type 2 breakpoints in the algorithm to compute the egalitarian allocation. Suppose the given instance has n type 2 breakpoints, and suppose [formula] are the corresponding bottleneck sets of suppliers. If n  =  0, every supplier is at his peak value in the egalitarian allocation, and clearly this allocation cannot be improved. Suppose n  ≥  1. Define

[formula]

and

[formula]

We shall show, by induction on [formula], that for each [formula]:

φ'ij  =  0 for any [formula], [formula], [formula]; and

[formula].

The theorem follows from part (b) above.

Any supplier [formula] must have Ak  =  A'k as otherwise supplier k is part of the deviating coalition and does worse. Consider now a supplier [formula] with xi  <  si and a supplier [formula]. We have the following chain of inequalities:

[formula]

To see why, note that as [formula], the second inequality is true by definition, and also Ak  =  A'k (justifying the first equality). Also [formula] and xi  <  si, implies xk  <  si, as suppliers k and i both belong to the same bottleneck set and supplier i is below his peak; this justifies the third inequality. The fourth and fifth inequalities follow from the fact that [formula] and the fact that φ'ij must be zero for all [formula]. This chain of inequalities implies that x'k  <  xk  ≤  sk and x'k  <  x'i. Therefore, when the suppliers report A', supplier k must be a member of an "earlier" bottleneck set than supplier i. An immediate consequence is that demanders in A'k  =  Ak do not receive any flow from supplier i when the report is A'.

By the induction hypothesis, supplier [formula] does not send any flow to the demanders in [formula]. Therefore

[formula]

This observation, along with the fact that every [formula] weakly improves, and the fact that [formula] is a type 2 breakpoint implies that [formula], establishing (b). Furthermore, in such a solution, every demander j∈Ai for [formula] must receive all his flow from the suppliers in [formula].In particular, the demanders in [formula] cannot receive any flow from suppliers in [formula] for [formula], establishing (a). To complete the proof we need to establish the basis for the induction proof, i.e., the case of [formula]. This, however, follows easily: it is easy to verify that the set [formula] must be empty, so X1  =  1. As X1 is a type 2 bottleneck set, it is not possible for every member of X1 to do weakly better unless the allocation remains unchanged. Thus, both (a) and (b) follow.

An easy implication is the following result, whose proof is an immediate consequence of the results we have already established.

In the two sided model, the egalitarian mechanism is group strategyproof w.r.t. to both links and peaks when the coalition is restricted to the set of suppliers only (demanders only).

Conclusions

Our main contribution is a proof of peak group strategyproofness of the egalitarian mechanism in the two settings considered by Bochet et al. A number of interesting open problems remain, and we mention a few. First, Bochet et al. characterize the egalitarian mechanism using Pareto efficiency, strategyproofness, and an equity property that can be thought of as the equal treatment of equals adapted to this constrained setting. A natural question is if there is an alternative characterization that uses group strategyproofness, but weakens the efficiency or the equity requirement. Second, it will be interesting to characterize all (both link and peak) strategyproof mechanisms for this problem. In particular, it will be of interest to find natural link-monotonic mechanisms for the one-sided model (the egalitarian mechanism fails this test). Finally, note that the egalitarian mechanism has the somewhat undesirable property that an agent can change the allocation of other agents without altering his own, see the example of Figure [\ref=fig:bossy]. (Such mechanisms are said to be "bossy.") Are there natural non-bossy mechanisms for this problem that are compelling from a normative point of view?