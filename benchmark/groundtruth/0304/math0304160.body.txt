On the Average of Triangular Numbers

The present note has been suggested by a problem proposed in the "Student Problems" section of The Mathematical Gazette (see [\cite=studentproblem]). The problem we tackle is the following: find two sequences an and bn such that the average of the first bn triangular numbers (starting with the triangular number 1) is still a triangular number, precisely the an-th triangular number.

If we want that the average of the first s triangular number be a triangular number it has to hold

[formula]

for some positive integer r. This becomes

[formula]

that is, clearing the fractions,

[formula]

Solving for s and considering that s has to be a positive quantity we have the solution

[formula]

Now because s has to be an integer we need r such that 1 + 12r + 12r2 is a perfect square; also [formula] has to be even.

Consider the nonhomogeneous recurrence wn = w(k,  r,  s) defined by

[formula]

Let α and β be the zeros of the polynomial x2 - 4x + 1, that is [formula]. Note that [formula].

It is useful to introduce the homogeneous sequence Ln = w(0,  2,4) given by

[formula]

This sequence is the analogous in this context of the Lucas numbers. The closed form of Ln is

[formula]

The generating function of wn is given by

[formula]

from which we get the closed form

[formula]

It may be useful to write the RHS in terms of the Ln sequence

[formula]

Now introduce the sequence an = w(1,  0,  1). an is sequence A061278 in [\cite=sloane]: the first values are [formula]. Using Equation [\ref=eq:closed] we get

[formula]

Note that

[formula]

[formula]

Then

[formula]

where we used the recurrence defining Ln. Now we are going to show that this expression is a perfect square. Write

[formula]

Hence it remains to prove that

[formula]

is a positive integer. This will be done by strong induction. First of all note that

[formula]

so that we will take [formula]. Then u0 = 1. Next assume that un is a positive integer for n  ≤  n0. It follows that un0(α  +  β) = 4un0 is a positive integer. But

[formula]

Because by the induction hypothesis un0 - 1 is a positive integer, it follows that un0 + 1 is a positive integer. This ends the induction proof.

As a side result we get that un obeys the recurrence

[formula]

since [formula]. un is sequence A001834 in [\cite=sloane].

It remains to prove that un is odd which is the same as to prove that [formula] is even, which means that L2n + 1 is a multiple of 4. Again this will be done by strong induction. For n = 0 we have L1 = 4. Next assume that L2n + 1 is a multiple of 4 for n  ≤  n0, that is L2n + 1 = 4cn, where cn is a positive integer. Then

[formula]

Then

[formula]

that is, a multiple of 4.

It follows that

[formula]

Hence

[formula]

The initial values are b0 =  - 1,  b1 = 1. It follows that bn = w(3,   - 1,  1). The initial values are [formula].

If we solve Equation [\ref=eq:equazione] for r, being r a positive quantity, we obtain

[formula]

If we define

[formula]

after insertion of the value of bn we get

[formula]

that is

[formula]

Essentially repeating the previous reasoning we find that vn is a positive integer [formula] and we have the recurrence

[formula]

that is vn = w(0,  3,  9). Also we get the closed form

[formula]

Furthermore

[formula]

This can be proved easily by strong induction, noting that v0 = 3 and assuming that for all n  ≤  n0 the former equation holds. Writing vn0 = 6k1 + 3,  vn0 - 1 = 6k2 + 3 we have

[formula]

so that

[formula]

And finally we have

[formula]

It is interesting the fact that the sequence un is a bisection of sequence A002531 in [\cite=sloane] that gives the numerators of continued fraction convergents to [formula], a result that as far as we know is new. Denoting by zn the sequence of the convergents we are going to prove

[formula]

From the comments to A002531 in [\cite=sloane] we have that

[formula]

[formula]

Now

[formula]

Now from

[formula]

we get

[formula]

Also from

[formula]

we get

[formula]

so that

[formula]

So we can write

[formula]

Setting

[formula]

we have the recurrence

[formula]

with d0 = u0 - z1 = 1 - 1 = 0. Hence dn = 0 and un = z2n + 1.

In a similar way we obtain

[formula]

where Fn = w(0,  0,  1), the analogous of the Fibonacci numbers for this type of recurrences. Fn is sequence A001353 in [\cite=sloane].